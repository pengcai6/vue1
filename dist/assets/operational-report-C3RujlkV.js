import{d as U,r as p,j as Y,c as j,a as t,w as a,aF as G,o as J,i as s,E as Q,e as k,bl as W,b as l,bR as h,n as u,J as H}from"./index-DAZDpghP.js";import{a as K,E as X}from"./table-column-CkszfM6q.js";import"./checkbox-DDntw5na.js";import"./scrollbar-BKn1N4ug.js";/* empty css            */import{E as Z,a as ee}from"./col-1pbAQj7U.js";import{E as te}from"./statistic-CqMGJr7U.js";import{E as ae}from"./card-_e8Y2itV.js";import{E as le,a as oe}from"./form-item-D50nbGgb.js";import{a as se,E as ne}from"./button-CFFx6FdR.js";import{E as re}from"./date-picker-B7ehIGxn.js";import"./input-BsUoEHjr.js";import{i as E}from"./index-C3W-oE5n.js";import{E as ie}from"./index-i9SNigSW.js";import{E as z}from"./index-B4p_U5VT.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./event-D5_Wo8Xc.js";import"./isPlainObject-CnEW4LJ3.js";import"./_baseIteratee-DgY2c_zD.js";import"./isEqual-DlB8YXyV.js";import"./debounce-Bv_84CHO.js";import"./index-17xiCnpu.js";import"./_baseClone-BBryStzM.js";import"./index-BBjiecLk.js";const ue={class:"operational-report-page"},pe={class:"metric-trend"},me={class:"metric-trend"},fe={class:"metric-trend"},ce={class:"metric-trend"},ge=U({__name:"operational-report",setup(ve){const R=p([new Date(new Date().getTime()-6048e5),new Date]),w=p({totalCalls:1245680,activeUsers:3542,totalTokens:8967.5,revenue:456789.25}),N=p([{serviceName:"qwen-chat-api",calls:523456,successRate:99.2,avgLatency:1234,inputTokens:4567e4,outputTokens:12345e4,totalTokens:16912e4,cost:84560,revenue:169120,margin:50},{serviceName:"deepseek-inference",calls:412389,successRate:98.8,avgLatency:2156,inputTokens:3892e4,outputTokens:9876e4,totalTokens:13768e4,cost:68840,revenue:137680,margin:50},{serviceName:"glm-service",calls:309835,successRate:99.5,avgLatency:1567,inputTokens:2934e4,outputTokens:7456e4,totalTokens:1039e5,cost:51950,revenue:103900,margin:50}]),C=p(),S=p(),D=p(),L=p();let m=null,f=null,c=null,g=null;const x=v=>{const e=new Date;let i;switch(v){case"today":i=new Date(e.getFullYear(),e.getMonth(),e.getDate());break;case"week":i=new Date(e.getTime()-7*24*60*60*1e3);break;case"month":i=new Date(e.getFullYear(),e.getMonth(),1);break;case"quarter":const _=Math.floor(e.getMonth()/3);i=new Date(e.getFullYear(),_*3,1);break;default:i=new Date(e.getTime()-7*24*60*60*1e3)}R.value=[i,e],A()},A=()=>{z.success("数据已更新"),F()},q=()=>{z.success("运营报告导出功能（演示模式）- 已生成 Excel 文件")},F=async()=>{await G(),C.value&&(m=E(C.value),m.setOption({tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",top:"10%",containLabel:!0},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"API调用次数",type:"line",smooth:!0,data:[165420,178930,192340,188670,201450,215890,223680],itemStyle:{color:"#409eff"},areaStyle:{color:"rgba(64, 158, 255, 0.1)"}}]})),S.value&&(f=E(S.value),f.setOption({tooltip:{trigger:"axis"},legend:{data:["输入Tokens","输出Tokens"],top:"0%"},grid:{left:"3%",right:"4%",bottom:"3%",top:"12%",containLabel:!0},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",name:"百万tokens"},series:[{name:"输入Tokens",type:"bar",stack:"tokens",data:[345,367,389,378,402,425,438],itemStyle:{color:"#67c23a"}},{name:"输出Tokens",type:"bar",stack:"tokens",data:[876,923,982,956,1015,1078,1109],itemStyle:{color:"#409eff"}}]})),D.value&&(c=E(D.value),c.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"服务调用",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {d}%"},data:[{value:523456,name:"qwen-chat-api",itemStyle:{color:"#409eff"}},{value:412389,name:"deepseek-inference",itemStyle:{color:"#67c23a"}},{value:309835,name:"glm-service",itemStyle:{color:"#e6a23c"}}]}]})),L.value&&(g=E(L.value),g.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["成本","营收"],top:"0%"},grid:{left:"3%",right:"4%",bottom:"3%",top:"12%",containLabel:!0},xAxis:{type:"category",data:["qwen-chat-api","deepseek-inference","glm-service"]},yAxis:{type:"value",name:"金额(¥)"},series:[{name:"成本",type:"bar",data:[84560,68840,51950],itemStyle:{color:"#f56c6c"}},{name:"营收",type:"bar",data:[169120,137680,103900],itemStyle:{color:"#67c23a"}}]}))},V=v=>v>=50?"#67c23a":v>=30?"#e6a23c":"#f56c6c",B=()=>{m==null||m.resize(),f==null||f.resize(),c==null||c.resize(),g==null||g.resize()};return Y(()=>{F(),window.addEventListener("resize",B)}),(v,e)=>{const i=re,_=oe,y=ne,I=se,b=Q,O=le,n=ae,T=te,d=ee,M=Z,r=X,P=ie,$=K;return J(),j("div",ue,[t(n,{style:{"margin-bottom":"20px"}},{default:a(()=>[t(O,{inline:!0},{default:a(()=>[t(_,{label:"报告周期"},{default:a(()=>[t(i,{modelValue:R.value,"onUpdate:modelValue":e[0]||(e[0]=o=>R.value=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"350px"},onChange:A},null,8,["modelValue"])]),_:1}),t(_,null,{default:a(()=>[t(I,null,{default:a(()=>[t(y,{onClick:e[1]||(e[1]=o=>x("today"))},{default:a(()=>e[5]||(e[5]=[s("今日",-1)])),_:1,__:[5]}),t(y,{onClick:e[2]||(e[2]=o=>x("week"))},{default:a(()=>e[6]||(e[6]=[s("本周",-1)])),_:1,__:[6]}),t(y,{onClick:e[3]||(e[3]=o=>x("month"))},{default:a(()=>e[7]||(e[7]=[s("本月",-1)])),_:1,__:[7]}),t(y,{onClick:e[4]||(e[4]=o=>x("quarter"))},{default:a(()=>e[8]||(e[8]=[s("本季度",-1)])),_:1,__:[8]})]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(y,{type:"primary",onClick:q},{default:a(()=>[t(b,null,{default:a(()=>[t(k(W))]),_:1}),e[9]||(e[9]=s(" 导出报告 ",-1))]),_:1,__:[9]})]),_:1})]),_:1})]),_:1}),t(M,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[t(d,{span:6},{default:a(()=>[t(n,{shadow:"hover"},{default:a(()=>[t(T,{title:"总调用次数",value:w.value.totalCalls},{suffix:a(()=>e[10]||(e[10]=[s("次",-1)])),_:1},8,["value"]),l("div",pe,[t(b,{color:"#67c23a"},{default:a(()=>[t(k(h))]),_:1}),e[11]||(e[11]=l("span",{style:{color:"#67c23a"}},"+12.5%",-1)),e[12]||(e[12]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1}),t(d,{span:6},{default:a(()=>[t(n,{shadow:"hover"},{default:a(()=>[t(T,{title:"活跃用户数",value:w.value.activeUsers},{suffix:a(()=>e[13]||(e[13]=[s("人",-1)])),_:1},8,["value"]),l("div",me,[t(b,{color:"#67c23a"},{default:a(()=>[t(k(h))]),_:1}),e[14]||(e[14]=l("span",{style:{color:"#67c23a"}},"+8.3%",-1)),e[15]||(e[15]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1}),t(d,{span:6},{default:a(()=>[t(n,{shadow:"hover"},{default:a(()=>[t(T,{title:"总Token消耗",value:w.value.totalTokens},{suffix:a(()=>e[16]||(e[16]=[s("M",-1)])),_:1},8,["value"]),l("div",fe,[t(b,{color:"#67c23a"},{default:a(()=>[t(k(h))]),_:1}),e[17]||(e[17]=l("span",{style:{color:"#67c23a"}},"+18.7%",-1)),e[18]||(e[18]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1}),t(d,{span:6},{default:a(()=>[t(n,{shadow:"hover"},{default:a(()=>[t(T,{title:"营收金额",value:w.value.revenue,precision:2},{prefix:a(()=>e[19]||(e[19]=[s("¥",-1)])),_:1},8,["value"]),l("div",ce,[t(b,{color:"#67c23a"},{default:a(()=>[t(k(h))]),_:1}),e[20]||(e[20]=l("span",{style:{color:"#67c23a"}},"+15.2%",-1)),e[21]||(e[21]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1})]),_:1}),t(M,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(n,null,{header:a(()=>e[22]||(e[22]=[l("div",{class:"card-header"},[l("span",{class:"title"},"API调用趋势")],-1)])),default:a(()=>[l("div",{ref_key:"callTrendChartRef",ref:C,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(n,null,{header:a(()=>e[23]||(e[23]=[l("div",{class:"card-header"},[l("span",{class:"title"},"Token消耗趋势")],-1)])),default:a(()=>[l("div",{ref_key:"tokenTrendChartRef",ref:S,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),t(M,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(n,null,{header:a(()=>e[24]||(e[24]=[l("div",{class:"card-header"},[l("span",{class:"title"},"服务调用占比")],-1)])),default:a(()=>[l("div",{ref_key:"serviceDistChartRef",ref:D,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(n,null,{header:a(()=>e[25]||(e[25]=[l("div",{class:"card-header"},[l("span",{class:"title"},"成本分析")],-1)])),default:a(()=>[l("div",{ref_key:"costAnalysisChartRef",ref:L,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),t(n,null,{header:a(()=>e[26]||(e[26]=[l("div",{class:"card-header"},[l("span",{class:"title"},"服务详细统计")],-1)])),default:a(()=>[t($,{data:N.value,border:"",style:{width:"100%"}},{default:a(()=>[t(r,{prop:"serviceName",label:"服务名称",width:"200"}),t(r,{prop:"calls",label:"调用次数",width:"120",align:"right",sortable:""},{default:a(({row:o})=>[s(u(o.calls.toLocaleString()),1)]),_:1}),t(r,{prop:"successRate",label:"成功率",width:"100",align:"center",sortable:""},{default:a(({row:o})=>[t(P,{type:o.successRate>=99?"success":o.successRate>=95?"warning":"danger"},{default:a(()=>[s(u(o.successRate)+"% ",1)]),_:2},1032,["type"])]),_:1}),t(r,{prop:"avgLatency",label:"平均延迟(ms)",width:"130",align:"right",sortable:""}),t(r,{prop:"inputTokens",label:"输入Tokens",width:"130",align:"right",sortable:""},{default:a(({row:o})=>[s(u((o.inputTokens/1e6).toFixed(2))+"M ",1)]),_:1}),t(r,{prop:"outputTokens",label:"输出Tokens",width:"130",align:"right",sortable:""},{default:a(({row:o})=>[s(u((o.outputTokens/1e6).toFixed(2))+"M ",1)]),_:1}),t(r,{prop:"totalTokens",label:"总Tokens",width:"130",align:"right",sortable:""},{default:a(({row:o})=>[s(u((o.totalTokens/1e6).toFixed(2))+"M ",1)]),_:1}),t(r,{prop:"cost",label:"成本(¥)",width:"120",align:"right",sortable:""},{default:a(({row:o})=>[s(" ¥"+u(o.cost.toLocaleString()),1)]),_:1}),t(r,{prop:"revenue",label:"营收(¥)",width:"120",align:"right",sortable:""},{default:a(({row:o})=>[s(" ¥"+u(o.revenue.toLocaleString()),1)]),_:1}),t(r,{label:"毛利率",width:"100",align:"center"},{default:a(({row:o})=>[l("span",{style:H({color:V(o.margin)})},u(o.margin)+"%",5)]),_:1})]),_:1},8,["data"])]),_:1})])}}}),Pe=de(ge,[["__scopeId","data-v-85ac5e00"]]);export{Pe as default};
