import{d as U,r as p,h as Y,b as G,o as Q,f as t,w as a,a as s,E as W,C as v,b2 as j,e as l,bA as b,t as u,I as H,aE as J,_ as K}from"./index-C1LNxWrc.js";import{E as X,a as Z}from"./table-column-QOtjyKSd.js";import"./checkbox-D429Hkk4.js";import"./scrollbar-CWDB5A-B.js";/* empty css            */import{E as ee,a as te}from"./col-BHj47XkZ.js";import{E as ae}from"./statistic-D5rvesja.js";import{E as le}from"./card-bOHwtd_N.js";import{E as oe,a as se}from"./form-item-BZC8dQDK.js";import{a as re,E as ne}from"./button-CfgjJGa2.js";import{E as ie}from"./date-picker-Cnmdp5g_.js";import"./input-LGwqt1-Y.js";import{i as w}from"./index-C3W-oE5n.js";import{E as de}from"./index-gsKI2Iim.js";import{E as z}from"./index-JFsgmBjq.js";import"./index-DRLRXOGd.js";import"./_initCloneObject-T9RaIEd1.js";import"./isPlainObject-BS8VhLgB.js";import"./_baseIteratee-CNffayvf.js";import"./isEqual-CFwnnDW_.js";import"./debounce-C4p0xsPh.js";import"./use-form-common-props-dMO5F-Xy.js";import"./_baseClone-0EgoVDGI.js";import"./index-BYwYey8Q.js";import"./index-BPEUnmM4.js";const ue={class:"operational-report-page"},pe={class:"metric-trend"},me={class:"metric-trend"},fe={class:"metric-trend"},ce={class:"metric-trend"},ge=U({__name:"operational-report",setup(ve){const h=p([new Date(new Date().getTime()-6048e5),new Date]),_=p({totalCalls:1245680,activeUsers:3542,totalTokens:8967.5,revenue:456789.25}),N=p([{serviceName:"qwen-chat-api",calls:523456,successRate:99.2,avgLatency:1234,inputTokens:4567e4,outputTokens:12345e4,totalTokens:16912e4,cost:84560,revenue:169120,margin:50},{serviceName:"deepseek-inference",calls:412389,successRate:98.8,avgLatency:2156,inputTokens:3892e4,outputTokens:9876e4,totalTokens:13768e4,cost:68840,revenue:137680,margin:50},{serviceName:"glm-service",calls:309835,successRate:99.5,avgLatency:1567,inputTokens:2934e4,outputTokens:7456e4,totalTokens:1039e5,cost:51950,revenue:103900,margin:50}]),x=p(),T=p(),C=p(),E=p();let R=null,S=null,D=null,A=null;const y=m=>{const e=new Date;let i;switch(m){case"today":i=new Date(e.getFullYear(),e.getMonth(),e.getDate());break;case"week":i=new Date(e.getTime()-7*24*60*60*1e3);break;case"month":i=new Date(e.getFullYear(),e.getMonth(),1);break;case"quarter":const f=Math.floor(e.getMonth()/3);i=new Date(e.getFullYear(),f*3,1);break;default:i=new Date(e.getTime()-7*24*60*60*1e3)}h.value=[i,e],M()},M=()=>{z.success("数据已更新"),F()},q=()=>{z.success("运营报告导出功能（演示模式）- 已生成 Excel 文件")},F=async()=>{await J(),x.value&&(R=w(x.value),R.setOption({tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",top:"10%",containLabel:!0},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"API调用次数",type:"line",smooth:!0,data:[165420,178930,192340,188670,201450,215890,223680],itemStyle:{color:"#409eff"},areaStyle:{color:"rgba(64, 158, 255, 0.1)"}}]})),T.value&&(S=w(T.value),S.setOption({tooltip:{trigger:"axis"},legend:{data:["输入Tokens","输出Tokens"],top:"0%"},grid:{left:"3%",right:"4%",bottom:"3%",top:"12%",containLabel:!0},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",name:"百万tokens"},series:[{name:"输入Tokens",type:"bar",stack:"tokens",data:[345,367,389,378,402,425,438],itemStyle:{color:"#67c23a"}},{name:"输出Tokens",type:"bar",stack:"tokens",data:[876,923,982,956,1015,1078,1109],itemStyle:{color:"#409eff"}}]})),C.value&&(D=w(C.value),D.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"服务调用",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {d}%"},data:[{value:523456,name:"qwen-chat-api",itemStyle:{color:"#409eff"}},{value:412389,name:"deepseek-inference",itemStyle:{color:"#67c23a"}},{value:309835,name:"glm-service",itemStyle:{color:"#e6a23c"}}]}]})),E.value&&(A=w(E.value),A.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["成本","营收"],top:"0%"},grid:{left:"3%",right:"4%",bottom:"3%",top:"12%",containLabel:!0},xAxis:{type:"category",data:["qwen-chat-api","deepseek-inference","glm-service"]},yAxis:{type:"value",name:"金额(¥)"},series:[{name:"成本",type:"bar",data:[84560,68840,51950],itemStyle:{color:"#f56c6c"}},{name:"营收",type:"bar",data:[169120,137680,103900],itemStyle:{color:"#67c23a"}}]}))},I=m=>m>=50?"#67c23a":m>=30?"#e6a23c":"#f56c6c",V=()=>{R?.resize(),S?.resize(),D?.resize(),A?.resize()};return Y(()=>{F(),window.addEventListener("resize",V)}),(m,e)=>{const i=ie,f=se,c=ne,B=re,g=W,O=oe,r=le,k=ae,d=ee,L=te,n=Z,P=de,$=X;return Q(),G("div",ue,[t(r,{style:{"margin-bottom":"20px"}},{default:a(()=>[t(O,{inline:!0},{default:a(()=>[t(f,{label:"报告周期"},{default:a(()=>[t(i,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"350px"},onChange:M},null,8,["modelValue"])]),_:1}),t(f,null,{default:a(()=>[t(B,null,{default:a(()=>[t(c,{onClick:e[1]||(e[1]=o=>y("today"))},{default:a(()=>e[5]||(e[5]=[s("今日",-1)])),_:1,__:[5]}),t(c,{onClick:e[2]||(e[2]=o=>y("week"))},{default:a(()=>e[6]||(e[6]=[s("本周",-1)])),_:1,__:[6]}),t(c,{onClick:e[3]||(e[3]=o=>y("month"))},{default:a(()=>e[7]||(e[7]=[s("本月",-1)])),_:1,__:[7]}),t(c,{onClick:e[4]||(e[4]=o=>y("quarter"))},{default:a(()=>e[8]||(e[8]=[s("本季度",-1)])),_:1,__:[8]})]),_:1})]),_:1}),t(f,null,{default:a(()=>[t(c,{type:"primary",onClick:q},{default:a(()=>[t(g,null,{default:a(()=>[t(v(j))]),_:1}),e[9]||(e[9]=s(" 导出报告 ",-1))]),_:1,__:[9]})]),_:1})]),_:1})]),_:1}),t(L,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[t(d,{span:6},{default:a(()=>[t(r,{shadow:"hover"},{default:a(()=>[t(k,{title:"总调用次数",value:_.value.totalCalls},{suffix:a(()=>e[10]||(e[10]=[s("次",-1)])),_:1},8,["value"]),l("div",pe,[t(g,{color:"#67c23a"},{default:a(()=>[t(v(b))]),_:1}),e[11]||(e[11]=l("span",{style:{color:"#67c23a"}},"+12.5%",-1)),e[12]||(e[12]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1}),t(d,{span:6},{default:a(()=>[t(r,{shadow:"hover"},{default:a(()=>[t(k,{title:"活跃用户数",value:_.value.activeUsers},{suffix:a(()=>e[13]||(e[13]=[s("人",-1)])),_:1},8,["value"]),l("div",me,[t(g,{color:"#67c23a"},{default:a(()=>[t(v(b))]),_:1}),e[14]||(e[14]=l("span",{style:{color:"#67c23a"}},"+8.3%",-1)),e[15]||(e[15]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1}),t(d,{span:6},{default:a(()=>[t(r,{shadow:"hover"},{default:a(()=>[t(k,{title:"总Token消耗",value:_.value.totalTokens},{suffix:a(()=>e[16]||(e[16]=[s("M",-1)])),_:1},8,["value"]),l("div",fe,[t(g,{color:"#67c23a"},{default:a(()=>[t(v(b))]),_:1}),e[17]||(e[17]=l("span",{style:{color:"#67c23a"}},"+18.7%",-1)),e[18]||(e[18]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1}),t(d,{span:6},{default:a(()=>[t(r,{shadow:"hover"},{default:a(()=>[t(k,{title:"营收金额",value:_.value.revenue,precision:2},{prefix:a(()=>e[19]||(e[19]=[s("¥",-1)])),_:1},8,["value"]),l("div",ce,[t(g,{color:"#67c23a"},{default:a(()=>[t(v(b))]),_:1}),e[20]||(e[20]=l("span",{style:{color:"#67c23a"}},"+15.2%",-1)),e[21]||(e[21]=l("span",{style:{color:"#909399","margin-left":"4px"}},"较上周期",-1))])]),_:1})]),_:1})]),_:1}),t(L,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(r,null,{header:a(()=>e[22]||(e[22]=[l("div",{class:"card-header"},[l("span",{class:"title"},"API调用趋势")],-1)])),default:a(()=>[l("div",{ref_key:"callTrendChartRef",ref:x,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(r,null,{header:a(()=>e[23]||(e[23]=[l("div",{class:"card-header"},[l("span",{class:"title"},"Token消耗趋势")],-1)])),default:a(()=>[l("div",{ref_key:"tokenTrendChartRef",ref:T,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),t(L,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(r,null,{header:a(()=>e[24]||(e[24]=[l("div",{class:"card-header"},[l("span",{class:"title"},"服务调用占比")],-1)])),default:a(()=>[l("div",{ref_key:"serviceDistChartRef",ref:C,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(r,null,{header:a(()=>e[25]||(e[25]=[l("div",{class:"card-header"},[l("span",{class:"title"},"成本分析")],-1)])),default:a(()=>[l("div",{ref_key:"costAnalysisChartRef",ref:E,style:{width:"100%",height:"300px"}},null,512)]),_:1})]),_:1})]),_:1}),t(r,null,{header:a(()=>e[26]||(e[26]=[l("div",{class:"card-header"},[l("span",{class:"title"},"服务详细统计")],-1)])),default:a(()=>[t($,{data:N.value,border:"",style:{width:"100%"}},{default:a(()=>[t(n,{prop:"serviceName",label:"服务名称",width:"200"}),t(n,{prop:"calls",label:"调用次数",width:"120",align:"right",sortable:""},{default:a(({row:o})=>[s(u(o.calls.toLocaleString()),1)]),_:1}),t(n,{prop:"successRate",label:"成功率",width:"100",align:"center",sortable:""},{default:a(({row:o})=>[t(P,{type:o.successRate>=99?"success":o.successRate>=95?"warning":"danger"},{default:a(()=>[s(u(o.successRate)+"% ",1)]),_:2},1032,["type"])]),_:1}),t(n,{prop:"avgLatency",label:"平均延迟(ms)",width:"130",align:"right",sortable:""}),t(n,{prop:"inputTokens",label:"输入Tokens",width:"130",align:"right",sortable:""},{default:a(({row:o})=>[s(u((o.inputTokens/1e6).toFixed(2))+"M ",1)]),_:1}),t(n,{prop:"outputTokens",label:"输出Tokens",width:"130",align:"right",sortable:""},{default:a(({row:o})=>[s(u((o.outputTokens/1e6).toFixed(2))+"M ",1)]),_:1}),t(n,{prop:"totalTokens",label:"总Tokens",width:"130",align:"right",sortable:""},{default:a(({row:o})=>[s(u((o.totalTokens/1e6).toFixed(2))+"M ",1)]),_:1}),t(n,{prop:"cost",label:"成本(¥)",width:"120",align:"right",sortable:""},{default:a(({row:o})=>[s(" ¥"+u(o.cost.toLocaleString()),1)]),_:1}),t(n,{prop:"revenue",label:"营收(¥)",width:"120",align:"right",sortable:""},{default:a(({row:o})=>[s(" ¥"+u(o.revenue.toLocaleString()),1)]),_:1}),t(n,{label:"毛利率",width:"100",align:"center"},{default:a(({row:o})=>[l("span",{style:H({color:I(o.margin)})},u(o.margin)+"%",5)]),_:1})]),_:1},8,["data"])]),_:1})])}}}),$e=K(ge,[["__scopeId","data-v-85ac5e00"]]);export{$e as default};
