import{x as Et,as as wt,A as be,d as de,r as x,C as re,D as he,av as ee,j as Ue,aJ as et,m as L,o as S,w as c,F as Fe,L as tt,J as M,e as Te,ab as nt,aX as _t,a4 as at,bi as Ae,b9 as Dt,s as ye,v as Re,aa as xt,W as ke,at as lt,N as Kt,bj as It,bk as Ye,ag as ze,R as se,al as Je,a0 as me,bl as Se,bm as St,a6 as Z,aC as Be,aE as Ve,c as j,b as O,a as d,n as le,K as J,G as fe,H as pe,a_ as Tt,E as ot,bn as At,Y as q,bo as Rt,a8 as st,b3 as zt,b4 as G,p as ue,a9 as Bt,y as Ne,B as Vt,bp as $t,i as I,b7 as Ge,l as W,_ as Ot}from"./index-BX2sZVyW.js";import{E as Lt}from"./dialog-BbJ9SoMc.js";import{E as Ut,a as Ft}from"./radio-group-DyO9WxrE.js";/* empty css              */import{E as Pt,a as Mt}from"./col-DfCBUvxB.js";import{a as qt}from"./checkbox-B8dDd1Mj.js";import{a as jt,E as Ht}from"./card-B6phTZGW.js";import{E as Wt}from"./pagination-uLtAnqW5.js";/* empty css            */import{s as Yt,E as Jt,a as Gt}from"./select-9k77N6f3.js";import"./scrollbar-C9NSq6wy.js";import{E as Xt}from"./input-5aB7ALv6.js";import{a as Qt,E as Zt}from"./table-column-DG__lvqo.js";import{E as en,a as tn}from"./form-item-BCUJoI1X.js";import{E as nn}from"./button-Cn9gqGCu.js";import{E as an}from"./index-BFcHm1-Q.js";import{i as ln}from"./isEqual-ohjdCfDM.js";import{E as Xe}from"./index-zMVneW1z.js";import"./event-BORzi4vc.js";import"./scroll-g5r06U3K.js";import"./index-PwB6y63X.js";import"./strings-JcT2fde-.js";import"./debounce-DYp1oJWc.js";import"./isPlainObject-jZyBOBeK.js";import"./_baseClone-BOpOh07B.js";import"./validator-B2Ub6XB3.js";const on=Et({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:wt,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),sn=de({name:"ElText"}),dn=de({...sn,props:on,setup(t){const e=t,n=x(),l=jt(),a=re("text"),o=he(()=>[a.b(),a.m(e.type),a.m(l.value),a.is("truncated",e.truncated),a.is("line-clamp",!ee(e.lineClamp))]),r=()=>{var p,f,N,i,v,C,k;if(_t().title)return;let b=!1;const D=((p=n.value)==null?void 0:p.textContent)||"";if(e.truncated){const E=(f=n.value)==null?void 0:f.offsetWidth,K=(N=n.value)==null?void 0:N.scrollWidth;E&&K&&K>E&&(b=!0)}else if(!ee(e.lineClamp)){const E=(i=n.value)==null?void 0:i.offsetHeight,K=(v=n.value)==null?void 0:v.scrollHeight;E&&K&&K>E&&(b=!0)}b?(C=n.value)==null||C.setAttribute("title",D):(k=n.value)==null||k.removeAttribute("title")};return Ue(r),et(r),(p,f)=>(S(),L(nt(p.tag),{ref_key:"textRef",ref:n,class:M(Te(o)),style:tt({"-webkit-line-clamp":p.lineClamp})},{default:c(()=>[Fe(p.$slots,"default")]),_:3},8,["class","style"]))}});var rn=be(dn,[["__file","text.vue"]]);const un=at(rn),oe="$treeNodeId",Qe=function(t,e){!e||e[oe]||Object.defineProperty(e,oe,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Pe=(t,e)=>e==null?void 0:e[t||oe],$e=(t,e,n)=>{const l=t.value.currentNode;n();const a=t.value.currentNode;l!==a&&e("current-change",a?a.data:null,a)},Oe=t=>{let e=!0,n=!0,l=!0;for(let a=0,o=t.length;a<o;a++){const r=t[a];(r.checked!==!0||r.indeterminate)&&(e=!1,r.disabled||(l=!1)),(r.checked!==!1||r.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:l,half:!e&&!n}},ce=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:l}=Oe(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):l?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const a=t.parent;!a||a.level===0||t.store.checkStrictly||ce(a)},Ce=function(t,e){const n=t.store.props,l=t.data||{},a=n[e];if(ke(a))return a(l,t);if(lt(a))return l[a];if(ee(a)){const o=l[e];return ee(o)?"":o}},Le=function(t,e){t.forEach(n=>{n.canFocus=e,Le(n.childNodes,e)})};let cn=0;class te{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=cn++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Ae(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const l=n.props;if(l&&typeof l.isLeaf<"u"){const r=Ce(this,"isLeaf");Dt(r)&&(this.isLeafByUser=r)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),ye(this.data)||Qe(this,this.data),!this.data)return;const a=n.defaultExpandedKeys,o=n.key;o&&!Re(this.key)&&a&&a.includes(this.key)&&this.expand(null,n.autoExpandParent),o&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((e=this.parent)==null?void 0:e.expanded)===!0)&&(this.canFocus=!0)}setData(e){ye(e)||Qe(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&ye(this.data)?n=this.data:n=Ce(this,"children")||[];for(let l=0,a=n.length;l<a;l++)this.insertChild({data:n[l]})}get label(){return Ce(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Ce(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(l=>l===e||n&&l.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,l){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof te)){if(!l){const a=this.getChildren(!0);a!=null&&a.includes(e.data)||(ee(n)||n<0?a==null||a.push(e.data):a==null||a.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=xt(new te(e)),e instanceof te&&e.initialize()}e.level=this.level+1,ee(n)||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let l;n&&(l=this.childNodes.indexOf(n)),this.insertChild(e,l)}insertAfter(e,n){let l;n&&(l=this.childNodes.indexOf(n),l!==-1&&(l+=1)),this.insertChild(e,l)}removeChild(e){const n=this.getChildren()||[],l=n.indexOf(e.data);l>-1&&n.splice(l,1);const a=this.childNodes.indexOf(e);a>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(a,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let l=0;l<this.childNodes.length;l++)if(this.childNodes[l].data===e){n=this.childNodes[l];break}n&&this.removeChild(n)}expand(e,n){const l=()=>{if(n){let a=this.parent;for(;a&&a.level>0;)a.expanded=!0,a=a.parent}this.expanded=!0,e&&e(),Le(this.childNodes,!0)};this.shouldLoadData()?this.loadData(a=>{ye(a)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||ce(this),l())}):l()}doCreateChildren(e,n={}){e.forEach(l=>{this.insertChild(Object.assign({data:l},n),void 0,!0)})}collapse(){this.expanded=!1,Le(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,l,a){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:r,allWithoutDisable:p}=Oe(this.childNodes);!this.isLeaf&&!r&&p&&(this.checked=!1,e=!1);const f=()=>{if(n){const N=this.childNodes;for(let C=0,k=N.length;C<k;C++){const y=N[C];a=a||e!==!1;const b=y.disabled?y.checked:a;y.setChecked(b,n,!0,a)}const{half:i,all:v}=Oe(N);v||(this.checked=v,this.indeterminate=i)}};if(this.shouldLoadData()){this.loadData(()=>{f(),ce(this)},{checked:e!==!1});return}else f()}const o=this.parent;!o||o.level===0||l||ce(o)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const l=this.store.props;let a="children";return l&&(a=l.children||"children"),ee(n[a])&&(n[a]=null),e&&!n[a]&&(n[a]=[]),n[a]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(o=>o.data),l={},a=[];e.forEach((o,r)=>{const p=o[oe];!!p&&n.findIndex(N=>(N==null?void 0:N[oe])===p)>=0?l[p]={index:r,data:o}:a.push({index:r,data:o})}),this.store.lazy||n.forEach(o=>{l[o==null?void 0:o[oe]]||this.removeChildByData(o)}),a.forEach(({index:o,data:r})=>{this.insertChild({data:r},o)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const l=o=>{this.childNodes=[],this.doCreateChildren(o,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,o)},a=()=>{this.loading=!1};this.store.load(this,l,a)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const l=n.shift();n.unshift(...l.childNodes),e(l)}}reInitChecked(){this.store.checkStrictly||ce(this)}}class hn{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in e)Ae(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new te({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},Kt)}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,l=this.lazy,a=async function(o){const r=o.root?o.root.childNodes:o.childNodes;for(const[p,f]of r.entries())f.visible=!!(n!=null&&n.call(f,e,f.data,f)),p%80===0&&p>0&&await ze(),await a(f);if(!o.visible&&r.length){let p=!0;p=!r.some(f=>f.visible),o.root?o.root.visible=p===!1:o.visible=p===!1}e&&o.visible&&!o.isLeaf&&(!l||o.loaded)&&o.expand()};a(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof te)return e;const n=It(e)?Pe(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){var l;const a=this.getNode(n);(l=a.parent)==null||l.insertBefore({data:e},a)}insertAfter(e,n){var l;const a=this.getNode(n);(l=a.parent)==null||l.insertAfter({data:e},a)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const l=Ye(n)?this.root:this.getNode(n);l&&l.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(l=>{const a=n[l];a&&a.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const n=this.defaultCheckedKeys||[];!Re(e.key)&&n.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;if(!(!e||!e.data))if(!n)this.nodesMap[e.id]=e;else{const l=e.key;Re(l)||(this.nodesMap[l]=e)}}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(l=>{this.deregisterNode(l)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const l=[],a=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(p=>{(p.checked||n&&p.indeterminate)&&(!e||e&&p.isLeaf)&&l.push(p.data),a(p)})};return a(this),l}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),n(o)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const l in n)Ae(n,l)&&e.push(n[l]);return e}updateChildren(e,n){const l=this.nodesMap[e];if(!l)return;const a=l.childNodes;for(let o=a.length-1;o>=0;o--){const r=a[o];this.remove(r.data)}for(let o=0,r=n.length;o<r;o++){const p=n[o];this.append(p,l.data)}}_setCheckedKeys(e,n=!1,l){const a=this._getAllNodes().sort((f,N)=>f.level-N.level),o=Object.create(null),r=Object.keys(l);a.forEach(f=>f.setChecked(!1,!1));const p=f=>{f.childNodes.forEach(N=>{var i;o[N.data[e]]=!0,(i=N.childNodes)!=null&&i.length&&p(N)})};for(let f=0,N=a.length;f<N;f++){const i=a[f],v=i.data[e].toString();if(!r.includes(v)){i.checked&&!o[v]&&i.setChecked(!1,!1);continue}if(i.childNodes.length&&p(i),i.isLeaf||this.checkStrictly){i.setChecked(!0,!1);continue}if(i.setChecked(!0,!0),n){i.setChecked(!1,!1);const k=function(y){y.childNodes.forEach(D=>{D.isLeaf||D.setChecked(!1,!1),k(D)})};k(i)}}}setCheckedNodes(e,n=!1){const l=this.key,a={};e.forEach(o=>{a[(o||{})[l]]=!0}),this._setCheckedKeys(l,n,a)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const l=this.key,a={};e.forEach(o=>{a[o]=!0}),this._setCheckedKeys(l,n,a)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const l=this.getNode(n);l&&l.expand(null,this.autoExpandParent)})}setChecked(e,n,l){const a=this.getNode(e);a&&a.setChecked(!!n,l)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){var l;const a=e[this.key],o=this.nodesMap[a];this.setCurrentNode(o),n&&this.currentNode&&this.currentNode.level>1&&((l=this.currentNode.parent)==null||l.expand(null,!0))}setCurrentNodeKey(e,n=!0){var l;if(this.currentNodeKey=e,Ye(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const a=this.getNode(e);a&&(this.setCurrentNode(a),n&&this.currentNode&&this.currentNode.level>1&&((l=this.currentNode.parent)==null||l.expand(null,!0)))}}const Me="RootTree",dt="NodeInstance",Ze="TreeNodeMap",fn=de({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=re("tree"),n=se(dt),l=se(Me);return()=>{const a=t.node,{data:o,store:r}=a;return t.renderContent?t.renderContent(Je,{_self:n,node:a,data:o,store:r}):Fe(l.ctx.slots,"default",{node:a,data:o},()=>[Je(un,{tag:"span",truncated:!0,class:e.be("node","label")},()=>[a.label])])}}});var pn=be(fn,[["__file","tree-node-content.vue"]]);function rt(t){const e=se(Ze,null),n={treeNodeExpand:l=>{var a;t.node!==l&&((a=t.node)==null||a.collapse())},children:[]};return e&&e.children.push(n),me(Ze,n),{broadcastExpanded:l=>{if(t.accordion)for(const a of n.children)a.treeNodeExpand(l)}}}const it=Symbol("dragEvents");function mn({props:t,ctx:e,el$:n,dropIndicator$:l,store:a}){const o=re("tree"),r=x({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return me(it,{treeNodeDragStart:({event:i,treeNode:v})=>{if(i.dataTransfer){if(ke(t.allowDrag)&&!t.allowDrag(v.node))return i.preventDefault(),!1;i.dataTransfer.effectAllowed="move";try{i.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=v,e.emit("node-drag-start",v.node,i)}},treeNodeDragOver:({event:i,treeNode:v})=>{if(!i.dataTransfer)return;const C=v,k=r.value.dropNode;k&&k.node.id!==C.node.id&&Se(k.$el,o.is("drop-inner"));const y=r.value.draggingNode;if(!y||!C)return;let b=!0,D=!0,E=!0,K=!0;ke(t.allowDrop)&&(b=t.allowDrop(y.node,C.node,"prev"),K=D=t.allowDrop(y.node,C.node,"inner"),E=t.allowDrop(y.node,C.node,"next")),i.dataTransfer.dropEffect=D||b||E?"move":"none",(b||D||E)&&(k==null?void 0:k.node.id)!==C.node.id&&(k&&e.emit("node-drag-leave",y.node,k.node,i),e.emit("node-drag-enter",y.node,C.node,i)),b||D||E?r.value.dropNode=C:r.value.dropNode=null,C.node.nextSibling===y.node&&(E=!1),C.node.previousSibling===y.node&&(b=!1),C.node.contains(y.node,!1)&&(D=!1),(y.node===C.node||y.node.contains(C.node))&&(b=!1,D=!1,E=!1);const V=C.$el,$=V.querySelector(`.${o.be("node","content")}`).getBoundingClientRect(),Y=n.value.getBoundingClientRect();let R;const ne=b?D?.25:E?.45:1:-1,ae=E?D?.75:b?.55:0:1;let g=-9999;const w=i.clientY-$.top;w<$.height*ne?R="before":w>$.height*ae?R="after":D?R="inner":R="none";const A=V.querySelector(`.${o.be("node","expand-icon")}`).getBoundingClientRect(),U=l.value;R==="before"?g=A.top-Y.top:R==="after"&&(g=A.bottom-Y.top),U.style.top=`${g}px`,U.style.left=`${A.right-Y.left}px`,R==="inner"?St(V,o.is("drop-inner")):Se(V,o.is("drop-inner")),r.value.showDropIndicator=R==="before"||R==="after",r.value.allowDrop=r.value.showDropIndicator||K,r.value.dropType=R,e.emit("node-drag-over",y.node,C.node,i)},treeNodeDragEnd:i=>{var v,C;const{draggingNode:k,dropType:y,dropNode:b}=r.value;if(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="move"),k!=null&&k.node.data&&b){const D={data:k.node.data};y!=="none"&&k.node.remove(),y==="before"?(v=b.node.parent)==null||v.insertBefore(D,b.node):y==="after"?(C=b.node.parent)==null||C.insertAfter(D,b.node):y==="inner"&&b.node.insertChild(D),y!=="none"&&(a.value.registerNode(D),a.value.key&&k.node.eachNode(E=>{var K;(K=a.value.nodesMap[E.data[a.value.key]])==null||K.setChecked(E.checked,!a.value.checkStrictly)})),Se(b.$el,o.is("drop-inner")),e.emit("node-drag-end",k.node,b.node,y,i),y!=="none"&&e.emit("node-drop",k.node,b.node,y,i)}k&&!b&&e.emit("node-drag-end",k.node,null,y,i),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const vn=de({name:"ElTreeNode",components:{ElCollapseTransition:At,ElCheckbox:qt,NodeContent:pn,ElIcon:ot,Loading:Tt},props:{node:{type:te,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(t,e){const n=re("tree"),{broadcastExpanded:l}=rt(t),a=se(Me),o=x(!1),r=x(!1),p=x(),f=x(),N=x(),i=se(it),v=st();me(dt,v),t.node.expanded&&(o.value=!0,r.value=!0);const C=a.props.props.children||"children";q(()=>{var g;const w=(g=t.node.data)==null?void 0:g[C];return w&&[...w]},()=>{t.node.updateChildren()}),q(()=>t.node.indeterminate,g=>{b(t.node.checked,g)}),q(()=>t.node.checked,g=>{b(g,t.node.indeterminate)}),q(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),q(()=>t.node.expanded,g=>{ze(()=>o.value=g),g&&(r.value=!0)});const k=g=>Pe(a.props.nodeKey,g.data),y=g=>{const w=t.props.class;if(!w)return{};let A;if(ke(w)){const{data:U}=g;A=w(U,g)}else A=w;return lt(A)?{[A]:!0}:A},b=(g,w)=>{(p.value!==g||f.value!==w)&&a.ctx.emit("check-change",t.node.data,g,w),p.value=g,f.value=w},D=g=>{$e(a.store,a.ctx.emit,()=>{var w;if((w=a==null?void 0:a.props)==null?void 0:w.nodeKey){const U=k(t.node);a.store.value.setCurrentNodeKey(U)}else a.store.value.setCurrentNode(t.node)}),a.currentNode.value=t.node,a.props.expandOnClickNode&&K(),(a.props.checkOnClickNode||t.node.isLeaf&&a.props.checkOnClickLeaf&&t.showCheckbox)&&!t.node.disabled&&V(!t.node.checked),a.ctx.emit("node-click",t.node.data,t.node,v,g)},E=g=>{var w;(w=a.instance.vnode.props)!=null&&w.onNodeContextmenu&&(g.stopPropagation(),g.preventDefault()),a.ctx.emit("node-contextmenu",g,t.node.data,t.node,v)},K=()=>{t.node.isLeaf||(o.value?(a.ctx.emit("node-collapse",t.node.data,t.node,v),t.node.collapse()):t.node.expand(()=>{e.emit("node-expand",t.node.data,t.node,v)}))},V=g=>{t.node.setChecked(g,!(a!=null&&a.props.checkStrictly)),ze(()=>{const w=a.store.value;a.ctx.emit("check",t.node.data,{checkedNodes:w.getCheckedNodes(),checkedKeys:w.getCheckedKeys(),halfCheckedNodes:w.getHalfCheckedNodes(),halfCheckedKeys:w.getHalfCheckedKeys()})})};return{ns:n,node$:N,tree:a,expanded:o,childNodeRendered:r,oldChecked:p,oldIndeterminate:f,getNodeKey:k,getNodeClass:y,handleSelectChange:b,handleClick:D,handleContextMenu:E,handleExpandIconClick:K,handleCheckChange:V,handleChildNodeExpand:(g,w,A)=>{l(w),a.ctx.emit("node-expand",g,w,A)},handleDragStart:g=>{a.props.draggable&&i.treeNodeDragStart({event:g,treeNode:t})},handleDragOver:g=>{g.preventDefault(),a.props.draggable&&i.treeNodeDragOver({event:g,treeNode:{$el:N.value,node:t.node}})},handleDrop:g=>{g.preventDefault()},handleDragEnd:g=>{a.props.draggable&&i.treeNodeDragEnd(g)},CaretRight:Rt}}});function gn(t,e,n,l,a,o){const r=Z("el-icon"),p=Z("el-checkbox"),f=Z("loading"),N=Z("node-content"),i=Z("el-tree-node"),v=Z("el-collapse-transition");return Be((S(),j("div",{ref:"node$",class:M([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:J(t.handleClick,["stop"]),onContextmenu:t.handleContextMenu,onDragstart:J(t.handleDragStart,["stop"]),onDragover:J(t.handleDragOver,["stop"]),onDragend:J(t.handleDragEnd,["stop"]),onDrop:J(t.handleDrop,["stop"])},[O("div",{class:M(t.ns.be("node","content")),style:tt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(S(),L(r,{key:0,class:M([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:J(t.handleExpandIconClick,["stop"])},{default:c(()=>[(S(),L(nt(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):le("v-if",!0),t.showCheckbox?(S(),L(p,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:J(()=>{},["stop"]),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):le("v-if",!0),t.node.loading?(S(),L(r,{key:2,class:M([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:c(()=>[d(f)]),_:1},8,["class"])):le("v-if",!0),d(N,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),d(v,null,{default:c(()=>[!t.renderAfterExpand||t.childNodeRendered?Be((S(),j("div",{key:0,class:M(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded,onClick:J(()=>{},["stop"])},[(S(!0),j(fe,null,pe(t.node.childNodes,C=>(S(),L(i,{key:t.getNodeKey(C),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:C,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Ve,t.expanded]]):le("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ve,t.node.visible]])}var yn=be(vn,[["render",gn],["__file","tree-node.vue"]]);function Nn({el$:t},e){const n=re("tree");Ue(()=>{o()}),et(()=>{Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(p=>{p.setAttribute("tabindex","-1")})});function l(r,p){var f,N;const i=e.value.getNode(r[p].dataset.key);return i.canFocus&&i.visible&&(((f=i.parent)==null?void 0:f.expanded)||((N=i.parent)==null?void 0:N.level)===0)}zt(t,"keydown",r=>{const p=r.target;if(!p.className.includes(n.b("node")))return;const f=r.code,N=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),i=N.indexOf(p);let v;if([G.up,G.down].includes(f)){if(r.preventDefault(),f===G.up){v=i===-1?0:i!==0?i-1:N.length-1;const k=v;for(;!l(N,v);){if(v--,v===k){v=-1;break}v<0&&(v=N.length-1)}}else{v=i===-1?0:i<N.length-1?i+1:0;const k=v;for(;!l(N,v);){if(v++,v===k){v=-1;break}v>=N.length&&(v=0)}}v!==-1&&N[v].focus()}[G.left,G.right].includes(f)&&(r.preventDefault(),p.click());const C=p.querySelector('[type="checkbox"]');[G.enter,G.numpadEnter,G.space].includes(f)&&C&&(r.preventDefault(),C.click())});const o=()=>{var r;if(!t.value)return;const p=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(i=>{i.setAttribute("tabindex","-1")});const N=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(N.length){N[0].setAttribute("tabindex","0");return}(r=p[0])==null||r.setAttribute("tabindex","0")}}const Cn=de({name:"ElTree",components:{ElTreeNode:yn},props:{data:{type:Ne(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:Ne(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:Ne(Function)},allowDrop:{type:Ne(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Bt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Vt(),l=re("tree"),a=se(Yt,null),o=x(new hn({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));o.value.initialize();const r=x(o.value.root),p=x(null),f=x(null),N=x(null),{broadcastExpanded:i}=rt(t),{dragState:v}=mn({props:t,ctx:e,el$:f,dropIndicator$:N,store:o});Nn({el$:f},o);const C=he(()=>{const{childNodes:m}=r.value,_=a?a.hasFilteredOptions!==0:!1;return(!m||m.length===0||m.every(({visible:F})=>!F))&&!_});q(()=>t.currentNodeKey,m=>{o.value.setCurrentNodeKey(m??null)}),q(()=>t.defaultCheckedKeys,(m,_)=>{ln(m,_)||o.value.setDefaultCheckedKey(m??[])}),q(()=>t.defaultExpandedKeys,m=>{o.value.setDefaultExpandedKeys(m??[])}),q(()=>t.data,m=>{o.value.setData(m)},{deep:!0}),q(()=>t.checkStrictly,m=>{o.value.checkStrictly=m});const k=m=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(m)},y=m=>Pe(t.nodeKey,m.data),b=m=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const _=o.value.getNode(m);if(!_)return[];const F=[_.data];let X=_.parent;for(;X&&X!==r.value;)F.push(X.data),X=X.parent;return F.reverse()},D=(m,_)=>o.value.getCheckedNodes(m,_),E=m=>o.value.getCheckedKeys(m),K=()=>{const m=o.value.getCurrentNode();return m?m.data:null},V=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const m=K();return m?m[t.nodeKey]:null},$=(m,_)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");o.value.setCheckedNodes(m,_)},Y=(m,_)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");o.value.setCheckedKeys(m,_)},R=(m,_,F)=>{o.value.setChecked(m,_,F)},ne=()=>o.value.getHalfCheckedNodes(),ae=()=>o.value.getHalfCheckedKeys(),g=(m,_=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");$e(o,e.emit,()=>{i(m),o.value.setUserCurrentNode(m,_)})},w=(m,_=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");$e(o,e.emit,()=>{i(),o.value.setCurrentNodeKey(m??null,_)})},A=m=>o.value.getNode(m),U=m=>{o.value.remove(m)},Ee=(m,_)=>{o.value.append(m,_)},we=(m,_)=>{o.value.insertBefore(m,_)},_e=(m,_)=>{o.value.insertAfter(m,_)},De=(m,_,F)=>{i(_),e.emit("node-expand",m,_,F)},xe=(m,_)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");o.value.updateChildren(m,_)};return me(Me,{ctx:e,props:t,store:o,root:r,currentNode:p,instance:st()}),me($t,void 0),{ns:l,store:o,root:r,currentNode:p,dragState:v,el$:f,dropIndicator$:N,isEmpty:C,filter:k,getNodeKey:y,getNodePath:b,getCheckedNodes:D,getCheckedKeys:E,getCurrentNode:K,getCurrentKey:V,setCheckedNodes:$,setCheckedKeys:Y,setChecked:R,getHalfCheckedNodes:ne,getHalfCheckedKeys:ae,setCurrentNode:g,setCurrentKey:w,t:n,getNode:A,remove:U,append:Ee,insertBefore:we,insertAfter:_e,handleNodeExpand:De,updateKeyChildren:xe}}});function kn(t,e,n,l,a,o){const r=Z("el-tree-node");return S(),j("div",{ref:"el$",class:M([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(S(!0),j(fe,null,pe(t.root.childNodes,p=>(S(),L(r,{key:t.getNodeKey(p),node:p,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(S(),j("div",{key:0,class:M(t.ns.e("empty-block"))},[Fe(t.$slots,"empty",{},()=>{var p;return[O("span",{class:M(t.ns.e("empty-text"))},ue((p=t.emptyText)!=null?p:t.t("el.tree.emptyText")),3)]})],2)):le("v-if",!0),Be(O("div",{ref:"dropIndicator$",class:M(t.ns.e("drop-indicator"))},null,2),[[Ve,t.dragState.showDropIndicator]])],2)}var bn=be(Cn,[["render",kn],["__file","tree.vue"]]);const En=at(bn),wn={class:"user-role-page"},_n={class:"card-header"},Dn={class:"pagination"},xn={class:"card-header"},Kn={class:"card-header"},In={class:"title"},Sn={style:{"margin-top":"16px","text-align":"right"}},Tn=de({__name:"user-role",setup(t){const e=x([]),n=x({userName:"",roleId:"",status:""}),l=x(1),a=x(10),o=x(!1),r=x("create"),p=x(),f=x({userId:"",userName:"",email:"",roleId:"",status:"active"}),N={userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}]},i=x([]),v=x(!1),C=x("create"),k=x(),y=x({id:"",name:"",description:""}),b={name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},D=x(!1),E=x({userId:"",userName:"",currentRoleName:"",newRoleId:""}),K=x(null),V=x(),$=x({}),Y=[{id:"model",label:"模型管理",children:[{id:"model.view",label:"查看模型"},{id:"model.deploy",label:"部署模型"},{id:"model.delete",label:"删除模型"}]},{id:"dataset",label:"数据集管理",children:[{id:"dataset.view",label:"查看数据集"},{id:"dataset.create",label:"创建数据集"},{id:"dataset.edit",label:"编辑数据集"},{id:"dataset.delete",label:"删除数据集"}]},{id:"finetune",label:"模型微调",children:[{id:"finetune.view",label:"查看任务"},{id:"finetune.create",label:"创建任务"},{id:"finetune.stop",label:"停止任务"}]},{id:"resource",label:"资源管理",children:[{id:"resource.view",label:"查看资源"},{id:"resource.allocate",label:"分配资源"},{id:"resource.release",label:"释放资源"}]},{id:"user",label:"用户管理",children:[{id:"user.view",label:"查看用户"},{id:"user.create",label:"创建用户"},{id:"user.edit",label:"编辑用户"},{id:"user.delete",label:"删除用户"}]}],R=he(()=>K.value?$.value[K.value.id]||[]:[]),ne=()=>{const u=[{id:"role-admin",name:"系统管理员",description:"拥有系统所有权限",userCount:2,isSystem:!0},{id:"role-developer",name:"开发者",description:"可以部署模型、创建微调任务",userCount:15,isSystem:!1},{id:"role-operator",name:"运维人员",description:"负责资源管理和监控",userCount:5,isSystem:!1},{id:"role-viewer",name:"访客",description:"只有查看权限",userCount:20,isSystem:!1}],s=[{userId:"user-001",userName:"管理员",email:"admin@example.com",roleId:"role-admin",roleName:"系统管理员",status:"active",createdAt:"2024-01-10 10:00:00"},{userId:"user-002",userName:"张三",email:"zhangsan@example.com",roleId:"role-developer",roleName:"开发者",status:"active",createdAt:"2024-02-15 09:30:00"},{userId:"user-003",userName:"李四",email:"lisi@example.com",roleId:"role-developer",roleName:"开发者",status:"active",createdAt:"2024-03-20 14:20:00"},{userId:"user-004",userName:"王五",email:"wangwu@example.com",roleId:"role-operator",roleName:"运维人员",status:"active",createdAt:"2024-04-12 11:15:00"},{userId:"user-005",userName:"赵六",email:"zhaoliu@example.com",roleId:"role-viewer",roleName:"访客",status:"active",createdAt:"2024-05-08 16:45:00"},{userId:"user-006",userName:"钱七",email:"qianqi@example.com",roleId:"role-viewer",roleName:"访客",status:"disabled",createdAt:"2024-06-01 10:20:00"}],z={"role-admin":["model.view","model.deploy","model.delete","dataset.view","dataset.create","dataset.edit","dataset.delete","finetune.view","finetune.create","finetune.stop","resource.view","resource.allocate","resource.release","user.view","user.create","user.edit","user.delete"],"role-developer":["model.view","model.deploy","dataset.view","dataset.create","finetune.view","finetune.create","finetune.stop","resource.view"],"role-operator":["model.view","dataset.view","resource.view","resource.allocate","resource.release"],"role-viewer":["model.view","dataset.view","finetune.view","resource.view"]};i.value=u,e.value=s,$.value=z},ae=()=>{ne()},g=he(()=>{let u=e.value;return n.value.userName&&(u=u.filter(s=>s.userName.toLowerCase().includes(n.value.userName.toLowerCase()))),n.value.roleId&&(u=u.filter(s=>s.roleId===n.value.roleId)),n.value.status&&(u=u.filter(s=>s.status===n.value.status)),u}),w=he(()=>{const u=(l.value-1)*a.value,s=u+a.value;return g.value.slice(u,s)}),A=()=>{l.value=1},U=()=>{n.value={userName:"",roleId:"",status:""},l.value=1},Ee=()=>{r.value="create",o.value=!0},we=u=>{r.value="edit",f.value={userId:u.userId,userName:u.userName,email:u.email,roleId:u.roleId,status:u.status},o.value=!0},_e=u=>{E.value={userId:u.userId,userName:u.userName,currentRoleName:u.roleName,newRoleId:u.roleId},D.value=!0},De=()=>{const u=e.value.findIndex(s=>s.userId===E.value.userId);if(u>-1){const s=i.value.find(z=>z.id===E.value.newRoleId);s&&(e.value[u].roleId=s.id,e.value[u].roleName=s.name,W.success("角色分配成功"),D.value=!1)}},xe=u=>{const s=u.status==="active"?"禁用":"启用";Xe.confirm(`确定要${s}用户"${u.userName}"吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u.status=u.status==="active"?"disabled":"active",W.success(`${s}成功`)})},m=async()=>{await p.value.validate();const u=i.value.find(s=>s.id===f.value.roleId);if(r.value==="create"){const s={...f.value,userId:`user-${Date.now()}`,roleName:(u==null?void 0:u.name)||"",createdAt:new Date().toLocaleString("zh-CN")};e.value.unshift(s),u&&u.userCount++,W.success("添加用户成功")}else{const s=e.value.findIndex(z=>z.userId===f.value.userId);if(s>-1){const z=e.value[s].roleId;if(e.value[s]={...e.value[s],...f.value,roleName:(u==null?void 0:u.name)||""},z!==f.value.roleId){const T=i.value.find(H=>H.id===z);T&&T.userCount--,u&&u.userCount++}W.success("更新用户成功")}}o.value=!1},_=()=>{var u;(u=p.value)==null||u.resetFields(),f.value={userId:"",userName:"",email:"",roleId:"",status:"active"}},F=()=>{C.value="create",v.value=!0},X=u=>{C.value="edit",y.value={id:u.id,name:u.name,description:u.description},v.value=!0},ut=u=>{if(u.userCount>0){W.warning("该角色下还有用户,无法删除");return}Xe.confirm(`确定要删除角色"${u.name}"吗? 此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const s=i.value.findIndex(z=>z.id===u.id);s>-1&&(i.value.splice(s,1),W.success("删除成功"))})},ct=async()=>{if(await k.value.validate(),C.value==="create"){const u={...y.value,id:`role-${Date.now()}`,userCount:0,isSystem:!1};i.value.push(u),$.value[u.id]=[],W.success("创建角色成功")}else{const u=i.value.findIndex(s=>s.id===y.value.id);u>-1&&(i.value[u]={...i.value[u],...y.value},W.success("更新角色成功"))}v.value=!1},ht=()=>{var u;(u=k.value)==null||u.resetFields(),y.value={id:"",name:"",description:""}},ft=u=>{K.value=u},pt=()=>{},mt=()=>{if(!K.value)return;const u=V.value.getCheckedKeys();$.value[K.value.id]=u,W.success("权限保存成功")},vt=u=>u==="role-admin"?"danger":u==="role-developer"?"success":u==="role-operator"?"warning":"info",gt=u=>{a.value=u,l.value=1},yt=u=>{l.value=u};return Ue(()=>{ae()}),(u,s)=>{const z=ot,T=nn,H=Xt,B=tn,Q=Gt,ve=Jt,ge=en,P=Zt,qe=an,je=Qt,Nt=Wt,Ke=Ht,He=Mt,Ct=En,kt=Pt,We=Ft,bt=Ut,Ie=Lt;return S(),j("div",wn,[d(kt,{gutter:20},{default:c(()=>[d(He,{span:14},{default:c(()=>[d(Ke,null,{header:c(()=>[O("div",_n,[s[21]||(s[21]=O("span",{class:"title"},"用户管理",-1)),d(T,{type:"primary",size:"small",onClick:Ee},{default:c(()=>[d(z,null,{default:c(()=>[d(Te(Ge))]),_:1}),s[20]||(s[20]=I(" 添加用户 ",-1))]),_:1,__:[20]})])]),default:c(()=>[d(ge,{inline:!0,class:"search-form"},{default:c(()=>[d(B,{label:"用户名"},{default:c(()=>[d(H,{modelValue:n.value.userName,"onUpdate:modelValue":s[0]||(s[0]=h=>n.value.userName=h),placeholder:"请输入用户名",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),d(B,{label:"角色"},{default:c(()=>[d(ve,{modelValue:n.value.roleId,"onUpdate:modelValue":s[1]||(s[1]=h=>n.value.roleId=h),placeholder:"请选择角色",clearable:"",style:{width:"150px"}},{default:c(()=>[d(Q,{label:"全部",value:""}),(S(!0),j(fe,null,pe(i.value,h=>(S(),L(Q,{key:h.id,label:h.name,value:h.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(B,{label:"状态"},{default:c(()=>[d(ve,{modelValue:n.value.status,"onUpdate:modelValue":s[2]||(s[2]=h=>n.value.status=h),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:c(()=>[d(Q,{label:"全部",value:""}),d(Q,{label:"正常",value:"active"}),d(Q,{label:"已禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),d(B,null,{default:c(()=>[d(T,{type:"primary",onClick:A},{default:c(()=>s[22]||(s[22]=[I("查询",-1)])),_:1,__:[22]}),d(T,{onClick:U},{default:c(()=>s[23]||(s[23]=[I("重置",-1)])),_:1,__:[23]})]),_:1})]),_:1}),d(je,{data:w.value,border:"",style:{width:"100%"}},{default:c(()=>[d(P,{prop:"userId",label:"用户ID",width:"150"}),d(P,{prop:"userName",label:"用户名",width:"120"}),d(P,{prop:"email",label:"邮箱",width:"180"}),d(P,{prop:"roleName",label:"角色",width:"120"},{default:c(({row:h})=>[d(qe,{type:vt(h.roleId)},{default:c(()=>[I(ue(h.roleName),1)]),_:2},1032,["type"])]),_:1}),d(P,{prop:"status",label:"状态",width:"100",align:"center"},{default:c(({row:h})=>[d(qe,{type:h.status==="active"?"success":"danger"},{default:c(()=>[I(ue(h.status==="active"?"正常":"已禁用"),1)]),_:2},1032,["type"])]),_:1}),d(P,{label:"操作",width:"200",fixed:"right"},{default:c(({row:h})=>[d(T,{link:"",type:"primary",size:"small",onClick:ie=>we(h)},{default:c(()=>s[24]||(s[24]=[I("编辑",-1)])),_:2,__:[24]},1032,["onClick"]),d(T,{link:"",type:"primary",size:"small",onClick:ie=>_e(h)},{default:c(()=>s[25]||(s[25]=[I("分配角色",-1)])),_:2,__:[25]},1032,["onClick"]),d(T,{link:"",type:h.status==="active"?"warning":"success",size:"small",onClick:ie=>xe(h)},{default:c(()=>[I(ue(h.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"]),O("div",Dn,[d(Nt,{"current-page":l.value,"onUpdate:currentPage":s[3]||(s[3]=h=>l.value=h),"page-size":a.value,"onUpdate:pageSize":s[4]||(s[4]=h=>a.value=h),"page-sizes":[10,20,50],total:g.value.length,layout:"total, sizes, prev, pager, next",onSizeChange:gt,onCurrentChange:yt},null,8,["current-page","page-size","total"])])]),_:1})]),_:1}),d(He,{span:10},{default:c(()=>[d(Ke,null,{header:c(()=>[O("div",xn,[s[27]||(s[27]=O("span",{class:"title"},"角色管理",-1)),d(T,{type:"primary",size:"small",onClick:F},{default:c(()=>[d(z,null,{default:c(()=>[d(Te(Ge))]),_:1}),s[26]||(s[26]=I(" 添加角色 ",-1))]),_:1,__:[26]})])]),default:c(()=>[d(je,{data:i.value,border:"",style:{width:"100%"}},{default:c(()=>[d(P,{prop:"name",label:"角色名称",width:"140"}),d(P,{prop:"description",label:"描述","min-width":"150","show-overflow-tooltip":""}),d(P,{prop:"userCount",label:"用户数",width:"80",align:"center"}),d(P,{label:"操作",width:"160"},{default:c(({row:h})=>[d(T,{link:"",type:"primary",size:"small",onClick:ie=>X(h)},{default:c(()=>s[28]||(s[28]=[I("编辑",-1)])),_:2,__:[28]},1032,["onClick"]),d(T,{link:"",type:"primary",size:"small",onClick:ie=>ft(h)},{default:c(()=>s[29]||(s[29]=[I("权限",-1)])),_:2,__:[29]},1032,["onClick"]),d(T,{link:"",type:"danger",size:"small",onClick:ie=>ut(h),disabled:h.isSystem},{default:c(()=>s[30]||(s[30]=[I(" 删除 ",-1)])),_:2,__:[30]},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),K.value?(S(),L(Ke,{key:0,style:{"margin-top":"20px"}},{header:c(()=>[O("div",Kn,[O("span",In,ue(K.value.name)+" - 权限配置",1)])]),default:c(()=>[d(Ct,{ref_key:"permissionTreeRef",ref:V,data:Y,props:{label:"label",children:"children"},"node-key":"id","show-checkbox":"","default-checked-keys":R.value,onCheck:pt},null,8,["default-checked-keys"]),O("div",Sn,[d(T,{type:"primary",size:"small",onClick:mt},{default:c(()=>s[31]||(s[31]=[I("保存权限",-1)])),_:1,__:[31]})])]),_:1})):le("",!0)]),_:1})]),_:1}),d(Ie,{modelValue:o.value,"onUpdate:modelValue":s[10]||(s[10]=h=>o.value=h),title:r.value==="create"?"添加用户":"编辑用户",width:"500px",onClose:_},{footer:c(()=>[d(T,{onClick:s[9]||(s[9]=h=>o.value=!1)},{default:c(()=>s[34]||(s[34]=[I("取消",-1)])),_:1,__:[34]}),d(T,{type:"primary",onClick:m},{default:c(()=>s[35]||(s[35]=[I("确定",-1)])),_:1,__:[35]})]),default:c(()=>[d(ge,{model:f.value,rules:N,ref_key:"userFormRef",ref:p,"label-width":"80px"},{default:c(()=>[d(B,{label:"用户名",prop:"userName"},{default:c(()=>[d(H,{modelValue:f.value.userName,"onUpdate:modelValue":s[5]||(s[5]=h=>f.value.userName=h),placeholder:"请输入用户名",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),d(B,{label:"邮箱",prop:"email"},{default:c(()=>[d(H,{modelValue:f.value.email,"onUpdate:modelValue":s[6]||(s[6]=h=>f.value.email=h),placeholder:"请输入邮箱",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),d(B,{label:"角色",prop:"roleId"},{default:c(()=>[d(ve,{modelValue:f.value.roleId,"onUpdate:modelValue":s[7]||(s[7]=h=>f.value.roleId=h),placeholder:"请选择角色",style:{width:"100%"}},{default:c(()=>[(S(!0),j(fe,null,pe(i.value,h=>(S(),L(Q,{key:h.id,label:h.name,value:h.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d(B,{label:"状态",prop:"status"},{default:c(()=>[d(bt,{modelValue:f.value.status,"onUpdate:modelValue":s[8]||(s[8]=h=>f.value.status=h)},{default:c(()=>[d(We,{label:"active"},{default:c(()=>s[32]||(s[32]=[I("正常",-1)])),_:1,__:[32]}),d(We,{label:"disabled"},{default:c(()=>s[33]||(s[33]=[I("禁用",-1)])),_:1,__:[33]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),d(Ie,{modelValue:v.value,"onUpdate:modelValue":s[14]||(s[14]=h=>v.value=h),title:C.value==="create"?"添加角色":"编辑角色",width:"500px",onClose:ht},{footer:c(()=>[d(T,{onClick:s[13]||(s[13]=h=>v.value=!1)},{default:c(()=>s[36]||(s[36]=[I("取消",-1)])),_:1,__:[36]}),d(T,{type:"primary",onClick:ct},{default:c(()=>s[37]||(s[37]=[I("确定",-1)])),_:1,__:[37]})]),default:c(()=>[d(ge,{model:y.value,rules:b,ref_key:"roleFormRef",ref:k,"label-width":"80px"},{default:c(()=>[d(B,{label:"角色名称",prop:"name"},{default:c(()=>[d(H,{modelValue:y.value.name,"onUpdate:modelValue":s[11]||(s[11]=h=>y.value.name=h),placeholder:"请输入角色名称",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),d(B,{label:"角色描述",prop:"description"},{default:c(()=>[d(H,{modelValue:y.value.description,"onUpdate:modelValue":s[12]||(s[12]=h=>y.value.description=h),type:"textarea",rows:3,placeholder:"请输入角色描述",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),d(Ie,{modelValue:D.value,"onUpdate:modelValue":s[19]||(s[19]=h=>D.value=h),title:"分配角色",width:"400px"},{footer:c(()=>[d(T,{onClick:s[18]||(s[18]=h=>D.value=!1)},{default:c(()=>s[38]||(s[38]=[I("取消",-1)])),_:1,__:[38]}),d(T,{type:"primary",onClick:De},{default:c(()=>s[39]||(s[39]=[I("确定",-1)])),_:1,__:[39]})]),default:c(()=>[d(ge,{model:E.value,"label-width":"80px"},{default:c(()=>[d(B,{label:"用户名"},{default:c(()=>[d(H,{modelValue:E.value.userName,"onUpdate:modelValue":s[15]||(s[15]=h=>E.value.userName=h),disabled:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),d(B,{label:"当前角色"},{default:c(()=>[d(H,{modelValue:E.value.currentRoleName,"onUpdate:modelValue":s[16]||(s[16]=h=>E.value.currentRoleName=h),disabled:"",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),d(B,{label:"新角色"},{default:c(()=>[d(ve,{modelValue:E.value.newRoleId,"onUpdate:modelValue":s[17]||(s[17]=h=>E.value.newRoleId=h),placeholder:"请选择新角色",style:{width:"100%"}},{default:c(()=>[(S(!0),j(fe,null,pe(i.value,h=>(S(),L(Q,{key:h.id,label:h.name,value:h.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),la=Ot(Tn,[["__scopeId","data-v-d8ecab58"]]);export{la as default};
