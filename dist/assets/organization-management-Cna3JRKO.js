import{d as de,r as d,y as U,h as me,b as pe,o as ce,f as a,w as l,e as V,a as s,t as S,E as fe,C as O,aN as j,_ as ve}from"./index-C1LNxWrc.js";import{E as _e}from"./dialog-D1_iS1Vq.js";import{E as ge,a as be}from"./radio-BfCnrhE6.js";import{E as Ce}from"./card-bOHwtd_N.js";import{E as ye}from"./pagination-C_8mWErZ.js";/* empty css            */import{E as Ee,a as xe}from"./select-BSsX693L.js";import"./scrollbar-CWDB5A-B.js";import{E as ke}from"./input-LGwqt1-Y.js";import{E as Ve,a as ze}from"./table-column-QOtjyKSd.js";import"./checkbox-D429Hkk4.js";import{E as we,a as Ae}from"./form-item-BZC8dQDK.js";import{E as Ie}from"./button-CfgjJGa2.js";import{g as F,s as p}from"./storage-2nKQMLp0.js";import{E as he}from"./index-gsKI2Iim.js";import{E as z}from"./index-B9Nwm2NO.js";import{E as v}from"./index-JFsgmBjq.js";import"./index-DaWWsILK.js";import"./scroll-RLo4NxSV.js";import"./index-DRLRXOGd.js";import"./use-form-common-props-dMO5F-Xy.js";import"./isEqual-CFwnnDW_.js";import"./strings-BOPxCUMK.js";import"./_initCloneObject-T9RaIEd1.js";import"./index-BPEUnmM4.js";import"./debounce-C4p0xsPh.js";import"./_baseIteratee-CNffayvf.js";import"./isPlainObject-BS8VhLgB.js";import"./_baseClone-0EgoVDGI.js";import"./validator-DJAEN8sI.js";const Me={class:"organization-management-page"},Se={class:"card-header"},Te={class:"pagination"},$e={class:"member-management"},y="organizations_data",w="organization_members_data",Be=de({__name:"organization-management",setup(Ne){const m=d({name:"",status:""}),r=d([]),_=d(1),A=d(10),g=d(!1),x=d("create"),I=d(),i=d({id:"",name:"",description:"",admin:"",status:"normal"}),q={name:[{required:!0,message:"请输入组织名称",trigger:"blur"}],description:[{required:!0,message:"请输入组织描述",trigger:"blur"}],admin:[{required:!0,message:"请输入管理员名称",trigger:"blur"}]},h=d(!1),k=d(""),b=d({}),G=U(()=>b.value[k.value]||[]),L=()=>{const t=[{id:"org-001",name:"技术研发部",description:"负责公司核心技术研发和创新",memberCount:25,admin:"张三",createdAt:"2024-01-15 10:30:00",status:"normal"},{id:"org-002",name:"产品部",description:"负责产品规划、设计和管理",memberCount:18,admin:"李四",createdAt:"2024-02-20 14:20:00",status:"normal"},{id:"org-003",name:"市场营销部",description:"负责市场推广和品牌建设",memberCount:12,admin:"王五",createdAt:"2024-03-10 09:15:00",status:"normal"},{id:"org-004",name:"AI实验室",description:"专注于人工智能技术研究与应用",memberCount:30,admin:"赵六",createdAt:"2024-04-05 11:00:00",status:"normal"},{id:"org-005",name:"数据中心",description:"负责数据管理和数据分析",memberCount:8,admin:"钱七",createdAt:"2024-05-12 16:45:00",status:"disabled"}],e={"org-001":[{userId:"user-001",userName:"张三",email:"zhangsan@example.com",role:"admin",joinedAt:"2024-01-15 10:30:00"},{userId:"user-002",userName:"李明",email:"liming@example.com",role:"member",joinedAt:"2024-01-16 09:20:00"},{userId:"user-003",userName:"王芳",email:"wangfang@example.com",role:"member",joinedAt:"2024-01-18 14:30:00"}],"org-002":[{userId:"user-004",userName:"李四",email:"lisi@example.com",role:"admin",joinedAt:"2024-02-20 14:20:00"},{userId:"user-005",userName:"陈伟",email:"chenwei@example.com",role:"member",joinedAt:"2024-02-21 10:00:00"}]};r.value=t,b.value=e,p(y,t),p(w,e)},P=()=>{const t=F(y),e=F(w);t&&Array.isArray(t)&&t.length>0?r.value=t:L(),e&&(b.value=e)},T=U(()=>{let t=r.value;return m.value.name&&(t=t.filter(e=>e.name.toLowerCase().includes(m.value.name.toLowerCase()))),m.value.status&&(t=t.filter(e=>e.status===m.value.status)),t}),K=()=>{_.value=1},Y=()=>{m.value={name:"",status:""},_.value=1},H=()=>{x.value="create",g.value=!0},J=t=>{x.value="edit",i.value={...t},g.value=!0},Q=t=>{const e=t.status==="normal"?"停用":"启用";z.confirm(`确定要${e}组织"${t.name}"吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.status=t.status==="normal"?"disabled":"normal",p(y,r.value),v.success(`${e}成功`)})},W=t=>{z.confirm(`确定要删除组织"${t.name}"吗? 此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const e=r.value.findIndex(c=>c.id===t.id);e>-1&&(r.value.splice(e,1),p(y,r.value),v.success("删除成功"))})},X=async()=>{if(await I.value.validate(),x.value==="create"){const t={...i.value,id:`org-${Date.now()}`,memberCount:0,createdAt:new Date().toLocaleString("zh-CN")};r.value.unshift(t),v.success("创建成功")}else{const t=r.value.findIndex(e=>e.id===i.value.id);t>-1&&(r.value[t]={...r.value[t],...i.value},v.success("更新成功"))}p(y,r.value),g.value=!1},Z=()=>{I.value?.resetFields(),i.value={id:"",name:"",description:"",admin:"",status:"normal"}},ee=t=>{k.value=t.id,h.value=!0},ae=()=>{v.info("添加成员功能（演示模式）")},te=t=>{const e=t.role==="admin"?"member":"admin";z.confirm(`确定要将"${t.userName}"的角色变更为${e==="admin"?"管理员":"成员"}吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{t.role=e,p(w,b.value),v.success("角色变更成功")})},le=t=>{z.confirm(`确定要移除成员"${t.userName}"吗?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=b.value[k.value],c=e.findIndex(n=>n.userId===t.userId);if(c>-1){e.splice(c,1),p(w,b.value);const n=r.value.find(C=>C.id===k.value);n&&(n.memberCount=e.length,p(y,r.value)),v.success("移除成功")}})},oe=t=>{A.value=t,_.value=1},ne=t=>{_.value=t};return me(()=>{P()}),(t,e)=>{const c=fe,n=Ie,C=ke,f=Ae,M=xe,se=Ee,$=we,u=ze,B=he,N=Ve,re=ye,ie=Ce,D=be,ue=ge,R=_e;return ce(),pe("div",Me,[a(ie,null,{header:l(()=>[V("div",Se,[e[12]||(e[12]=V("span",{class:"title"},"组织管理",-1)),a(n,{type:"primary",onClick:H},{default:l(()=>[a(c,null,{default:l(()=>[a(O(j))]),_:1}),e[11]||(e[11]=s(" 创建组织 ",-1))]),_:1,__:[11]})])]),default:l(()=>[a($,{inline:!0,class:"search-form"},{default:l(()=>[a(f,{label:"组织名称"},{default:l(()=>[a(C,{modelValue:m.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value.name=o),placeholder:"请输入组织名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),a(f,{label:"状态"},{default:l(()=>[a(se,{modelValue:m.value.status,"onUpdate:modelValue":e[1]||(e[1]=o=>m.value.status=o),placeholder:"请选择状态",clearable:"",style:{width:"150px"}},{default:l(()=>[a(M,{label:"全部",value:""}),a(M,{label:"正常",value:"normal"}),a(M,{label:"已停用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),a(f,null,{default:l(()=>[a(n,{type:"primary",onClick:K},{default:l(()=>e[13]||(e[13]=[s("查询",-1)])),_:1,__:[13]}),a(n,{onClick:Y},{default:l(()=>e[14]||(e[14]=[s("重置",-1)])),_:1,__:[14]})]),_:1})]),_:1}),a(N,{data:T.value,border:"",style:{width:"100%"}},{default:l(()=>[a(u,{prop:"id",label:"组织ID",width:"180"}),a(u,{prop:"name",label:"组织名称",width:"200"}),a(u,{prop:"description",label:"描述","min-width":"200"}),a(u,{prop:"memberCount",label:"成员数",width:"100",align:"center"}),a(u,{prop:"admin",label:"管理员",width:"120"}),a(u,{prop:"createdAt",label:"创建时间",width:"180"}),a(u,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:o})=>[a(B,{type:o.status==="normal"?"success":"danger"},{default:l(()=>[s(S(o.status==="normal"?"正常":"已停用"),1)]),_:2},1032,["type"])]),_:1}),a(u,{label:"操作",width:"250",fixed:"right"},{default:l(({row:o})=>[a(n,{link:"",type:"primary",size:"small",onClick:E=>J(o)},{default:l(()=>e[15]||(e[15]=[s("编辑",-1)])),_:2,__:[15]},1032,["onClick"]),a(n,{link:"",type:"primary",size:"small",onClick:E=>ee(o)},{default:l(()=>e[16]||(e[16]=[s("成员管理",-1)])),_:2,__:[16]},1032,["onClick"]),a(n,{link:"",type:o.status==="normal"?"warning":"success",size:"small",onClick:E=>Q(o)},{default:l(()=>[s(S(o.status==="normal"?"停用":"启用"),1)]),_:2},1032,["type","onClick"]),a(n,{link:"",type:"danger",size:"small",onClick:E=>W(o)},{default:l(()=>e[17]||(e[17]=[s("删除",-1)])),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),V("div",Te,[a(re,{"current-page":_.value,"onUpdate:currentPage":e[2]||(e[2]=o=>_.value=o),"page-size":A.value,"onUpdate:pageSize":e[3]||(e[3]=o=>A.value=o),"page-sizes":[10,20,50,100],total:T.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:oe,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1}),a(R,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=o=>g.value=o),title:x.value==="create"?"创建组织":"编辑组织",width:"600px",onClose:Z},{footer:l(()=>[a(n,{onClick:e[8]||(e[8]=o=>g.value=!1)},{default:l(()=>e[20]||(e[20]=[s("取消",-1)])),_:1,__:[20]}),a(n,{type:"primary",onClick:X},{default:l(()=>e[21]||(e[21]=[s("确定",-1)])),_:1,__:[21]})]),default:l(()=>[a($,{model:i.value,rules:q,ref_key:"formRef",ref:I,"label-width":"100px"},{default:l(()=>[a(f,{label:"组织名称",prop:"name"},{default:l(()=>[a(C,{modelValue:i.value.name,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value.name=o),placeholder:"请输入组织名称"},null,8,["modelValue"])]),_:1}),a(f,{label:"组织描述",prop:"description"},{default:l(()=>[a(C,{modelValue:i.value.description,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value.description=o),type:"textarea",rows:3,placeholder:"请输入组织描述"},null,8,["modelValue"])]),_:1}),a(f,{label:"管理员",prop:"admin"},{default:l(()=>[a(C,{modelValue:i.value.admin,"onUpdate:modelValue":e[6]||(e[6]=o=>i.value.admin=o),placeholder:"请输入管理员名称"},null,8,["modelValue"])]),_:1}),a(f,{label:"状态",prop:"status"},{default:l(()=>[a(ue,{modelValue:i.value.status,"onUpdate:modelValue":e[7]||(e[7]=o=>i.value.status=o)},{default:l(()=>[a(D,{label:"normal"},{default:l(()=>e[18]||(e[18]=[s("正常",-1)])),_:1,__:[18]}),a(D,{label:"disabled"},{default:l(()=>e[19]||(e[19]=[s("停用",-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(R,{modelValue:h.value,"onUpdate:modelValue":e[10]||(e[10]=o=>h.value=o),title:"成员管理",width:"800px"},{default:l(()=>[V("div",$e,[a(n,{type:"primary",size:"small",onClick:ae,style:{"margin-bottom":"16px"}},{default:l(()=>[a(c,null,{default:l(()=>[a(O(j))]),_:1}),e[22]||(e[22]=s(" 添加成员 ",-1))]),_:1,__:[22]}),a(N,{data:G.value,border:""},{default:l(()=>[a(u,{prop:"userId",label:"用户ID",width:"180"}),a(u,{prop:"userName",label:"用户名",width:"150"}),a(u,{prop:"email",label:"邮箱",width:"200"}),a(u,{prop:"role",label:"角色",width:"120"},{default:l(({row:o})=>[a(B,{type:o.role==="admin"?"danger":"primary"},{default:l(()=>[s(S(o.role==="admin"?"管理员":"成员"),1)]),_:2},1032,["type"])]),_:1}),a(u,{prop:"joinedAt",label:"加入时间",width:"180"}),a(u,{label:"操作",width:"150"},{default:l(({row:o})=>[a(n,{link:"",type:"primary",size:"small",onClick:E=>te(o)},{default:l(()=>e[23]||(e[23]=[s(" 变更角色 ",-1)])),_:2,__:[23]},1032,["onClick"]),a(n,{link:"",type:"danger",size:"small",onClick:E=>le(o)},{default:l(()=>e[24]||(e[24]=[s(" 移除 ",-1)])),_:2,__:[24]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"])])}}}),pa=ve(Be,[["__scopeId","data-v-2a00b1b5"]]);export{pa as default};
