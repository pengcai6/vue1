import{d as R,u as h,r as i,h as j,i as z,b as y,o as w,f as t,w as o,e as l,t as n,a as m,j as L,F as G,A as H,D as q,E as J,B as O,G as Q,aE as S,_ as W}from"./index-C1LNxWrc.js";import{E as X,a as Y}from"./col-BHj47XkZ.js";import{E as Z,a as $}from"./descriptions-item-BClrjkTE.js";import{E as ee,a as te}from"./form-item-BZC8dQDK.js";import{E as oe}from"./input-LGwqt1-Y.js";import{E as se}from"./input-number-BdlakYFh.js";import{E as le}from"./slider-DMqZpOYh.js";import{E as ae}from"./card-bOHwtd_N.js";import{E as ne}from"./button-CfgjJGa2.js";import{g as me}from"./storage-2nKQMLp0.js";import{E as re}from"./index-JFsgmBjq.js";import"./use-form-common-props-dMO5F-Xy.js";import"./_initCloneObject-T9RaIEd1.js";import"./index-DRLRXOGd.js";import"./_baseClone-0EgoVDGI.js";import"./index-BPEUnmM4.js";import"./index-BYwYey8Q.js";import"./debounce-C4p0xsPh.js";const ie={class:"playground-page"},ue={class:"flex items-center justify-between"},de={class:"text-gray-500"},pe={class:"flex items-center justify-between"},_e={class:"message-role"},fe={class:"message-content"},ce={class:"message-time"},ve={key:0,class:"message-item assistant"},ge={class:"message-content"},xe={class:"chat-input mt-4"},ye={class:"mt-2 flex justify-end"},we=R({__name:"playground",setup(Te){const B=h(),V=i(null),v=i([]),u=i(""),f=i(!1),g=i(),a=i({systemPrompt:"你是一个有帮助的AI助手",temperature:.7,topP:.9,maxTokens:2e3,repetitionPenalty:1.1,topK:50}),c=i({ttft:0,tps:0,totalTime:0,generatedTokens:0}),k=["你好！我是AI助手，很高兴为你服务。有什么我可以帮助你的吗？","这是一个很好的问题。让我来为你详细解答...","根据你的需求，我建议可以从以下几个方面考虑：1) 首先..., 2) 其次..., 3) 最后...","我理解你的意思。这个问题可以这样解决...","很高兴能帮到你！还有其他问题吗？"];function K(){B.back()}function U(){v.value=[],re.success("对话已清空")}async function M(){if(!u.value.trim()||f.value)return;const I={id:Date.now().toString(),role:"user",content:u.value,timestamp:new Date().toLocaleTimeString()};v.value.push(I),u.value="",f.value=!0;const e=Date.now();await S(),P();const d=Math.floor(Math.random()*300+100);await new Promise(p=>setTimeout(p,d));const r=k[Math.floor(Math.random()*k.length)],T={id:(Date.now()+1).toString(),role:"assistant",content:r,timestamp:new Date().toLocaleTimeString()};await new Promise(p=>setTimeout(p,1e3)),v.value.push(T),f.value=!1;const E=Date.now()-e;c.value={ttft:d,tps:Math.floor(Math.random()*50+30),totalTime:E,generatedTokens:Math.floor(r.length/2)},await S(),P()}function P(){g.value&&(g.value.scrollTop=g.value.scrollHeight)}return j(()=>{V.value=me("current-model",null)}),(I,e)=>{const d=ne,r=ae,T=z("i-ep-loading"),E=J,p=oe,C=X,_=te,b=le,D=se,A=ee,x=$,F=Z,N=Y;return w(),y("div",ie,[t(r,{class:"header-card"},{default:o(()=>[l("div",ue,[l("div",null,[e[7]||(e[7]=l("h2",{class:"text-2xl font-bold mb-2"}," 在线体验 (Playground) ",-1)),l("p",de," 模型: "+n(V.value?.name||"未选择"),1)]),t(d,{onClick:K},{default:o(()=>e[8]||(e[8]=[m(" 返回 ",-1)])),_:1,__:[8]})])]),_:1}),t(N,{gutter:20,class:"mt-4"},{default:o(()=>[t(C,{span:16},{default:o(()=>[t(r,{class:"chat-card"},{header:o(()=>[l("div",pe,[e[10]||(e[10]=l("span",{class:"font-bold"},"对话窗口",-1)),t(d,{size:"small",onClick:U},{default:o(()=>e[9]||(e[9]=[m(" 清空对话 ",-1)])),_:1,__:[9]})])]),default:o(()=>[l("div",{class:"chat-messages",ref_key:"messagesRef",ref:g},[(w(!0),y(G,null,H(v.value,s=>(w(),y("div",{key:s.id,class:q(["message-item",s.role])},[l("div",_e,n(s.role==="user"?"用户":"AI助手"),1),l("div",fe,n(s.content),1),l("div",ce,n(s.timestamp),1)],2))),128)),f.value?(w(),y("div",ve,[e[12]||(e[12]=l("div",{class:"message-role"},"AI助手",-1)),l("div",ge,[t(E,{class:"is-loading"},{default:o(()=>[t(T)]),_:1}),e[11]||(e[11]=m(" 正在生成回复... ",-1))])])):L("",!0)],512),l("div",xe,[t(p,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),type:"textarea",rows:3,placeholder:"输入你的问题...",onKeydown:O(Q(M,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"]),l("div",ye,[t(d,{type:"primary",loading:f.value,disabled:!u.value.trim(),onClick:M},{default:o(()=>e[13]||(e[13]=[m(" 发送 (Ctrl+Enter) ",-1)])),_:1,__:[13]},8,["loading","disabled"])])])]),_:1})]),_:1}),t(C,{span:8},{default:o(()=>[t(r,null,{header:o(()=>e[14]||(e[14]=[l("span",{class:"font-bold"},"推理参数",-1)])),default:o(()=>[t(A,{"label-width":"120px",size:"small"},{default:o(()=>[t(_,{label:"系统提示词"},{default:o(()=>[t(p,{modelValue:a.value.systemPrompt,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.systemPrompt=s),type:"textarea",rows:3,placeholder:"你是一个有帮助的AI助手"},null,8,["modelValue"])]),_:1}),t(_,{label:"温度 (Temperature)"},{default:o(()=>[t(b,{modelValue:a.value.temperature,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.temperature=s),min:0,max:2,step:.1,"show-input":""},null,8,["modelValue"]),e[15]||(e[15]=l("div",{class:"text-xs text-gray-500 mt-1"}," 控制输出的随机性，值越大越随机 ",-1))]),_:1,__:[15]}),t(_,{label:"Top P"},{default:o(()=>[t(b,{modelValue:a.value.topP,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.topP=s),min:0,max:1,step:.05,"show-input":""},null,8,["modelValue"]),e[16]||(e[16]=l("div",{class:"text-xs text-gray-500 mt-1"}," 控制输出的多样性 ",-1))]),_:1,__:[16]}),t(_,{label:"最大Token数"},{default:o(()=>[t(D,{modelValue:a.value.maxTokens,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.maxTokens=s),min:100,max:4e3,step:100},null,8,["modelValue"])]),_:1}),t(_,{label:"重复惩罚"},{default:o(()=>[t(b,{modelValue:a.value.repetitionPenalty,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.repetitionPenalty=s),min:1,max:2,step:.1,"show-input":""},null,8,["modelValue"]),e[17]||(e[17]=l("div",{class:"text-xs text-gray-500 mt-1"}," 降低重复内容的概率 ",-1))]),_:1,__:[17]}),t(_,{label:"Top K"},{default:o(()=>[t(D,{modelValue:a.value.topK,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.topK=s),min:1,max:100},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(r,{class:"mt-4"},{header:o(()=>e[18]||(e[18]=[l("span",{class:"font-bold"},"性能统计",-1)])),default:o(()=>[t(F,{column:1,size:"small"},{default:o(()=>[t(x,{label:"TTFT"},{default:o(()=>[m(n(c.value.ttft)+" ms",1)]),_:1}),t(x,{label:"TPS"},{default:o(()=>[m(n(c.value.tps)+" tokens/s",1)]),_:1}),t(x,{label:"总耗时"},{default:o(()=>[m(n(c.value.totalTime)+" ms",1)]),_:1}),t(x,{label:"生成Token数"},{default:o(()=>[m(n(c.value.generatedTokens),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),je=W(we,[["__scopeId","data-v-965a325f"]]);export{je as default};
