import{d as D,r as g,j,c as _,a as e,m as O,n as I,w as a,o as m,b as i,p as s,i as n,G as J,H as P,u as $,l as N,_ as z}from"./index-BX2sZVyW.js";import{E as A}from"./card-B6phTZGW.js";import{a as H,E as G}from"./tab-pane-BLMCB6bP.js";import{E as q}from"./button-Cn9gqGCu.js";import{E as K}from"./empty-D8oDeztR.js";import{a as Q,E as W}from"./table-column-DG__lvqo.js";import"./checkbox-B8dDd1Mj.js";import"./scrollbar-C9NSq6wy.js";/* empty css            */import{E as X}from"./progress-B1_RPwJG.js";import{a as Y,E as Z}from"./descriptions-item-CLkKtAVA.js";import"./divider-Cw9FL3-C.js";import{E as ee}from"./page-header-BYBfeuC8.js";import{E as te}from"./index-BFcHm1-Q.js";import"./strings-JcT2fde-.js";import"./event-BORzi4vc.js";import"./index-Dc9GAbAN.js";import"./_baseClone-BOpOh07B.js";import"./isPlainObject-jZyBOBeK.js";import"./index-PwB6y63X.js";import"./debounce-DYp1oJWc.js";import"./isEqual-ohjdCfDM.js";const ae={class:"task-detail-page p-5"},oe={class:"text-2xl font-bold"},le={key:0,class:"mt-4"},ne={class:"mt-4"},se={class:"log-viewer"},re={class:"log-time"},ie={class:"log-content"},ce={key:0},ue={class:"mt-4 flex gap-3"},me=D({__name:"task-detail",setup(de){const k=$(),t=g(null),y=g("overview"),L=g([{metric:"Training Loss",value:"0.352",description:"训练损失"},{metric:"Validation Loss",value:"0.428",description:"验证损失"},{metric:"Perplexity",value:"12.5",description:"困惑度"},{metric:"BLEU Score",value:"0.76",description:"翻译质量评分"}]),w=g([{time:"14:30:00",content:"[INFO] 开始加载基座模型..."},{time:"14:30:15",content:"[INFO] 模型加载完成"},{time:"14:30:20",content:"[INFO] 开始加载训练数据集..."},{time:"14:30:25",content:"[INFO] 数据集加载完成，共10000条样本"},{time:"14:30:30",content:"[INFO] 初始化LoRA配置..."},{time:"14:30:35",content:"[INFO] 开始训练 Epoch 1/3"},{time:"14:31:00",content:"[INFO] Epoch 1/3 - Loss: 0.521"},{time:"14:32:00",content:"[INFO] Epoch 2/3 - Loss: 0.398"},{time:"14:33:00",content:"[INFO] Epoch 3/3 - Loss: 0.352"},{time:"14:33:30",content:"[INFO] 训练完成，保存模型..."}]);function S(r){return{pending:"info",running:"warning",completed:"success",failed:"danger"}[r]||"info"}function T(r){return{pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"}[r]||r}function R(){k.back()}function x(){localStorage.setItem("eval-model",JSON.stringify(t.value)),k.push("/model-evaluation/create-task"),N.success("跳转到模型评测页面")}function C(){const r={id:t.value.id,name:`${t.value.taskName}-lora`,category:"text",vendor:"Self-Finetuned",version:"v1.0",parameters:"Unknown",contextLength:"Unknown",description:`微调任务 ${t.value.taskName} 产出的模型`,isDeployed:!0,capabilities:["对话","文本生成"],useCases:["微调验证"]};localStorage.setItem("current-model",JSON.stringify(r)),k.push("/model-marketplace/playground"),N.success("跳转到在线体验页面")}function F(){var v,p,b,c,d;const r=JSON.stringify({modelName:(v=t.value)==null?void 0:v.taskName,baseModel:(p=t.value)==null?void 0:p.baseModel,loraRank:(b=t.value)==null?void 0:b.loraRank,createTime:(c=t.value)==null?void 0:c.createTime,weights:"fake-model-weights-data"},null,2),l=new Blob([r],{type:"application/json"}),f=URL.createObjectURL(l),o=document.createElement("a");o.href=f,o.download=`${(d=t.value)==null?void 0:d.taskName}-lora.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(f),N.success("模型下载成功")}return j(()=>{const r=localStorage.getItem("current-finetune-task");t.value=r?JSON.parse(r):null}),(r,l)=>{const f=ee,o=Z,v=te,p=Y,b=X,c=H,d=W,B=Q,h=K,E=q,M=G,U=A;return m(),_("div",ae,[e(f,{onBack:R},{content:a(()=>{var u;return[i("span",oe,s((u=t.value)==null?void 0:u.taskName),1)]}),_:1}),t.value?(m(),O(U,{key:0,class:"mt-4"},{default:a(()=>[e(M,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=u=>y.value=u)},{default:a(()=>[e(c,{label:"概览信息",name:"overview"},{default:a(()=>[e(p,{column:2,border:""},{default:a(()=>[e(o,{label:"任务名称"},{default:a(()=>[n(s(t.value.taskName),1)]),_:1}),e(o,{label:"任务状态"},{default:a(()=>[e(v,{type:S(t.value.status)},{default:a(()=>[n(s(T(t.value.status)),1)]),_:1},8,["type"])]),_:1}),e(o,{label:"基座模型"},{default:a(()=>[n(s(t.value.baseModel),1)]),_:1}),e(o,{label:"数据集"},{default:a(()=>[n(s(t.value.dataset),1)]),_:1}),e(o,{label:"Learning Rate"},{default:a(()=>[n(s(t.value.learningRate),1)]),_:1}),e(o,{label:"Epochs"},{default:a(()=>[n(s(t.value.epochs),1)]),_:1}),e(o,{label:"Batch Size"},{default:a(()=>[n(s(t.value.batchSize),1)]),_:1}),e(o,{label:"LoRA Rank"},{default:a(()=>[n(s(t.value.loraRank),1)]),_:1}),e(o,{label:"创建时间",span:2},{default:a(()=>[n(s(t.value.createTime),1)]),_:1}),e(o,{label:"任务描述",span:2},{default:a(()=>[n(s(t.value.description),1)]),_:1})]),_:1}),t.value.status==="running"?(m(),_("div",le,[l[1]||(l[1]=i("h3",{class:"font-bold mb-2"},"训练进度",-1)),e(b,{percentage:t.value.progress,status:t.value.progress===100?"success":""},null,8,["percentage","status"])])):I("",!0)]),_:1}),e(c,{label:"效果指标",name:"metrics"},{default:a(()=>[e(B,{data:L.value,border:""},{default:a(()=>[e(d,{prop:"metric",label:"指标",width:"150"}),e(d,{prop:"value",label:"数值",align:"center"}),e(d,{prop:"description",label:"说明"})]),_:1},8,["data"]),i("div",ne,[l[2]||(l[2]=i("h3",{class:"font-bold mb-3"},"训练曲线",-1)),e(h,{description:"训练曲线图表区域（可接入ECharts）"})])]),_:1}),e(c,{label:"日志",name:"logs"},{default:a(()=>[i("div",se,[(m(!0),_(J,null,P(w.value,(u,V)=>(m(),_("div",{key:V,class:"log-line"},[i("span",re,s(u.time),1),i("span",ie,s(u.content),1)]))),128))])]),_:1}),e(c,{label:"模型产出",name:"output"},{default:a(()=>[t.value.status==="completed"?(m(),_("div",ce,[e(p,{column:2,border:""},{default:a(()=>[e(o,{label:"产出模型"},{default:a(()=>[n(s(t.value.taskName)+"-lora ",1)]),_:1}),e(o,{label:"模型大小"},{default:a(()=>l[3]||(l[3]=[n(" 256 MB ",-1)])),_:1,__:[3]}),e(o,{label:"保存路径"},{default:a(()=>[n(" /models/"+s(t.value.taskName)+"/ ",1)]),_:1}),e(o,{label:"产出时间"},{default:a(()=>[n(s(t.value.createTime),1)]),_:1})]),_:1}),i("div",ue,[e(E,{type:"primary",onClick:x},{default:a(()=>l[4]||(l[4]=[n(" 发起评测 ",-1)])),_:1,__:[4]}),e(E,{onClick:C},{default:a(()=>l[5]||(l[5]=[n(" 立即体验 ",-1)])),_:1,__:[5]}),e(E,{onClick:F},{default:a(()=>l[6]||(l[6]=[n(" 下载模型 ",-1)])),_:1,__:[6]})])])):(m(),O(h,{key:1,description:"任务完成后可查看模型产出"}))]),_:1})]),_:1},8,["modelValue"])]),_:1})):I("",!0)])}}}),Me=z(me,[["__scopeId","data-v-a7b9af52"]]);export{Me as default};
