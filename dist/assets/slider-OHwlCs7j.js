import{a7 as ae,s as le,x as be,b0 as Ie,y as te,b1 as Le,b2 as Se,R as pe,r as Q,D as f,Y as ie,b3 as de,ag as ce,b4 as X,A as Me,d as ne,C as he,aa as Pe,b5 as ge,c as R,o as C,a as Ne,w as ke,b as Z,J as _,e as l,p as Re,ak as _e,L as J,at as Ee,al as Fe,S as Ke,q as Ye,Z as Be,j as Xe,B as $e,a0 as We,m as me,n as se,G as ue,H as ve,K as Ue,a4 as Oe}from"./index-BX2sZVyW.js";import{E as Ae}from"./input-number-cfQWrT64.js";import{C as Te,I as ye,U as oe}from"./event-BORzi4vc.js";import{d as xe}from"./debounce-DYp1oJWc.js";import{u as je,a as He}from"./index-PwB6y63X.js";import{a as Ge}from"./card-B6phTZGW.js";const ze=Symbol("sliderContextKey"),qe=be({modelValue:{type:te([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Se,inputSize:Se,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:te(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:te(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Le,default:"top"},marks:{type:te(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ie(["ariaLabel"])}),fe=e=>ae(e)||le(e)&&e.every(ae),Je={[oe]:fe,[ye]:fe,[Te]:fe},Ze=be({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Le,default:"top"}}),Qe={[oe]:e=>ae(e)},De=(e,t,d)=>{const a=Q(),u=Q(!1),m=f(()=>t.value instanceof Function),i=f(()=>m.value&&t.value(e.modelValue)||e.modelValue),h=xe(()=>{d.value&&(u.value=!0)},50),y=xe(()=>{d.value&&(u.value=!1)},50);return{tooltip:a,tooltipVisible:u,formatValue:i,displayTooltip:h,hideTooltip:y}},et=(e,t,d)=>{const{disabled:a,min:u,max:m,step:i,showTooltip:h,persistent:y,precision:c,sliderSize:v,formatTooltip:n,emitChange:V,resetSize:T,updateDragging:$}=pe(ze),{tooltip:z,tooltipVisible:M,formatValue:I,displayTooltip:S,hideTooltip:F}=De(e,n,h),E=Q(),k=f(()=>`${(e.modelValue-u.value)/(m.value-u.value)*100}%`),L=f(()=>e.vertical?{bottom:k.value}:{left:k.value}),W=()=>{t.hovering=!0,S()},re=()=>{t.hovering=!1,t.dragging||F()},U=o=>{a.value||(o.preventDefault(),p(o),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),window.addEventListener("contextmenu",x),E.value.focus())},K=o=>{a.value||(t.newPosition=Number.parseFloat(k.value)+o/(m.value-u.value)*100,P(t.newPosition),V())},O=()=>{K(-i.value)},s=()=>{K(i.value)},b=()=>{K(-i.value*4)},w=()=>{K(i.value*4)},H=()=>{a.value||(P(0),V())},G=()=>{a.value||(P(100),V())},q=o=>{let g=!0;switch(o.code){case X.left:case X.down:O();break;case X.right:case X.up:s();break;case X.home:H();break;case X.end:G();break;case X.pageDown:b();break;case X.pageUp:w();break;default:g=!1;break}g&&o.preventDefault()},A=o=>{let g,N;return o.type.startsWith("touch")?(N=o.touches[0].clientY,g=o.touches[0].clientX):(N=o.clientY,g=o.clientX),{clientX:g,clientY:N}},p=o=>{t.dragging=!0,t.isClick=!0;const{clientX:g,clientY:N}=A(o);e.vertical?t.startY=N:t.startX=g,t.startPosition=Number.parseFloat(k.value),t.newPosition=t.startPosition},B=o=>{if(t.dragging){t.isClick=!1,S(),T();let g;const{clientX:N,clientY:Y}=A(o);e.vertical?(t.currentY=Y,g=(t.startY-t.currentY)/v.value*100):(t.currentX=N,g=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+g,P(t.newPosition)}},x=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||F(),t.isClick||P(t.newPosition),V()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),window.removeEventListener("contextmenu",x))},P=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const g=100/((m.value-u.value)/i.value);let Y=Math.round(o/g)*g*(m.value-u.value)*.01+u.value;Y=Number.parseFloat(Y.toFixed(c.value)),Y!==e.modelValue&&d(oe,Y),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await ce(),t.dragging&&S(),z.value.updatePopper()};return ie(()=>t.dragging,o=>{$(o)}),de(E,"touchstart",U,{passive:!1}),{disabled:a,button:E,tooltip:z,tooltipVisible:M,showTooltip:h,persistent:y,wrapperStyle:L,formatValue:I,handleMouseEnter:W,handleMouseLeave:re,onButtonDown:U,onKeyDown:q,setPosition:P}},tt=ne({name:"ElSliderButton"}),lt=ne({...tt,props:Ze,emits:Qe,setup(e,{expose:t,emit:d}){const a=e,u=he("slider"),m=Pe({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),i=f(()=>v.value?n.value:!1),{disabled:h,button:y,tooltip:c,showTooltip:v,persistent:n,tooltipVisible:V,wrapperStyle:T,formatValue:$,handleMouseEnter:z,handleMouseLeave:M,onButtonDown:I,onKeyDown:S,setPosition:F}=et(a,m,d),{hovering:E,dragging:k}=ge(m);return t({onButtonDown:I,onKeyDown:S,setPosition:F,hovering:E,dragging:k}),(L,W)=>(C(),R("div",{ref_key:"button",ref:y,class:_([l(u).e("button-wrapper"),{hover:l(E),dragging:l(k)}]),style:J(l(T)),tabindex:l(h)?-1:0,onMouseenter:l(z),onMouseleave:l(M),onMousedown:l(I),onFocus:l(z),onBlur:l(M),onKeydown:l(S)},[Ne(l(_e),{ref_key:"tooltip",ref:c,visible:l(V),placement:L.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":L.tooltipClass,disabled:!l(v),persistent:l(i)},{content:ke(()=>[Z("span",null,Re(l($)),1)]),default:ke(()=>[Z("div",{class:_([l(u).e("button"),{hover:l(E),dragging:l(k)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Ce=Me(lt,[["__file","button.vue"]]);const at=be({mark:{type:te([String,Object]),default:void 0}});var nt=ne({name:"ElSliderMarker",props:at,setup(e){const t=he("slider"),d=f(()=>Ee(e.mark)?e.mark:e.mark.label),a=f(()=>Ee(e.mark)?void 0:e.mark.style);return()=>Fe("div",{class:t.e("marks-text"),style:a.value},d.value)}});const ot=(e,t,d)=>{const{form:a,formItem:u}=je(),m=Ke(),i=Q(),h=Q(),y={firstButton:i,secondButton:h},c=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(t.firstValue,t.secondValue)),n=f(()=>Math.max(t.firstValue,t.secondValue)),V=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),T=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),$=f(()=>e.vertical?{height:e.height}:{}),z=f(()=>e.vertical?{height:V.value,bottom:T.value}:{width:V.value,left:T.value}),M=()=>{m.value&&(t.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},I=s=>{const b=e.min+s*(e.max-e.min)/100;if(!e.range)return i;let w;return Math.abs(v.value-b)<Math.abs(n.value-b)?w=t.firstValue<t.secondValue?"firstButton":"secondButton":w=t.firstValue>t.secondValue?"firstButton":"secondButton",y[w]},S=s=>{const b=I(s);return b.value.setPosition(s),b},F=s=>{t.firstValue=s??e.min,k(e.range?[v.value,n.value]:s??e.min)},E=s=>{t.secondValue=s,e.range&&k([v.value,n.value])},k=s=>{d(oe,s),d(ye,s)},L=async()=>{await ce(),d(Te,e.range?[v.value,n.value]:e.modelValue)},W=s=>{var b,w,H,G,q,A;if(c.value||t.dragging)return;M();let p=0;if(e.vertical){const B=(H=(w=(b=s.touches)==null?void 0:b.item(0))==null?void 0:w.clientY)!=null?H:s.clientY;p=(m.value.getBoundingClientRect().bottom-B)/t.sliderSize*100}else{const B=(A=(q=(G=s.touches)==null?void 0:G.item(0))==null?void 0:q.clientX)!=null?A:s.clientX,x=m.value.getBoundingClientRect().left;p=(B-x)/t.sliderSize*100}if(!(p<0||p>100))return S(p)};return{elFormItem:u,slider:m,firstButton:i,secondButton:h,sliderDisabled:c,minValue:v,maxValue:n,runwayStyle:$,barStyle:z,resetSize:M,setPosition:S,emitChange:L,onSliderWrapperPrevent:s=>{var b,w;((b=y.firstButton.value)!=null&&b.dragging||(w=y.secondButton.value)!=null&&w.dragging)&&s.preventDefault()},onSliderClick:s=>{W(s)&&L()},onSliderDown:async s=>{const b=W(s);b&&(await ce(),b.value.onButtonDown(s))},onSliderMarkerDown:s=>{if(c.value||t.dragging)return;S(s)&&L()},setFirstValue:F,setSecondValue:E}},rt=(e,t,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,h=100*e.step/(e.max-e.min),y=Array.from({length:i-1}).map((c,v)=>(v+1)*h);return e.range?y.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):y.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),st=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),ut=(e,t,d,a,u,m)=>{const i=c=>{u(oe,c),u(ye,c)},h=()=>e.range?![d.value,a.value].every((c,v)=>c===t.oldValue[v]):e.modelValue!==t.oldValue,y=()=>{var c,v;e.min>e.max&&Ye("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&le(n)?n[1]<e.min?i([e.min,e.min]):n[0]>e.max?i([e.max,e.max]):n[0]<e.min?i([e.min,n[1]]):n[1]>e.max?i([n[0],e.max]):(t.firstValue=n[0],t.secondValue=n[1],h()&&(e.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(V=>Be())),t.oldValue=n.slice())):!e.range&&ae(n)&&!Number.isNaN(n)&&(n<e.min?i(e.min):n>e.max?i(e.max):(t.firstValue=n,h()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(V=>Be())),t.oldValue=n)))};y(),ie(()=>t.dragging,c=>{c||y()}),ie(()=>e.modelValue,(c,v)=>{t.dragging||le(c)&&le(v)&&c.every((n,V)=>n===v[V])&&t.firstValue===c[0]&&t.secondValue===c[1]||y()},{deep:!0}),ie(()=>[e.min,e.max],()=>{y()})},it=(e,t,d)=>{const a=Q();return Xe(async()=>{e.range?(le(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),de(window,"resize",d),await ce(),d()}),{sliderWrapper:a}},dt=ne({name:"ElSlider"}),ct=ne({...dt,props:qe,emits:Je,setup(e,{expose:t,emit:d}){const a=e,u=he("slider"),{t:m}=$e(),i=Pe({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:y,firstButton:c,secondButton:v,sliderDisabled:n,minValue:V,maxValue:T,runwayStyle:$,barStyle:z,resetSize:M,emitChange:I,onSliderWrapperPrevent:S,onSliderClick:F,onSliderDown:E,onSliderMarkerDown:k,setFirstValue:L,setSecondValue:W}=ot(a,i,d),{stops:re,getStopStyle:U}=rt(a,i,V,T),{inputId:K,isLabeledByFormItem:O}=He(a,{formItemContext:h}),s=Ge(),b=f(()=>a.inputSize||s.value),w=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),H=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):w.value),G=f(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),q=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),A=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),p=f(()=>[u.b(),u.m(s.value),u.is("vertical",a.vertical),{[u.m("with-input")]:a.showInput}]),B=st(a);ut(a,i,V,T,d,h);const x=f(()=>{const r=[a.min,a.max,a.step].map(Ve=>{const D=`${Ve}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,r)}),{sliderWrapper:P}=it(a,i,M),{firstValue:o,secondValue:g,sliderSize:N}=ge(i),Y=r=>{i.dragging=r};return de(P,"touchstart",S,{passive:!1}),de(P,"touchmove",S,{passive:!1}),We(ze,{...ge(a),sliderSize:N,disabled:n,precision:x,emitChange:I,resetSize:M,updateDragging:Y}),t({onSliderClick:F}),(r,Ve)=>{var D,we;return C(),R("div",{id:r.range?l(K):void 0,ref_key:"sliderWrapper",ref:P,class:_(l(p)),role:r.range?"group":void 0,"aria-label":r.range&&!l(O)?l(w):void 0,"aria-labelledby":r.range&&l(O)?(D=l(h))==null?void 0:D.labelId:void 0},[Z("div",{ref_key:"slider",ref:y,class:_([l(u).e("runway"),{"show-input":r.showInput&&!r.range},l(u).is("disabled",l(n))]),style:J(l($)),onMousedown:l(E),onTouchstartPassive:l(E)},[Z("div",{class:_(l(u).e("bar")),style:J(l(z))},null,6),Ne(Ce,{id:r.range?void 0:l(K),ref_key:"firstButton",ref:c,"model-value":l(o),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":r.range||!l(O)?l(H):void 0,"aria-labelledby":!r.range&&l(O)?(we=l(h))==null?void 0:we.labelId:void 0,"aria-valuemin":r.min,"aria-valuemax":r.range?l(g):r.max,"aria-valuenow":l(o),"aria-valuetext":l(G),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(L)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),r.range?(C(),me(Ce,{key:0,ref_key:"secondButton",ref:v,"model-value":l(g),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":l(q),"aria-valuemin":l(o),"aria-valuemax":r.max,"aria-valuenow":l(g),"aria-valuetext":l(A),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(W)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):se("v-if",!0),r.showStops?(C(),R("div",{key:1},[(C(!0),R(ue,null,ve(l(re),(j,ee)=>(C(),R("div",{key:ee,class:_(l(u).e("stop")),style:J(l(U)(j))},null,6))),128))])):se("v-if",!0),l(B).length>0?(C(),R(ue,{key:2},[Z("div",null,[(C(!0),R(ue,null,ve(l(B),(j,ee)=>(C(),R("div",{key:ee,style:J(l(U)(j.position)),class:_([l(u).e("stop"),l(u).e("marks-stop")])},null,6))),128))]),Z("div",{class:_(l(u).e("marks"))},[(C(!0),R(ue,null,ve(l(B),(j,ee)=>(C(),me(l(nt),{key:ee,mark:j.mark,style:J(l(U)(j.position)),onMousedown:Ue(vt=>l(k)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):se("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),r.showInput&&!r.range?(C(),me(l(Ae),{key:0,ref:"input","model-value":l(o),class:_(l(u).e("input")),step:r.step,disabled:l(n),controls:r.showInputControls,min:r.min,max:r.max,precision:l(x),debounce:r.debounce,size:l(b),"onUpdate:modelValue":l(L),onChange:l(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):se("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var mt=Me(ct,[["__file","slider.vue"]]);const wt=Oe(mt);export{wt as E};
