import{d as R,u as j,r as L,h as F,a3 as U,b as k,o as u,f as n,w as a,e as v,a as i,t as q,c as f,j as b,_ as z}from"./index-C1LNxWrc.js";import{E as A,a as G}from"./table-column-QOtjyKSd.js";import"./checkbox-D429Hkk4.js";import"./scrollbar-CWDB5A-B.js";import{E as H}from"./popover-DP0DHMQv.js";import{E as J}from"./button-CfgjJGa2.js";import{E as K}from"./progress-D7FpNBk1.js";/* empty css            */import{E as O}from"./card-bOHwtd_N.js";import{s as y,g as Q}from"./storage-2nKQMLp0.js";import{E as W}from"./index-gsKI2Iim.js";import{E as d}from"./index-JFsgmBjq.js";import"./index-DRLRXOGd.js";import"./_initCloneObject-T9RaIEd1.js";import"./isPlainObject-BS8VhLgB.js";import"./_baseIteratee-CNffayvf.js";import"./isEqual-CFwnnDW_.js";import"./debounce-C4p0xsPh.js";import"./use-form-common-props-dMO5F-Xy.js";const X={class:"task-list-page"},Y={class:"flex items-center justify-between"},Z={key:1},ee=R({__name:"task-list",setup(te){const g=j(),r=L([]);let m;function h(){return[{id:"1",taskName:"llama2-customer-service",description:"客服对话微调任务",baseModel:"llama-2-7b",dataset:"custom-chat-v1",status:"completed",progress:100,createTime:"2024-01-15 10:00:00",learningRate:1e-4,epochs:3},{id:"2",taskName:"chatglm-financial",description:"金融领域微调",baseModel:"chatglm-6b",dataset:"finance-dataset",status:"running",progress:65,createTime:"2024-01-15 14:30:00",learningRate:2e-4,epochs:5}]}function E(e){return{pending:"info",running:"warning",completed:"success",failed:"danger"}[e]||"info"}function C(e){return{pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"}[e]||e}function T(){g.push("/model-finetune/create-task")}function w(e){y("current-finetune-task",e),g.push("/model-finetune/task-detail")}function x(e){e.status="running",e.progress=0,p(),d.success("任务已启动")}function N(e){e.status="pending",p(),d.warning("任务已停止")}function M(e){const t={...e,id:Date.now().toString(),taskName:`${e.taskName}-copy`,status:"pending",progress:0,createTime:new Date().toLocaleString()};r.value.unshift(t),p(),d.success("任务已复制")}function S(e){r.value=r.value.filter(t=>t.id!==e),p(),d.success("任务已删除")}function p(){y("finetune-tasks",r.value)}function $(){const e=Q("finetune-tasks",[]);r.value=e.length>0?e:h()}function B(){m=window.setInterval(()=>{r.value.forEach(e=>{e.status==="running"&&e.progress<100&&(e.progress=Math.min(e.progress+Math.floor(Math.random()*5+1),100),e.progress===100&&(e.status="completed"))}),p()},2e3)}return F(()=>{$(),B()}),U(()=>{m&&clearInterval(m)}),(e,t)=>{const l=J,_=O,o=G,D=W,I=K,V=H,P=A;return u(),k("div",X,[n(_,{class:"header-card"},{default:a(()=>[v("div",Y,[t[1]||(t[1]=v("h2",{class:"text-2xl font-bold"}," 微调任务列表 ",-1)),n(l,{type:"primary",onClick:T},{default:a(()=>t[0]||(t[0]=[i(" 创建微调任务 ",-1)])),_:1,__:[0]})])]),_:1}),n(_,{class:"mt-4"},{default:a(()=>[n(P,{data:r.value,stripe:""},{default:a(()=>[n(o,{prop:"taskName",label:"任务名称",width:"200"}),n(o,{prop:"description",label:"任务描述","min-width":"200","show-overflow-tooltip":""}),n(o,{prop:"baseModel",label:"基座模型",width:"150"}),n(o,{prop:"dataset",label:"数据集",width:"180"}),n(o,{label:"状态",width:"120",align:"center"},{default:a(({row:s})=>[n(D,{type:E(s.status)},{default:a(()=>[i(q(C(s.status)),1)]),_:2},1032,["type"])]),_:1}),n(o,{label:"进度",width:"180"},{default:a(({row:s})=>[s.status==="running"?(u(),f(I,{key:0,percentage:s.progress,status:s.progress===100?"success":""},null,8,["percentage","status"])):(u(),k("span",Z,"-"))]),_:1}),n(o,{prop:"createTime",label:"创建时间",width:"180"}),n(o,{label:"操作",width:"250",fixed:"right"},{default:a(({row:s})=>[n(l,{link:"",type:"primary",onClick:c=>w(s)},{default:a(()=>t[2]||(t[2]=[i(" 详情 ",-1)])),_:2,__:[2]},1032,["onClick"]),s.status==="pending"?(u(),f(l,{key:0,link:"",type:"success",onClick:c=>x(s)},{default:a(()=>t[3]||(t[3]=[i(" 启动 ",-1)])),_:2,__:[3]},1032,["onClick"])):b("",!0),s.status==="running"?(u(),f(l,{key:1,link:"",type:"warning",onClick:c=>N(s)},{default:a(()=>t[4]||(t[4]=[i(" 停止 ",-1)])),_:2,__:[4]},1032,["onClick"])):b("",!0),n(l,{link:"",onClick:c=>M(s)},{default:a(()=>t[5]||(t[5]=[i(" 复制 ",-1)])),_:2,__:[5]},1032,["onClick"]),n(V,{title:"确定要删除此任务吗？",onConfirm:c=>S(s.id)},{reference:a(()=>[n(l,{link:"",type:"danger"},{default:a(()=>t[6]||(t[6]=[i(" 删除 ",-1)])),_:1,__:[6]})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),he=z(ee,[["__scopeId","data-v-96fd13de"]]);export{he as default};
