import{d as J,r as O,j as P,a3 as R,c as k,a as n,w as a,o as u,b as v,i,n as j,l as f,m as b,u as F}from"./index-DAZDpghP.js";import{a as L,E as U}from"./table-column-CkszfM6q.js";import"./checkbox-DDntw5na.js";import"./scrollbar-BKn1N4ug.js";import{E as q}from"./popover--wAAUrH1.js";import{E as z}from"./button-CFFx6FdR.js";import{E as A}from"./progress-CA3fGClE.js";/* empty css            */import{E as G}from"./card-_e8Y2itV.js";import{E as H}from"./index-i9SNigSW.js";import{E as m}from"./index-B4p_U5VT.js";import"./event-D5_Wo8Xc.js";import"./isPlainObject-CnEW4LJ3.js";import"./_baseIteratee-DgY2c_zD.js";import"./isEqual-DlB8YXyV.js";import"./debounce-Bv_84CHO.js";import"./index-17xiCnpu.js";const K={class:"task-list-page p-5"},Q={class:"flex items-center justify-between"},W={key:1},ge=J({__name:"task-list",setup(X){const g=F(),r=O([]);let d;function y(){return[{id:"1",taskName:"llama2-customer-service",description:"客服对话微调任务",baseModel:"llama-2-7b",dataset:"custom-chat-v1",status:"completed",progress:100,createTime:"2024-01-15 10:00:00",learningRate:1e-4,epochs:3},{id:"2",taskName:"chatglm-financial",description:"金融领域微调",baseModel:"chatglm-6b",dataset:"finance-dataset",status:"running",progress:65,createTime:"2024-01-15 14:30:00",learningRate:2e-4,epochs:5}]}function E(e){return{pending:"info",running:"warning",completed:"success",failed:"danger"}[e]||"info"}function C(e){return{pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"}[e]||e}function T(){g.push("/model-finetune/create-task")}function h(e){localStorage.setItem("current-finetune-task",JSON.stringify(e)),g.push("/model-finetune/task-detail")}function w(e){e.status="running",e.progress=0,p(),m.success("任务已启动")}function N(e){e.status="pending",p(),m.warning("任务已停止")}function S(e){const t={...e,id:Date.now().toString(),taskName:`${e.taskName}-copy`,status:"pending",progress:0,createTime:new Date().toLocaleString()};r.value.unshift(t),p(),m.success("任务已复制")}function x(e){r.value=r.value.filter(t=>t.id!==e),p(),m.success("任务已删除")}function p(){localStorage.setItem("finetune-tasks",JSON.stringify(r.value))}function M(){const e=localStorage.getItem("finetune-tasks");r.value=e?JSON.parse(e):y()}function I(){d=window.setInterval(()=>{r.value.forEach(e=>{e.status==="running"&&e.progress<100&&(e.progress=Math.min(e.progress+Math.floor(Math.random()*5+1),100),e.progress===100&&(e.status="completed"))}),p()},2e3)}return P(()=>{M(),I()}),R(()=>{d&&clearInterval(d)}),(e,t)=>{const l=z,_=G,o=U,$=H,B=A,D=q,V=L;return u(),k("div",K,[n(_,{class:"header-card"},{default:a(()=>[v("div",Q,[t[1]||(t[1]=v("h2",{class:"text-2xl font-bold"},"微调任务列表",-1)),n(l,{type:"primary",onClick:T},{default:a(()=>t[0]||(t[0]=[i(" 创建微调任务 ",-1)])),_:1,__:[0]})])]),_:1}),n(_,{class:"mt-4"},{default:a(()=>[n(V,{data:r.value,stripe:""},{default:a(()=>[n(o,{prop:"taskName",label:"任务名称",width:"200"}),n(o,{prop:"description",label:"任务描述","min-width":"200","show-overflow-tooltip":""}),n(o,{prop:"baseModel",label:"基座模型",width:"150"}),n(o,{prop:"dataset",label:"数据集",width:"180"}),n(o,{label:"状态",width:"120",align:"center"},{default:a(({row:s})=>[n($,{type:E(s.status)},{default:a(()=>[i(j(C(s.status)),1)]),_:2},1032,["type"])]),_:1}),n(o,{label:"进度",width:"180"},{default:a(({row:s})=>[s.status==="running"?(u(),f(B,{key:0,percentage:s.progress,status:s.progress===100?"success":""},null,8,["percentage","status"])):(u(),k("span",W,"-"))]),_:1}),n(o,{prop:"createTime",label:"创建时间",width:"180"}),n(o,{label:"操作",width:"250",fixed:"right"},{default:a(({row:s})=>[n(l,{link:"",type:"primary",onClick:c=>h(s)},{default:a(()=>t[2]||(t[2]=[i(" 详情 ",-1)])),_:2,__:[2]},1032,["onClick"]),s.status==="pending"?(u(),f(l,{key:0,link:"",type:"success",onClick:c=>w(s)},{default:a(()=>t[3]||(t[3]=[i(" 启动 ",-1)])),_:2,__:[3]},1032,["onClick"])):b("",!0),s.status==="running"?(u(),f(l,{key:1,link:"",type:"warning",onClick:c=>N(s)},{default:a(()=>t[4]||(t[4]=[i(" 停止 ",-1)])),_:2,__:[4]},1032,["onClick"])):b("",!0),n(l,{link:"",onClick:c=>S(s)},{default:a(()=>t[5]||(t[5]=[i(" 复制 ",-1)])),_:2,__:[5]},1032,["onClick"]),n(D,{title:"确定要删除此任务吗？",onConfirm:c=>x(s.id)},{reference:a(()=>[n(l,{link:"",type:"danger"},{default:a(()=>t[6]||(t[6]=[i(" 删除 ",-1)])),_:1,__:[6]})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})])}}});export{ge as default};
