import{d as x,r as E,c as g,a as l,w as o,o as c,b as y,i as m,l as v,u as R}from"./index-BX2sZVyW.js";import{E as B}from"./card-B6phTZGW.js";import{E as N,a as S}from"./form-item-BCUJoI1X.js";import{E as U}from"./button-Cn9gqGCu.js";import{E as A}from"./input-5aB7ALv6.js";import{E as L}from"./input-number-cfQWrT64.js";/* empty css            */import{E as T,a as D}from"./select-9k77N6f3.js";import"./scrollbar-C9NSq6wy.js";import{E as M}from"./divider-Cw9FL3-C.js";import"./event-BORzi4vc.js";import"./_baseClone-BOpOh07B.js";import"./index-PwB6y63X.js";import"./index-BDj3Pv7k.js";import"./index-BFcHm1-Q.js";import"./strings-JcT2fde-.js";import"./isEqual-ohjdCfDM.js";import"./scroll-g5r06U3K.js";import"./debounce-DYp1oJWc.js";const C={class:"create-task-page p-5"},ae=x({__name:"create-task",setup(h){const i=R(),a=E({taskName:"",description:"",baseModel:"",dataset:"",learningRate:1e-4,epochs:3,batchSize:8,loraRank:8,loraAlpha:16,loraDropout:.1,maxTokens:2048});function _(){if(!a.value.taskName||!a.value.baseModel||!a.value.dataset){v.warning("请填写必填项");return}const r=localStorage.getItem("finetune-tasks"),e=r?JSON.parse(r):[],d={id:Date.now().toString(),...a.value,status:"pending",progress:0,createTime:new Date().toLocaleString()};e.unshift(d),localStorage.setItem("finetune-tasks",JSON.stringify(e)),v.success("微调任务创建成功"),i.push("/model-finetune/task-list")}function V(){i.back()}return(r,e)=>{const d=M,p=A,n=S,u=D,f=T,s=L,b=U,k=N,w=B;return c(),g("div",C,[l(w,null,{default:o(()=>[e[16]||(e[16]=y("h2",{class:"text-2xl font-bold mb-4"},"创建微调任务 (LoRA)",-1)),l(k,{model:a.value,"label-width":"150px"},{default:o(()=>[l(d,{"content-position":"left"},{default:o(()=>e[11]||(e[11]=[m(" 基础信息 ",-1)])),_:1,__:[11]}),l(n,{label:"任务名称",required:""},{default:o(()=>[l(p,{modelValue:a.value.taskName,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.taskName=t),placeholder:"请输入任务名称",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"任务描述"},{default:o(()=>[l(p,{modelValue:a.value.description,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.description=t),type:"textarea",rows:3,placeholder:"请输入任务描述",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(d,{"content-position":"left"},{default:o(()=>e[12]||(e[12]=[m(" 模型配置 ",-1)])),_:1,__:[12]}),l(n,{label:"基座模型",required:""},{default:o(()=>[l(f,{modelValue:a.value.baseModel,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.baseModel=t),placeholder:"选择基座模型",style:{width:"100%"}},{default:o(()=>[l(u,{label:"Llama-2-7B",value:"llama-2-7b"}),l(u,{label:"ChatGLM-6B",value:"chatglm-6b"}),l(u,{label:"Qwen-7B",value:"qwen-7b"}),l(u,{label:"Baichuan-13B",value:"baichuan-13b"})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"微调数据集",required:""},{default:o(()=>[l(f,{modelValue:a.value.dataset,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.dataset=t),placeholder:"选择数据集",style:{width:"100%"}},{default:o(()=>[l(u,{label:"自定义对话数据集-v1",value:"custom-chat-v1"}),l(u,{label:"指令微调数据集",value:"instruction-dataset"}),l(u,{label:"金融领域数据集",value:"finance-dataset"})]),_:1},8,["modelValue"])]),_:1}),l(d,{"content-position":"left"},{default:o(()=>e[13]||(e[13]=[m(" 微调参数 ",-1)])),_:1,__:[13]}),l(n,{label:"Learning Rate"},{default:o(()=>[l(s,{modelValue:a.value.learningRate,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.learningRate=t),min:1e-5,max:.01,step:1e-5,precision:5,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"Number of Epochs"},{default:o(()=>[l(s,{modelValue:a.value.epochs,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.epochs=t),min:1,max:20,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"Batch Size"},{default:o(()=>[l(s,{modelValue:a.value.batchSize,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.batchSize=t),min:1,max:128,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"LoRA Rank"},{default:o(()=>[l(s,{modelValue:a.value.loraRank,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.loraRank=t),min:1,max:256,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"LoRA Alpha"},{default:o(()=>[l(s,{modelValue:a.value.loraAlpha,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.loraAlpha=t),min:1,max:512,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"LoRA Dropout"},{default:o(()=>[l(s,{modelValue:a.value.loraDropout,"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.loraDropout=t),min:0,max:1,step:.1,precision:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,{label:"Max Tokens"},{default:o(()=>[l(s,{modelValue:a.value.maxTokens,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.maxTokens=t),min:512,max:4096,step:512,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(n,null,{default:o(()=>[l(b,{type:"primary",onClick:_},{default:o(()=>e[14]||(e[14]=[m(" 创建任务 ",-1)])),_:1,__:[14]}),l(b,{onClick:V},{default:o(()=>e[15]||(e[15]=[m(" 取消 ",-1)])),_:1,__:[15]})]),_:1})]),_:1},8,["model"])]),_:1,__:[16]})])}}});export{ae as default};
