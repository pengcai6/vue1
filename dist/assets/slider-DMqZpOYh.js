import{a4 as ae,l as le,n as be,aR as Ie,p as te,aS as Me,aT as Se,P as Fe,r as J,y as f,W as ie,aU as de,aE as ce,aM as Y,s as Pe,d as ne,x as he,a7 as Le,aV as ge,b as R,o as C,f as Ne,w as ke,e as q,D as _,C as l,t as Re,ad as _e,I as Z,am as Ee,ae as pe,Q as Xe,k as Ke,X as Be,h as Ye,v as We,Z as $e,c as me,j as re,F as ue,A as ve,G as Ue,a2 as Oe}from"./index-C1LNxWrc.js";import{E as Ae}from"./input-number-BdlakYFh.js";import{C as Te,I as Ve,U as oe,u as je,a as He}from"./index-DRLRXOGd.js";import{d as xe}from"./debounce-C4p0xsPh.js";import{a as Ge}from"./use-form-common-props-dMO5F-Xy.js";const ze=Symbol("sliderContextKey"),Qe=be({modelValue:{type:te([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Se,inputSize:Se,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:te(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:te(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Me,default:"top"},marks:{type:te(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ie(["ariaLabel"])}),fe=e=>ae(e)||le(e)&&e.every(ae),Ze={[oe]:fe,[Ve]:fe,[Te]:fe},qe=be({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Me,default:"top"}}),Je={[oe]:e=>ae(e)},De=(e,t,d)=>{const a=J(),u=J(!1),m=f(()=>t.value instanceof Function),i=f(()=>m.value&&t.value(e.modelValue)||e.modelValue),h=xe(()=>{d.value&&(u.value=!0)},50),V=xe(()=>{d.value&&(u.value=!1)},50);return{tooltip:a,tooltipVisible:u,formatValue:i,displayTooltip:h,hideTooltip:V}},et=(e,t,d)=>{const{disabled:a,min:u,max:m,step:i,showTooltip:h,persistent:V,precision:c,sliderSize:v,formatTooltip:n,emitChange:y,resetSize:T,updateDragging:W}=Fe(ze),{tooltip:z,tooltipVisible:P,formatValue:I,displayTooltip:S,hideTooltip:p}=De(e,n,h),E=J(),k=f(()=>`${(e.modelValue-u.value)/(m.value-u.value)*100}%`),M=f(()=>e.vertical?{bottom:k.value}:{left:k.value}),$=()=>{t.hovering=!0,S()},se=()=>{t.hovering=!1,t.dragging||p()},U=o=>{a.value||(o.preventDefault(),F(o),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),window.addEventListener("contextmenu",x),E.value.focus())},X=o=>{a.value||(t.newPosition=Number.parseFloat(k.value)+o/(m.value-u.value)*100,L(t.newPosition),y())},O=()=>{X(-i.value)},r=()=>{X(i.value)},b=()=>{X(-i.value*4)},w=()=>{X(i.value*4)},H=()=>{a.value||(L(0),y())},G=()=>{a.value||(L(100),y())},Q=o=>{let g=!0;switch(o.code){case Y.left:case Y.down:O();break;case Y.right:case Y.up:r();break;case Y.home:H();break;case Y.end:G();break;case Y.pageDown:b();break;case Y.pageUp:w();break;default:g=!1;break}g&&o.preventDefault()},A=o=>{let g,N;return o.type.startsWith("touch")?(N=o.touches[0].clientY,g=o.touches[0].clientX):(N=o.clientY,g=o.clientX),{clientX:g,clientY:N}},F=o=>{t.dragging=!0,t.isClick=!0;const{clientX:g,clientY:N}=A(o);e.vertical?t.startY=N:t.startX=g,t.startPosition=Number.parseFloat(k.value),t.newPosition=t.startPosition},B=o=>{if(t.dragging){t.isClick=!1,S(),T();let g;const{clientX:N,clientY:K}=A(o);e.vertical?(t.currentY=K,g=(t.startY-t.currentY)/v.value*100):(t.currentX=N,g=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+g,L(t.newPosition)}},x=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||p(),t.isClick||L(t.newPosition),y()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),window.removeEventListener("contextmenu",x))},L=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const g=100/((m.value-u.value)/i.value);let K=Math.round(o/g)*g*(m.value-u.value)*.01+u.value;K=Number.parseFloat(K.toFixed(c.value)),K!==e.modelValue&&d(oe,K),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await ce(),t.dragging&&S(),z.value.updatePopper()};return ie(()=>t.dragging,o=>{W(o)}),de(E,"touchstart",U,{passive:!1}),{disabled:a,button:E,tooltip:z,tooltipVisible:P,showTooltip:h,persistent:V,wrapperStyle:M,formatValue:I,handleMouseEnter:$,handleMouseLeave:se,onButtonDown:U,onKeyDown:Q,setPosition:L}},tt=ne({name:"ElSliderButton"}),lt=ne({...tt,props:qe,emits:Je,setup(e,{expose:t,emit:d}){const a=e,u=he("slider"),m=Le({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),i=f(()=>v.value?n.value:!1),{disabled:h,button:V,tooltip:c,showTooltip:v,persistent:n,tooltipVisible:y,wrapperStyle:T,formatValue:W,handleMouseEnter:z,handleMouseLeave:P,onButtonDown:I,onKeyDown:S,setPosition:p}=et(a,m,d),{hovering:E,dragging:k}=ge(m);return t({onButtonDown:I,onKeyDown:S,setPosition:p,hovering:E,dragging:k}),(M,$)=>(C(),R("div",{ref_key:"button",ref:V,class:_([l(u).e("button-wrapper"),{hover:l(E),dragging:l(k)}]),style:Z(l(T)),tabindex:l(h)?-1:0,onMouseenter:l(z),onMouseleave:l(P),onMousedown:l(I),onFocus:l(z),onBlur:l(P),onKeydown:l(S)},[Ne(l(_e),{ref_key:"tooltip",ref:c,visible:l(y),placement:M.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":M.tooltipClass,disabled:!l(v),persistent:l(i)},{content:ke(()=>[q("span",null,Re(l(W)),1)]),default:ke(()=>[q("div",{class:_([l(u).e("button"),{hover:l(E),dragging:l(k)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Ce=Pe(lt,[["__file","button.vue"]]);const at=be({mark:{type:te([String,Object]),default:void 0}});var nt=ne({name:"ElSliderMarker",props:at,setup(e){const t=he("slider"),d=f(()=>Ee(e.mark)?e.mark:e.mark.label),a=f(()=>Ee(e.mark)?void 0:e.mark.style);return()=>pe("div",{class:t.e("marks-text"),style:a.value},d.value)}});const ot=(e,t,d)=>{const{form:a,formItem:u}=je(),m=Xe(),i=J(),h=J(),V={firstButton:i,secondButton:h},c=f(()=>e.disabled||a?.disabled||!1),v=f(()=>Math.min(t.firstValue,t.secondValue)),n=f(()=>Math.max(t.firstValue,t.secondValue)),y=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),T=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),W=f(()=>e.vertical?{height:e.height}:{}),z=f(()=>e.vertical?{height:y.value,bottom:T.value}:{width:y.value,left:T.value}),P=()=>{m.value&&(t.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},I=r=>{const b=e.min+r*(e.max-e.min)/100;if(!e.range)return i;let w;return Math.abs(v.value-b)<Math.abs(n.value-b)?w=t.firstValue<t.secondValue?"firstButton":"secondButton":w=t.firstValue>t.secondValue?"firstButton":"secondButton",V[w]},S=r=>{const b=I(r);return b.value.setPosition(r),b},p=r=>{t.firstValue=r??e.min,k(e.range?[v.value,n.value]:r??e.min)},E=r=>{t.secondValue=r,e.range&&k([v.value,n.value])},k=r=>{d(oe,r),d(Ve,r)},M=async()=>{await ce(),d(Te,e.range?[v.value,n.value]:e.modelValue)},$=r=>{var b,w,H,G,Q,A;if(c.value||t.dragging)return;P();let F=0;if(e.vertical){const B=(H=(w=(b=r.touches)==null?void 0:b.item(0))==null?void 0:w.clientY)!=null?H:r.clientY;F=(m.value.getBoundingClientRect().bottom-B)/t.sliderSize*100}else{const B=(A=(Q=(G=r.touches)==null?void 0:G.item(0))==null?void 0:Q.clientX)!=null?A:r.clientX,x=m.value.getBoundingClientRect().left;F=(B-x)/t.sliderSize*100}if(!(F<0||F>100))return S(F)};return{elFormItem:u,slider:m,firstButton:i,secondButton:h,sliderDisabled:c,minValue:v,maxValue:n,runwayStyle:W,barStyle:z,resetSize:P,setPosition:S,emitChange:M,onSliderWrapperPrevent:r=>{var b,w;((b=V.firstButton.value)!=null&&b.dragging||(w=V.secondButton.value)!=null&&w.dragging)&&r.preventDefault()},onSliderClick:r=>{$(r)&&M()},onSliderDown:async r=>{const b=$(r);b&&(await ce(),b.value.onButtonDown(r))},onSliderMarkerDown:r=>{if(c.value||t.dragging)return;S(r)&&M()},setFirstValue:p,setSecondValue:E}},st=(e,t,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,h=100*e.step/(e.max-e.min),V=Array.from({length:i-1}).map((c,v)=>(v+1)*h);return e.range?V.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):V.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),rt=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),ut=(e,t,d,a,u,m)=>{const i=c=>{u(oe,c),u(Ve,c)},h=()=>e.range?![d.value,a.value].every((c,v)=>c===t.oldValue[v]):e.modelValue!==t.oldValue,V=()=>{var c,v;e.min>e.max&&Ke("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&le(n)?n[1]<e.min?i([e.min,e.min]):n[0]>e.max?i([e.max,e.max]):n[0]<e.min?i([e.min,n[1]]):n[1]>e.max?i([n[0],e.max]):(t.firstValue=n[0],t.secondValue=n[1],h()&&(e.validateEvent&&((c=m?.validate)==null||c.call(m,"change").catch(y=>Be())),t.oldValue=n.slice())):!e.range&&ae(n)&&!Number.isNaN(n)&&(n<e.min?i(e.min):n>e.max?i(e.max):(t.firstValue=n,h()&&(e.validateEvent&&((v=m?.validate)==null||v.call(m,"change").catch(y=>Be())),t.oldValue=n)))};V(),ie(()=>t.dragging,c=>{c||V()}),ie(()=>e.modelValue,(c,v)=>{t.dragging||le(c)&&le(v)&&c.every((n,y)=>n===v[y])&&t.firstValue===c[0]&&t.secondValue===c[1]||V()},{deep:!0}),ie(()=>[e.min,e.max],()=>{V()})},it=(e,t,d)=>{const a=J();return Ye(async()=>{e.range?(le(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),de(window,"resize",d),await ce(),d()}),{sliderWrapper:a}},dt=ne({name:"ElSlider"}),ct=ne({...dt,props:Qe,emits:Ze,setup(e,{expose:t,emit:d}){const a=e,u=he("slider"),{t:m}=We(),i=Le({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:V,firstButton:c,secondButton:v,sliderDisabled:n,minValue:y,maxValue:T,runwayStyle:W,barStyle:z,resetSize:P,emitChange:I,onSliderWrapperPrevent:S,onSliderClick:p,onSliderDown:E,onSliderMarkerDown:k,setFirstValue:M,setSecondValue:$}=ot(a,i,d),{stops:se,getStopStyle:U}=st(a,i,y,T),{inputId:X,isLabeledByFormItem:O}=He(a,{formItemContext:h}),r=Ge(),b=f(()=>a.inputSize||r.value),w=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),H=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):w.value),G=f(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),Q=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),A=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),F=f(()=>[u.b(),u.m(r.value),u.is("vertical",a.vertical),{[u.m("with-input")]:a.showInput}]),B=rt(a);ut(a,i,y,T,d,h);const x=f(()=>{const s=[a.min,a.max,a.step].map(ye=>{const D=`${ye}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,s)}),{sliderWrapper:L}=it(a,i,P),{firstValue:o,secondValue:g,sliderSize:N}=ge(i),K=s=>{i.dragging=s};return de(L,"touchstart",S,{passive:!1}),de(L,"touchmove",S,{passive:!1}),$e(ze,{...ge(a),sliderSize:N,disabled:n,precision:x,emitChange:I,resetSize:P,updateDragging:K}),t({onSliderClick:p}),(s,ye)=>{var D,we;return C(),R("div",{id:s.range?l(X):void 0,ref_key:"sliderWrapper",ref:L,class:_(l(F)),role:s.range?"group":void 0,"aria-label":s.range&&!l(O)?l(w):void 0,"aria-labelledby":s.range&&l(O)?(D=l(h))==null?void 0:D.labelId:void 0},[q("div",{ref_key:"slider",ref:V,class:_([l(u).e("runway"),{"show-input":s.showInput&&!s.range},l(u).is("disabled",l(n))]),style:Z(l(W)),onMousedown:l(E),onTouchstartPassive:l(E)},[q("div",{class:_(l(u).e("bar")),style:Z(l(z))},null,6),Ne(Ce,{id:s.range?void 0:l(X),ref_key:"firstButton",ref:c,"model-value":l(o),vertical:s.vertical,"tooltip-class":s.tooltipClass,placement:s.placement,role:"slider","aria-label":s.range||!l(O)?l(H):void 0,"aria-labelledby":!s.range&&l(O)?(we=l(h))==null?void 0:we.labelId:void 0,"aria-valuemin":s.min,"aria-valuemax":s.range?l(g):s.max,"aria-valuenow":l(o),"aria-valuetext":l(G),"aria-orientation":s.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(M)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),s.range?(C(),me(Ce,{key:0,ref_key:"secondButton",ref:v,"model-value":l(g),vertical:s.vertical,"tooltip-class":s.tooltipClass,placement:s.placement,role:"slider","aria-label":l(Q),"aria-valuemin":l(o),"aria-valuemax":s.max,"aria-valuenow":l(g),"aria-valuetext":l(A),"aria-orientation":s.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l($)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):re("v-if",!0),s.showStops?(C(),R("div",{key:1},[(C(!0),R(ue,null,ve(l(se),(j,ee)=>(C(),R("div",{key:ee,class:_(l(u).e("stop")),style:Z(l(U)(j))},null,6))),128))])):re("v-if",!0),l(B).length>0?(C(),R(ue,{key:2},[q("div",null,[(C(!0),R(ue,null,ve(l(B),(j,ee)=>(C(),R("div",{key:ee,style:Z(l(U)(j.position)),class:_([l(u).e("stop"),l(u).e("marks-stop")])},null,6))),128))]),q("div",{class:_(l(u).e("marks"))},[(C(!0),R(ue,null,ve(l(B),(j,ee)=>(C(),me(l(nt),{key:ee,mark:j.mark,style:Z(l(U)(j.position)),onMousedown:Ue(vt=>l(k)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):re("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),s.showInput&&!s.range?(C(),me(l(Ae),{key:0,ref:"input","model-value":l(o),class:_(l(u).e("input")),step:s.step,disabled:l(n),controls:s.showInputControls,min:s.min,max:s.max,precision:l(x),debounce:s.debounce,size:l(b),"onUpdate:modelValue":l(M),onChange:l(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):re("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var mt=Pe(ct,[["__file","slider.vue"]]);const yt=Oe(mt);export{yt as E};
