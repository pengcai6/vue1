import{d as h,r as v,j as N,c as S,a as o,m as T,n as V,w as r,o as b,b as y,p as g,i as u,l as E}from"./index-BX2sZVyW.js";import{E as B}from"./card-B6phTZGW.js";import{E as O,a as j}from"./table-column-DG__lvqo.js";import"./checkbox-B8dDd1Mj.js";import"./scrollbar-C9NSq6wy.js";import{E as x}from"./popover-RKPTbPoo.js";import{E as J}from"./button-Cn9gqGCu.js";/* empty css            */import"./divider-Cw9FL3-C.js";import{E as L}from"./page-header-BYBfeuC8.js";import{E as R}from"./index-BFcHm1-Q.js";import"./event-BORzi4vc.js";import"./isPlainObject-jZyBOBeK.js";import"./debounce-DYp1oJWc.js";import"./index-PwB6y63X.js";import"./isEqual-ohjdCfDM.js";const U={class:"dataset-detail-page p-5"},I={class:"text-2xl font-bold"},oe=h({__name:"dataset-detail",setup(M){const a=v(null),i=v([]);function k(){if(!a.value)return;const t=`dataset_versions_${a.value.id}`,e=localStorage.getItem(t);e?i.value=JSON.parse(e):(i.value=[{version:"v1.2",description:"增加500条新数据",status:"ready",dataCount:10500,createTime:"2024-01-15 10:00:00"},{version:"v1.1",description:"修复数据格式问题",status:"ready",dataCount:1e4,createTime:"2024-01-12 14:00:00"},{version:"v1.0",description:"初始版本",status:"ready",dataCount:1e4,createTime:"2024-01-10 10:00:00"}],_())}function _(){if(!a.value)return;const t=`dataset_versions_${a.value.id}`;localStorage.setItem(t,JSON.stringify(i.value))}function C(t){i.value=i.value.filter(e=>e.version!==t),_(),E.success(`版本 ${t} 已删除`)}function $(t){var c,p;const e=JSON.stringify({version:t.version,dataset:(c=a.value)==null?void 0:c.name,data:Array.from({length:10},(f,d)=>({id:d+1,instruction:`示例指令 ${d+1}`,input:`示例输入 ${d+1}`,output:`示例输出 ${d+1}`}))},null,2),m=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(m),l=document.createElement("a");l.href=n,l.download=`${(p=a.value)==null?void 0:p.name}-${t.version}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n),E.success("开始下载")}return N(()=>{const t=localStorage.getItem("current-dataset");a.value=t?JSON.parse(t):null,k()}),(t,e)=>{const m=L,n=O,l=R,c=J,p=x,f=j,d=B;return b(),S("div",U,[o(m,{onBack:e[0]||(e[0]=s=>t.$router.back())},{content:r(()=>{var s;return[y("span",I,g((s=a.value)==null?void 0:s.name),1)]}),_:1}),a.value?(b(),T(d,{key:0,class:"mt-4"},{default:r(()=>[e[3]||(e[3]=y("h3",{class:"font-bold mb-4"},"数据集版本列表",-1)),o(f,{data:i.value,border:""},{default:r(()=>[o(n,{prop:"version",label:"版本号",width:"120"}),o(n,{prop:"description",label:"版本描述","min-width":"200"}),o(n,{label:"状态",width:"100",align:"center"},{default:r(({row:s})=>[o(l,{type:s.status==="ready"?"success":"warning"},{default:r(()=>[u(g(s.status==="ready"?"就绪":"处理中"),1)]),_:2},1032,["type"])]),_:1}),o(n,{prop:"dataCount",label:"数据量",width:"120",align:"center"}),o(n,{prop:"createTime",label:"创建时间",width:"180"}),o(n,{label:"操作",width:"150"},{default:r(({row:s})=>[o(c,{link:"",type:"primary",onClick:w=>$(s)},{default:r(()=>e[1]||(e[1]=[u(" 下载 ",-1)])),_:2,__:[1]},1032,["onClick"]),o(p,{title:"确定删除?",onConfirm:w=>C(s.version)},{reference:r(()=>[o(c,{link:"",type:"danger"},{default:r(()=>e[2]||(e[2]=[u(" 删除 ",-1)])),_:1,__:[2]})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1,__:[3]})):V("",!0)])}}});export{oe as default};
