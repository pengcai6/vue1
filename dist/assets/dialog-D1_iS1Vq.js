import{n as oe,a6 as fe,U as K,s as ae,d as V,v as ve,P as Y,bp as ye,y,b as j,o as T,e as M,j as Z,z as D,D as b,C as e,t as me,f as U,w as p,c as G,a8 as ge,bq as be,E as pe,I as le,aX as Ce,p as Q,br as he,a5 as Ee,bs as Ie,a_ as H,r as S,bt as De,bu as Se,ac as we,b6 as Ae,l as Te,W as q,aE as Be,h as Pe,bv as x,au as ke,as as Fe,x as $e,ay as Le,a1 as ee,av as Oe,be as Ne,a0 as Re,ax as ze,bw as Me,Z as Ue,a2 as Ve}from"./index-C1LNxWrc.js";import{u as _e,a as je,E as qe,b as Ke}from"./index-DaWWsILK.js";import{U as se,b as Ze}from"./index-DRLRXOGd.js";const te=Symbol("dialogInjectionKey"),ne="dialog-fade",re=oe({center:Boolean,alignCenter:Boolean,closeIcon:{type:fe},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ge={close:()=>!0},Je=(...o)=>i=>{o.forEach(l=>{K(l)?l(i):l.value=i})},We=V({name:"ElDialogContent"}),Xe=V({...We,props:re,emits:Ge,setup(o,{expose:i}){const l=o,{t:L}=ve(),{Close:d}=be,{dialogRef:f,headerRef:C,bodyId:h,ns:t,style:u}=Y(te),{focusTrapRef:m}=Y(ye),g=y(()=>[t.b(),t.is("fullscreen",l.fullscreen),t.is("draggable",l.draggable),t.is("align-center",l.alignCenter),{[t.m("center")]:l.center}]),E=Je(m,f),c=y(()=>l.draggable),v=y(()=>l.overflow),{resetPosition:B,updatePosition:I}=_e(f,C,c,v);return i({resetPosition:B,updatePosition:I}),(n,O)=>(T(),j("div",{ref:e(E),class:b(e(g)),style:le(e(u)),tabindex:"-1"},[M("header",{ref_key:"headerRef",ref:C,class:b([e(t).e("header"),n.headerClass,{"show-close":n.showClose}])},[D(n.$slots,"header",{},()=>[M("span",{role:"heading","aria-level":n.ariaLevel,class:b(e(t).e("title"))},me(n.title),11,["aria-level"])]),n.showClose?(T(),j("button",{key:0,"aria-label":e(L)("el.dialog.close"),class:b(e(t).e("headerbtn")),type:"button",onClick:w=>n.$emit("close")},[U(e(pe),{class:b(e(t).e("close"))},{default:p(()=>[(T(),G(ge(n.closeIcon||e(d))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Z("v-if",!0)],2),M("div",{id:e(h),class:b([e(t).e("body"),n.bodyClass])},[D(n.$slots,"default")],10,["id"]),n.$slots.footer?(T(),j("footer",{key:0,class:b([e(t).e("footer"),n.footerClass])},[D(n.$slots,"footer")],2)):Z("v-if",!0)],6))}});var Ye=ae(Xe,[["__file","dialog-content.vue"]]);const Qe=oe({...re,appendToBody:Boolean,appendTo:{type:he.to.type,default:"body"},beforeClose:{type:Q(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:Q([String,Object]),default:ne}}),He={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[se]:o=>Ce(o),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},xe=(o,i)=>{var l;const d=Ee().emit,{nextZIndex:f}=Ie();let C="";const h=H(),t=H(),u=S(!1),m=S(!1),g=S(!1),E=S((l=o.zIndex)!=null?l:f());let c,v;const B=De("namespace",Se),I=y(()=>{const r={},s=`--${B.value}-dialog`;return o.fullscreen||(o.top&&(r[`${s}-margin-top`]=o.top),o.width&&(r[`${s}-width`]=we(o.width))),r}),n=y(()=>o.alignCenter?{display:"flex"}:{}),O=y(()=>{const r={name:o.transition,onAfterEnter:w,onBeforeLeave:k,onAfterLeave:P};if(Ae(o.transition)){const s={...o.transition},_=(z,ce)=>W=>{Te(z)?z.forEach(X=>{K(X)&&X(W)}):K(z)&&z(W),ce()};return s.onAfterEnter=_(s.onAfterEnter,w),s.onBeforeLeave=_(s.onBeforeLeave,k),s.onAfterLeave=_(s.onAfterLeave,P),s.name||(s.name=ne),s}return r});function w(){d("opened")}function P(){d("closed"),d(se,!1),o.destroyOnClose&&(g.value=!1)}function k(){d("close")}function A(){v?.(),c?.(),o.openDelay&&o.openDelay>0?{stop:c}=x(()=>a(),o.openDelay):a()}function F(){c?.(),v?.(),o.closeDelay&&o.closeDelay>0?{stop:v}=x(()=>N(),o.closeDelay):N()}function $(){function r(s){s||(m.value=!0,u.value=!1)}o.beforeClose?o.beforeClose(r):F()}function J(){o.closeOnClickModal&&$()}function a(){ke&&(u.value=!0)}function N(){u.value=!1}function R(){d("openAutoFocus")}function ie(){d("closeAutoFocus")}function de(r){var s;((s=r.detail)==null?void 0:s.focusReason)==="pointer"&&r.preventDefault()}o.lockScroll&&je(u);function ue(){o.closeOnPressEscape&&$()}return q(()=>o.zIndex,()=>{var r;E.value=(r=o.zIndex)!=null?r:f()}),q(()=>o.modelValue,r=>{var s;r?(m.value=!1,A(),g.value=!0,E.value=(s=o.zIndex)!=null?s:f(),Be(()=>{d("open"),i.value&&(i.value.parentElement.scrollTop=0,i.value.parentElement.scrollLeft=0,i.value.scrollTop=0)})):u.value&&F()}),q(()=>o.fullscreen,r=>{i.value&&(r?(C=i.value.style.transform,i.value.style.transform=""):i.value.style.transform=C)}),Pe(()=>{o.modelValue&&(u.value=!0,g.value=!0,A())}),{afterEnter:w,afterLeave:P,beforeLeave:k,handleClose:$,onModalClick:J,close:F,doClose:N,onOpenAutoFocus:R,onCloseAutoFocus:ie,onCloseRequested:ue,onFocusoutPrevented:de,titleId:h,bodyId:t,closed:m,style:I,overlayDialogStyle:n,rendered:g,visible:u,zIndex:E,transitionConfig:O}},eo=V({name:"ElDialog",inheritAttrs:!1}),oo=V({...eo,props:Qe,emits:He,setup(o,{expose:i}){const l=o,L=Fe();Ze({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},y(()=>!!L.title));const d=$e("dialog"),f=S(),C=S(),h=S(),{visible:t,titleId:u,bodyId:m,style:g,overlayDialogStyle:E,rendered:c,transitionConfig:v,zIndex:B,handleClose:I,onModalClick:n,onOpenAutoFocus:O,onCloseAutoFocus:w,onCloseRequested:P,onFocusoutPrevented:k}=xe(l,f);Ue(te,{dialogRef:f,headerRef:C,bodyId:m,ns:d,rendered:c,style:g});const A=Ke(n),F=y(()=>l.draggable&&!l.fullscreen),$=y(()=>l.modalPenetrable&&!l.modal&&!l.fullscreen);return i({visible:t,dialogContentRef:h,resetPosition:()=>{var a;(a=h.value)==null||a.resetPosition()},handleClose:I}),(a,N)=>(T(),G(e(Me),{to:a.appendTo,disabled:a.appendTo!=="body"?!1:!a.appendToBody},{default:p(()=>[U(Le,ee(e(v),{persisted:""}),{default:p(()=>{var R;return[Oe(U(e(qe),{"custom-mask-event":"",mask:a.modal,"overlay-class":[(R=a.modalClass)!=null?R:"",`${e(d).namespace.value}-modal-dialog`,e(d).is("penetrable",e($))],"z-index":e(B)},{default:p(()=>[M("div",{role:"dialog","aria-modal":"true","aria-label":a.title||void 0,"aria-labelledby":a.title?void 0:e(u),"aria-describedby":e(m),class:b(`${e(d).namespace.value}-overlay-dialog`),style:le(e(E)),onClick:e(A).onClick,onMousedown:e(A).onMousedown,onMouseup:e(A).onMouseup},[U(e(Ne),{loop:"",trapped:e(t),"focus-start-el":"container",onFocusAfterTrapped:e(O),onFocusAfterReleased:e(w),onFocusoutPrevented:e(k),onReleaseRequested:e(P)},{default:p(()=>[e(c)?(T(),G(Ye,ee({key:0,ref_key:"dialogContentRef",ref:h},a.$attrs,{center:a.center,"align-center":a.alignCenter,"close-icon":a.closeIcon,draggable:e(F),overflow:a.overflow,fullscreen:a.fullscreen,"header-class":a.headerClass,"body-class":a.bodyClass,"footer-class":a.footerClass,"show-close":a.showClose,title:a.title,"aria-level":a.headerAriaLevel,onClose:e(I)}),Re({header:p(()=>[a.$slots.title?D(a.$slots,"title",{key:1}):D(a.$slots,"header",{key:0,close:e(I),titleId:e(u),titleClass:e(d).e("title")})]),default:p(()=>[D(a.$slots,"default")]),_:2},[a.$slots.footer?{name:"footer",fn:p(()=>[D(a.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[ze,e(t)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var ao=ae(oo,[["__file","dialog.vue"]]);const no=Ve(ao);export{no as E};
