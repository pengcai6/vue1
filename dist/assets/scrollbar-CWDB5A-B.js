import{n as j,s as K,d as M,P as Z,x as J,k as te,r as v,y as k,Y as ae,aU as W,$ as Y,c as D,o as R,w as Q,av as le,e as $,G as oe,D as N,C as y,I,ax as se,ay as re,au as ne,b as ee,f as X,F as ie,a4 as L,aR as ce,p as ue,ac as F,W as V,aF as fe,aE as q,Z as ve,a7 as de,ch as me,h as pe,aI as he,j as be,z as ge,a8 as ye,b6 as Se,a2 as we}from"./index-C1LNxWrc.js";const T=4,ze={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ee=({move:h,size:d,bar:o})=>({[o.size]:d,transform:`translate${o.axis}(${h}%)`}),U=Symbol("scrollbarContextKey"),_e=j({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),He="Thumb",Te=M({__name:"thumb",props:_e,setup(h){const d=h,o=Z(U),l=J("scrollbar");o||te(He,"can not inject scrollbar context");const u=v(),m=v(),b=v({}),c=v(!1);let r=!1,n=!1,g=0,H=0,t=ne?document.onselectstart:null;const a=k(()=>ze[d.vertical?"vertical":"horizontal"]),p=k(()=>Ee({size:d.size,move:d.move,bar:a.value})),w=k(()=>u.value[a.value.offset]**2/o.wrapElement[a.value.scrollSize]/d.ratio/m.value[a.value.offset]),_=i=>{var f;if(i.stopPropagation(),i.ctrlKey||[1,2].includes(i.button))return;(f=window.getSelection())==null||f.removeAllRanges(),E(i);const e=i.currentTarget;e&&(b.value[a.value.axis]=e[a.value.offset]-(i[a.value.client]-e.getBoundingClientRect()[a.value.direction]))},z=i=>{if(!m.value||!u.value||!o.wrapElement)return;const f=Math.abs(i.target.getBoundingClientRect()[a.value.direction]-i[a.value.client]),e=m.value[a.value.offset]/2,s=(f-e)*100*w.value/u.value[a.value.offset];o.wrapElement[a.value.scroll]=s*o.wrapElement[a.value.scrollSize]/100},E=i=>{i.stopImmediatePropagation(),r=!0,g=o.wrapElement.scrollHeight,H=o.wrapElement.scrollWidth,document.addEventListener("mousemove",P),document.addEventListener("mouseup",C),t=document.onselectstart,document.onselectstart=()=>!1},P=i=>{if(!u.value||!m.value||r===!1)return;const f=b.value[a.value.axis];if(!f)return;const e=(u.value.getBoundingClientRect()[a.value.direction]-i[a.value.client])*-1,s=m.value[a.value.offset]-f,S=(e-s)*100*w.value/u.value[a.value.offset];a.value.scroll==="scrollLeft"?o.wrapElement[a.value.scroll]=S*H/100:o.wrapElement[a.value.scroll]=S*g/100},C=()=>{r=!1,b.value[a.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",C),B(),n&&(c.value=!1)},x=()=>{n=!1,c.value=!!d.size},O=()=>{n=!0,c.value=r};ae(()=>{B(),document.removeEventListener("mouseup",C)});const B=()=>{document.onselectstart!==t&&(document.onselectstart=t)};return W(Y(o,"scrollbarElement"),"mousemove",x),W(Y(o,"scrollbarElement"),"mouseleave",O),(i,f)=>(R(),D(re,{name:y(l).b("fade"),persisted:""},{default:Q(()=>[le($("div",{ref_key:"instance",ref:u,class:N([y(l).e("bar"),y(l).is(y(a).key)]),onMousedown:z,onClick:oe(()=>{},["stop"])},[$("div",{ref_key:"thumb",ref:m,class:N(y(l).e("thumb")),style:I(y(p)),onMousedown:_},null,38)],42,["onClick"]),[[se,i.always||c.value]])]),_:1},8,["name"]))}});var G=K(Te,[["__file","thumb.vue"]]);const ke=j({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Ce=M({__name:"bar",props:ke,setup(h,{expose:d}){const o=h,l=Z(U),u=v(0),m=v(0),b=v(""),c=v(""),r=v(1),n=v(1);return d({handleScroll:t=>{if(t){const a=t.offsetHeight-T,p=t.offsetWidth-T;m.value=t.scrollTop*100/a*r.value,u.value=t.scrollLeft*100/p*n.value}},update:()=>{const t=l?.wrapElement;if(!t)return;const a=t.offsetHeight-T,p=t.offsetWidth-T,w=a**2/t.scrollHeight,_=p**2/t.scrollWidth,z=Math.max(w,o.minSize),E=Math.max(_,o.minSize);r.value=w/(a-w)/(z/(a-z)),n.value=_/(p-_)/(E/(p-E)),c.value=z+T<a?`${z}px`:"",b.value=E+T<p?`${E}px`:""}}),(t,a)=>(R(),ee(ie,null,[X(G,{move:u.value,ratio:n.value,size:b.value,always:t.always},null,8,["move","ratio","size","always"]),X(G,{move:m.value,ratio:r.value,size:c.value,vertical:"",always:t.always},null,8,["move","ratio","size","always"])],64))}});var Le=K(Ce,[["__file","bar.vue"]]);const Re=j({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:ue([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ce(["ariaLabel","ariaOrientation"])}),Ne={"end-reached":h=>["left","right","top","bottom"].includes(h),scroll:({scrollTop:h,scrollLeft:d})=>[h,d].every(L)},Pe="ElScrollbar",xe=M({name:Pe}),Be=M({...xe,props:Re,emits:Ne,setup(h,{expose:d,emit:o}){const l=h,u=J("scrollbar");let m,b,c=0,r=0,n="";const g={bottom:!1,top:!1,right:!1,left:!1},H=v(),t=v(),a=v(),p=v(),w=k(()=>{const e={};return l.height&&(e.height=F(l.height)),l.maxHeight&&(e.maxHeight=F(l.maxHeight)),[l.wrapStyle,e]}),_=k(()=>[l.wrapClass,u.e("wrap"),{[u.em("wrap","hidden-default")]:!l.native}]),z=k(()=>[u.e("view"),l.viewClass]),E=e=>{var s;return(s=g[e])!=null?s:!1},P={top:"bottom",bottom:"top",left:"right",right:"left"},C=e=>{const s=P[n];if(!s)return;const S=e[n],A=e[s];S&&!g[n]&&(g[n]=!0),!A&&g[s]&&(g[s]=!1)},x=()=>{var e;if(t.value){(e=p.value)==null||e.handleScroll(t.value);const s=c,S=r;c=t.value.scrollTop,r=t.value.scrollLeft;const A={bottom:c+t.value.clientHeight>=t.value.scrollHeight-l.distance,top:c<=l.distance&&s!==0,right:r+t.value.clientWidth>=t.value.scrollWidth-l.distance&&S!==r,left:r<=l.distance&&S!==0};if(o("scroll",{scrollTop:c,scrollLeft:r}),s!==c&&(n=c>s?"bottom":"top"),S!==r&&(n=r>S?"right":"left"),l.distance>0){if(E(n))return;C(A)}A[n]&&o("end-reached",n)}};function O(e,s){Se(e)?t.value.scrollTo(e):L(e)&&L(s)&&t.value.scrollTo(e,s)}const B=e=>{L(e)&&(t.value.scrollTop=e)},i=e=>{L(e)&&(t.value.scrollLeft=e)},f=()=>{var e;(e=p.value)==null||e.update(),g[n]=!1};return V(()=>l.noresize,e=>{e?(m?.(),b?.()):({stop:m}=fe(a,f),b=W("resize",f))},{immediate:!0}),V(()=>[l.maxHeight,l.height],()=>{l.native||q(()=>{var e;f(),t.value&&((e=p.value)==null||e.handleScroll(t.value))})}),ve(U,de({scrollbarElement:H,wrapElement:t})),me(()=>{t.value&&(t.value.scrollTop=c,t.value.scrollLeft=r)}),pe(()=>{l.native||q(()=>{f()})}),he(()=>f()),d({wrapRef:t,update:f,scrollTo:O,setScrollTop:B,setScrollLeft:i,handleScroll:x}),(e,s)=>(R(),ee("div",{ref_key:"scrollbarRef",ref:H,class:N(y(u).b())},[$("div",{ref_key:"wrapRef",ref:t,class:N(y(_)),style:I(y(w)),tabindex:e.tabindex,onScroll:x},[(R(),D(ye(e.tag),{id:e.id,ref_key:"resizeRef",ref:a,class:N(y(z)),style:I(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Q(()=>[ge(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?be("v-if",!0):(R(),D(Le,{key:0,ref_key:"barRef",ref:p,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ae=K(Be,[["__file","scrollbar.vue"]]);const Oe=we(Ae);export{Oe as E,Ne as s};
