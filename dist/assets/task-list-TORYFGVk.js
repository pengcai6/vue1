import{d as V,r as J,j as O,a5 as P,c as k,a as n,w as s,o as c,b,i as r,p as j,m as f,n as v,u as q,l as d}from"./index-BX2sZVyW.js";import{a as F,E as L}from"./table-column-DG__lvqo.js";import"./checkbox-B8dDd1Mj.js";import"./scrollbar-C9NSq6wy.js";import{E as U}from"./popover-RKPTbPoo.js";import{E as z}from"./button-Cn9gqGCu.js";import{E as A}from"./progress-B1_RPwJG.js";/* empty css            */import{E as G}from"./card-B6phTZGW.js";import{E as H}from"./index-BFcHm1-Q.js";import"./event-BORzi4vc.js";import"./isPlainObject-jZyBOBeK.js";import"./debounce-DYp1oJWc.js";import"./index-PwB6y63X.js";import"./isEqual-ohjdCfDM.js";const K={class:"task-list-page p-5"},Q={class:"flex items-center justify-between"},W={key:1},me=V({__name:"task-list",setup(X){const g=q(),i=J([]);let m;function y(){return[{id:"1",taskName:"llama2-customer-service",description:"客服对话微调任务",baseModel:"llama-2-7b",dataset:"custom-chat-v1",status:"completed",progress:100,createTime:"2024-01-15 10:00:00",learningRate:1e-4,epochs:3},{id:"2",taskName:"chatglm-financial",description:"金融领域微调",baseModel:"chatglm-6b",dataset:"finance-dataset",status:"running",progress:65,createTime:"2024-01-15 14:30:00",learningRate:2e-4,epochs:5},{id:"3",taskName:"qwen-code-generation",description:"代码生成微调任务",baseModel:"qwen-7b",dataset:"code-alpaca-v1",status:"completed",progress:100,createTime:"2024-01-14 09:00:00",learningRate:3e-4,epochs:4}]}function T(e){return{pending:"info",running:"warning",completed:"success",failed:"danger"}[e]||"info"}function h(e){return{pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"}[e]||e}function w(){g.push("/model-finetune/create-task")}function C(e){localStorage.setItem("current-finetune-task",JSON.stringify(e)),g.push("/model-finetune/task-detail")}function E(e){e.status="running",e.progress=0,p(),d.success("任务已启动")}function N(e){e.status="pending",p(),d.warning("任务已停止")}function S(e){const t={...e,id:Date.now().toString(),taskName:`${e.taskName}-copy`,status:"pending",progress:0,createTime:new Date().toLocaleString()};i.value.unshift(t),p(),d.success("任务已复制")}function M(e){i.value=i.value.filter(t=>t.id!==e),p(),d.success("任务已删除")}function p(){localStorage.setItem("finetune-tasks",JSON.stringify(i.value))}function x(){const e=localStorage.getItem("finetune-tasks");i.value=e?JSON.parse(e):y()}function I(){m=window.setInterval(()=>{i.value.forEach(e=>{e.status==="running"&&e.progress<100&&(e.progress=Math.min(e.progress+Math.floor(Math.random()*5+1),100),e.progress===100&&(e.status="completed"))}),p()},2e3)}return O(()=>{x(),I()}),P(()=>{m&&clearInterval(m)}),(e,t)=>{const l=z,_=G,o=L,$=H,B=A,D=U,R=F;return c(),k("div",K,[n(_,{class:"header-card"},{default:s(()=>[b("div",Q,[t[1]||(t[1]=b("h2",{class:"text-2xl font-bold"},"微调任务列表",-1)),n(l,{type:"primary",onClick:w},{default:s(()=>t[0]||(t[0]=[r(" 创建微调任务 ",-1)])),_:1,__:[0]})])]),_:1}),n(_,{class:"mt-4"},{default:s(()=>[n(R,{data:i.value,stripe:""},{default:s(()=>[n(o,{prop:"taskName",label:"任务名称",width:"200"}),n(o,{prop:"description",label:"任务描述","min-width":"200","show-overflow-tooltip":""}),n(o,{prop:"baseModel",label:"基座模型",width:"150"}),n(o,{prop:"dataset",label:"数据集",width:"180"}),n(o,{label:"状态",width:"120",align:"center"},{default:s(({row:a})=>[n($,{type:T(a.status)},{default:s(()=>[r(j(h(a.status)),1)]),_:2},1032,["type"])]),_:1}),n(o,{label:"进度",width:"180"},{default:s(({row:a})=>[a.status==="running"?(c(),f(B,{key:0,percentage:a.progress,status:a.progress===100?"success":""},null,8,["percentage","status"])):(c(),k("span",W,"-"))]),_:1}),n(o,{prop:"createTime",label:"创建时间",width:"180"}),n(o,{label:"操作",width:"250",fixed:"right"},{default:s(({row:a})=>[n(l,{link:"",type:"primary",onClick:u=>C(a)},{default:s(()=>t[2]||(t[2]=[r(" 详情 ",-1)])),_:2,__:[2]},1032,["onClick"]),a.status==="pending"?(c(),f(l,{key:0,link:"",type:"success",onClick:u=>E(a)},{default:s(()=>t[3]||(t[3]=[r(" 启动 ",-1)])),_:2,__:[3]},1032,["onClick"])):v("",!0),a.status==="running"?(c(),f(l,{key:1,link:"",type:"warning",onClick:u=>N(a)},{default:s(()=>t[4]||(t[4]=[r(" 停止 ",-1)])),_:2,__:[4]},1032,["onClick"])):v("",!0),n(l,{link:"",onClick:u=>S(a)},{default:s(()=>t[5]||(t[5]=[r(" 复制 ",-1)])),_:2,__:[5]},1032,["onClick"]),n(D,{title:"确定要删除此任务吗？",onConfirm:u=>M(a.id)},{reference:s(()=>[n(l,{link:"",type:"danger"},{default:s(()=>t[6]||(t[6]=[r(" 删除 ",-1)])),_:1,__:[6]})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1})])}}});export{me as default};
