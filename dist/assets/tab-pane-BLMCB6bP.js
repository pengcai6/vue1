import{c4 as Pe,c5 as ce,c6 as Ee,c7 as we,c8 as Se,x as J,z as te,y as q,A as ue,d as D,R as le,q as oe,C as W,r as _,Y as I,c2 as ae,$ as de,c as fe,o as be,L as Re,J as ve,e as x,av as se,ag as H,c9 as $e,ca as Oe,S as xe,D as U,j as Be,aJ as ke,aV as Ae,a as f,E as Y,bC as Fe,bB as Le,b4 as F,O as ze,at as Me,a7 as Ve,F as ne,b7 as Ie,a8 as me,a0 as De,az as Ue,cb as re,aa as Ke,aT as Ge,aC as Ye,n as qe,aE as He,a4 as Je,ac as We}from"./index-BX2sZVyW.js";import{c as L}from"./strings-JcT2fde-.js";import{e as Xe,U as pe}from"./event-BORzi4vc.js";import{u as Qe}from"./index-Dc9GAbAN.js";import{g as Ze,b as je}from"./_baseClone-BOpOh07B.js";import{i as et}from"./isPlainObject-jZyBOBeK.js";function tt(e,t,n){var u=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++u<a;)i[u]=e[u+t];return i}function at(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function st(e,t){return t.length<2?e:Pe(e,tt(t,0,-1))}function nt(e,t){return t=ce(t,e),e=st(e,t),e==null||delete e[Ee(at(t))]}function lt(e){return et(e)?void 0:e}var ot=1,rt=2,it=4,ct=we(function(e,t){var n={};if(e==null)return n;var u=!1;t=Se(t,function(i){return i=ce(i,e),u||(u=i.length>1),i}),Xe(e,Ze(e),n),u&&(n=je(n,ot|rt|it,lt));for(var a=t.length;a--;)nt(n,t[a]);return n});const X=Symbol("tabsRootContextKey"),ut=J({tabs:{type:q(Array),default:()=>te([])},tabRefs:{type:q(Object),default:()=>te({})}}),he="ElTabBar",dt=D({name:he}),ft=D({...dt,props:ut,setup(e,{expose:t}){const n=e,u=le(X);u||oe(he,"<el-tabs><el-tab-bar /></el-tabs>");const a=W("tabs"),i=_(),S=_(),v=()=>{let l=0,b=0;const N=["top","bottom"].includes(u.props.tabPosition)?"width":"height",c=N==="width"?"x":"y",B=c==="x"?"left":"top";return n.tabs.every(C=>{if(se(C.paneName))return!1;const o=n.tabRefs[C.paneName];if(!o)return!1;if(!C.active)return!0;l=o[`offset${L(B)}`],b=o[`client${L(N)}`];const y=window.getComputedStyle(o);return N==="width"&&(b-=Number.parseFloat(y.paddingLeft)+Number.parseFloat(y.paddingRight),l+=Number.parseFloat(y.paddingLeft)),!1}),{[N]:`${b}px`,transform:`translate${L(c)}(${l}px)`}},h=()=>S.value=v(),m=[],E=()=>{m.forEach(l=>l.stop()),m.length=0,Object.values(n.tabRefs).forEach(l=>{m.push(ae(l,h))})};I(()=>n.tabs,async()=>{await H(),h(),E()},{immediate:!0});const g=ae(i,()=>h());return de(()=>{m.forEach(l=>l.stop()),m.length=0,g.stop()}),t({ref:i,update:h}),(l,b)=>(be(),fe("div",{ref_key:"barRef",ref:i,class:ve([x(a).e("active-bar"),x(a).is(x(u).props.tabPosition)]),style:Re(S.value)},null,6))}});var bt=ue(ft,[["__file","tab-bar.vue"]]);const vt=J({panes:{type:q(Array),default:()=>te([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),mt={tabClick:(e,t,n)=>n instanceof Event,tabRemove:(e,t)=>t instanceof Event},ie="ElTabNav",pt=D({name:ie,props:vt,emits:mt,setup(e,{expose:t,emit:n}){const u=le(X);u||oe(ie,"<el-tabs><tab-nav /></el-tabs>");const a=W("tabs"),i=$e(),S=Oe(),v=_(),h=_(),m=_(),E=_({}),g=_(),l=_(!1),b=_(0),N=_(!1),c=_(!0),B=xe(),C=U(()=>["top","bottom"].includes(u.props.tabPosition)?"width":"height"),o=U(()=>({transform:`translate${C.value==="width"?"X":"Y"}(-${b.value}px)`})),y=()=>{if(!v.value)return;const r=v.value[`offset${L(C.value)}`],d=b.value;if(!d)return;const s=d>r?d-r:0;b.value=s},w=()=>{if(!v.value||!h.value)return;const r=h.value[`offset${L(C.value)}`],d=v.value[`offset${L(C.value)}`],s=b.value;if(r-s<=d)return;const T=r-s>d*2?s+d:r-d;b.value=T},k=async()=>{const r=h.value;if(!l.value||!m.value||!v.value||!r)return;await H();const d=E.value[e.currentName];if(!d)return;const s=v.value,T=["top","bottom"].includes(u.props.tabPosition),p=d.getBoundingClientRect(),P=s.getBoundingClientRect(),K=T?r.offsetWidth-P.width:r.offsetHeight-P.height,A=b.value;let $=A;T?(p.left<P.left&&($=A-(P.left-p.left)),p.right>P.right&&($=A+p.right-P.right)):(p.top<P.top&&($=A-(P.top-p.top)),p.bottom>P.bottom&&($=A+(p.bottom-P.bottom))),$=Math.max($,0),b.value=Math.min($,K)},z=()=>{var r;if(!h.value||!v.value)return;e.stretch&&((r=g.value)==null||r.update());const d=h.value[`offset${L(C.value)}`],s=v.value[`offset${L(C.value)}`],T=b.value;s<d?(l.value=l.value||{},l.value.prev=T,l.value.next=T+s<d,d-T<s&&(b.value=d-s)):(l.value=!1,T>0&&(b.value=0))},V=r=>{let d=0;switch(r.code){case F.left:case F.up:d=-1;break;case F.right:case F.down:d=1;break;default:return}const s=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let p=s.indexOf(r.target)+d;p<0?p=s.length-1:p>=s.length&&(p=0),s[p].focus({preventScroll:!0}),s[p].click(),M()},M=()=>{c.value&&(N.value=!0)},R=()=>N.value=!1,Q=(r,d)=>{E.value[d]=r},_e=async()=>{await H();const r=E.value[e.currentName];r==null||r.focus({preventScroll:!0})};return I(i,r=>{r==="hidden"?c.value=!1:r==="visible"&&setTimeout(()=>c.value=!0,50)}),I(S,r=>{r?setTimeout(()=>c.value=!0,50):c.value=!1}),ae(m,z),Be(()=>setTimeout(()=>k(),0)),ke(()=>z()),t({scrollToActiveTab:k,removeFocus:R,focusActiveTab:_e,tabListRef:h,tabBarRef:g,scheduleRender:()=>Ae(B)}),()=>{const r=l.value?[f("span",{class:[a.e("nav-prev"),a.is("disabled",!l.value.prev)],onClick:y},[f(Y,null,{default:()=>[f(Fe,null,null)]})]),f("span",{class:[a.e("nav-next"),a.is("disabled",!l.value.next)],onClick:w},[f(Y,null,{default:()=>[f(Le,null,null)]})])]:null,d=e.panes.map((s,T)=>{var p,P,K,A;const $=s.uid,Z=s.props.disabled,G=(P=(p=s.props.name)!=null?p:s.index)!=null?P:`${T}`,j=!Z&&(s.isClosable||e.editable);s.index=`${T}`;const Ne=j?f(Y,{class:"is-icon-close",onClick:O=>n("tabRemove",s,O)},{default:()=>[f(ze,null,null)]}):null,Ce=((A=(K=s.slots).label)==null?void 0:A.call(K))||s.props.label,Te=!Z&&s.active?0:-1;return f("div",{ref:O=>Q(O,G),class:[a.e("item"),a.is(u.props.tabPosition),a.is("active",s.active),a.is("disabled",Z),a.is("closable",j),a.is("focus",N.value)],id:`tab-${G}`,key:`tab-${$}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":s.active,tabindex:Te,onFocus:()=>M(),onBlur:()=>R(),onClick:O=>{R(),n("tabClick",s,G,O)},onKeydown:O=>{j&&(O.code===F.delete||O.code===F.backspace)&&n("tabRemove",s,O)}},[Ce,Ne])});return B.value,f("div",{ref:m,class:[a.e("nav-wrap"),a.is("scrollable",!!l.value),a.is(u.props.tabPosition)]},[r,f("div",{class:a.e("nav-scroll"),ref:v},[e.panes.length>0?f("div",{class:[a.e("nav"),a.is(u.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(u.props.tabPosition))],ref:h,style:o.value,role:"tablist",onKeydown:V},[e.type?null:f(bt,{ref:g,tabs:[...e.panes],tabRefs:E.value},null),d]):null])])}}}),ht=J({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:q(Function),default:()=>!0},stretch:Boolean}),ee=e=>Me(e)||Ve(e),gt={[pe]:e=>ee(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>ee(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>ee(e),tabAdd:()=>!0},yt=D({name:"ElTabs",props:ht,emits:gt,setup(e,{emit:t,slots:n,expose:u}){var a;const i=W("tabs"),S=U(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:h,removeChild:m,ChildrenSorter:E}=Qe(me(),"ElTabPane"),g=_(),l=_((a=e.modelValue)!=null?a:"0"),b=async(o,y=!1)=>{var w,k,z,V;if(!(l.value===o||se(o)))try{let M;if(e.beforeLeave){const R=e.beforeLeave(o,l.value);M=R instanceof Promise?await R:R}else M=!0;if(M!==!1){const R=(w=v.value.find(Q=>Q.paneName===l.value))==null?void 0:w.isFocusInsidePane();l.value=o,y&&(t(pe,o),t("tabChange",o)),(z=(k=g.value)==null?void 0:k.removeFocus)==null||z.call(k),R&&((V=g.value)==null||V.focusActiveTab())}}catch{}},N=(o,y,w)=>{o.props.disabled||(t("tabClick",o,w),b(y,!0))},c=(o,y)=>{o.props.disabled||se(o.props.name)||(y.stopPropagation(),t("edit",o.props.name,"remove"),t("tabRemove",o.props.name))},B=()=>{t("edit",void 0,"add"),t("tabAdd")},C=o=>{const y=o.el.firstChild,w=["bottom","right"].includes(e.tabPosition)?o.children[0].el:o.children[1].el;y!==w&&y.before(w)};return I(()=>e.modelValue,o=>b(o)),I(l,async()=>{var o;await H(),(o=g.value)==null||o.scrollToActiveTab()}),De(X,{props:e,currentName:l,registerPane:h,unregisterPane:m,nav$:g}),u({currentName:l,get tabNavRef(){return ct(g.value,["scheduleRender"])}}),()=>{const o=n["add-icon"],y=e.editable||e.addable?f("div",{class:[i.e("new-tab"),S.value&&i.e("new-tab-vertical")],tabindex:"0",onClick:B,onKeydown:V=>{[F.enter,F.numpadEnter].includes(V.code)&&B()}},[o?ne(n,"add-icon"):f(Y,{class:i.is("icon-plus")},{default:()=>[f(Ie,null,null)]})]):null,w=()=>f(pt,{ref:g,currentName:l.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:N,onTabRemove:c},null),k=f("div",{class:[i.e("header"),S.value&&i.e("header-vertical"),i.is(e.tabPosition)]},[f(E,null,{default:w,$stable:!0}),y]),z=f("div",{class:i.e("content")},[ne(n,"default")]);return f("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}],onVnodeMounted:C,onVnodeUpdated:C},[z,k])}}});var _t=yt;const Nt=J({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ge="ElTabPane",Ct=D({name:ge}),Tt=D({...Ct,props:Nt,setup(e){const t=e,n=me(),u=Ue(),a=le(X);a||oe(ge,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=W("tab-pane"),S=_(),v=_(),h=U(()=>t.closable||a.props.closable),m=re(()=>{var c;return a.currentName.value===((c=t.name)!=null?c:v.value)}),E=_(m.value),g=U(()=>{var c;return(c=t.name)!=null?c:v.value}),l=re(()=>!t.lazy||E.value||m.value),b=()=>{var c;return(c=S.value)==null?void 0:c.contains(document.activeElement)};I(m,c=>{c&&(E.value=!0)});const N=Ke({uid:n.uid,getVnode:()=>n.vnode,slots:u,props:t,paneName:g,active:m,index:v,isClosable:h,isFocusInsidePane:b});return a.registerPane(N),de(()=>{a.unregisterPane(N)}),Ge(()=>{var c;u.label&&((c=a.nav$.value)==null||c.scheduleRender())}),(c,B)=>x(l)?Ye((be(),fe("div",{key:0,id:`pane-${x(g)}`,ref_key:"paneRef",ref:S,class:ve(x(i).b()),role:"tabpanel","aria-hidden":!x(m),"aria-labelledby":`tab-${x(g)}`},[ne(c.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[He,x(m)]]):qe("v-if",!0)}});var ye=ue(Tt,[["__file","tab-pane.vue"]]);const Ot=Je(_t,{TabPane:ye}),xt=We(ye);export{Ot as E,xt as a};
