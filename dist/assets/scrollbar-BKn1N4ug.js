import{v as j,_ as K,d as M,P as J,A as Z,p as te,r as v,B as C,Y as le,ba as W,$ as U,l as D,o as N,w as Q,av as ae,b as $,I as oe,H as P,e as y,J as I,ax as se,ay as re,au as ne,c as ee,a as X,F as ie,a4 as L,b7 as ce,x as ue,ac as F,W as V,Z as fe,a7 as ve,cs as de,j as me,aF as q,aI as pe,m as he,C as be,a8 as ge,bo as ye,aE as Se,a2 as we}from"./index-DAZDpghP.js";const T=4,ze={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},_e=({move:h,size:d,bar:o})=>({[o.size]:d,transform:`translate${o.axis}(${h}%)`}),Y=Symbol("scrollbarContextKey"),Ee=j({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),He="Thumb",Te=M({__name:"thumb",props:Ee,setup(h){const d=h,o=J(Y),a=Z("scrollbar");o||te(He,"can not inject scrollbar context");const u=v(),m=v(),b=v({}),c=v(!1);let r=!1,n=!1,g=0,H=0,t=ne?document.onselectstart:null;const l=C(()=>ze[d.vertical?"vertical":"horizontal"]),p=C(()=>_e({size:d.size,move:d.move,bar:l.value})),w=C(()=>u.value[l.value.offset]**2/o.wrapElement[l.value.scrollSize]/d.ratio/m.value[l.value.offset]),E=i=>{var f;if(i.stopPropagation(),i.ctrlKey||[1,2].includes(i.button))return;(f=window.getSelection())==null||f.removeAllRanges(),_(i);const e=i.currentTarget;e&&(b.value[l.value.axis]=e[l.value.offset]-(i[l.value.client]-e.getBoundingClientRect()[l.value.direction]))},z=i=>{if(!m.value||!u.value||!o.wrapElement)return;const f=Math.abs(i.target.getBoundingClientRect()[l.value.direction]-i[l.value.client]),e=m.value[l.value.offset]/2,s=(f-e)*100*w.value/u.value[l.value.offset];o.wrapElement[l.value.scroll]=s*o.wrapElement[l.value.scrollSize]/100},_=i=>{i.stopImmediatePropagation(),r=!0,g=o.wrapElement.scrollHeight,H=o.wrapElement.scrollWidth,document.addEventListener("mousemove",R),document.addEventListener("mouseup",k),t=document.onselectstart,document.onselectstart=()=>!1},R=i=>{if(!u.value||!m.value||r===!1)return;const f=b.value[l.value.axis];if(!f)return;const e=(u.value.getBoundingClientRect()[l.value.direction]-i[l.value.client])*-1,s=m.value[l.value.offset]-f,S=(e-s)*100*w.value/u.value[l.value.offset];l.value.scroll==="scrollLeft"?o.wrapElement[l.value.scroll]=S*H/100:o.wrapElement[l.value.scroll]=S*g/100},k=()=>{r=!1,b.value[l.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",k),B(),n&&(c.value=!1)},x=()=>{n=!1,c.value=!!d.size},O=()=>{n=!0,c.value=r};le(()=>{B(),document.removeEventListener("mouseup",k)});const B=()=>{document.onselectstart!==t&&(document.onselectstart=t)};return W(U(o,"scrollbarElement"),"mousemove",x),W(U(o,"scrollbarElement"),"mouseleave",O),(i,f)=>(N(),D(re,{name:y(a).b("fade"),persisted:""},{default:Q(()=>[ae($("div",{ref_key:"instance",ref:u,class:P([y(a).e("bar"),y(a).is(y(l).key)]),onMousedown:z,onClick:oe(()=>{},["stop"])},[$("div",{ref_key:"thumb",ref:m,class:P(y(a).e("thumb")),style:I(y(p)),onMousedown:E},null,38)],42,["onClick"]),[[se,i.always||c.value]])]),_:1},8,["name"]))}});var G=K(Te,[["__file","thumb.vue"]]);const Ce=j({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),ke=M({__name:"bar",props:Ce,setup(h,{expose:d}){const o=h,a=J(Y),u=v(0),m=v(0),b=v(""),c=v(""),r=v(1),n=v(1);return d({handleScroll:t=>{if(t){const l=t.offsetHeight-T,p=t.offsetWidth-T;m.value=t.scrollTop*100/l*r.value,u.value=t.scrollLeft*100/p*n.value}},update:()=>{const t=a==null?void 0:a.wrapElement;if(!t)return;const l=t.offsetHeight-T,p=t.offsetWidth-T,w=l**2/t.scrollHeight,E=p**2/t.scrollWidth,z=Math.max(w,o.minSize),_=Math.max(E,o.minSize);r.value=w/(l-w)/(z/(l-z)),n.value=E/(p-E)/(_/(p-_)),c.value=z+T<l?`${z}px`:"",b.value=_+T<p?`${_}px`:""}}),(t,l)=>(N(),ee(ie,null,[X(G,{move:u.value,ratio:n.value,size:b.value,always:t.always},null,8,["move","ratio","size","always"]),X(G,{move:m.value,ratio:r.value,size:c.value,vertical:"",always:t.always},null,8,["move","ratio","size","always"])],64))}});var Le=K(ke,[["__file","bar.vue"]]);const Ne=j({distance:{type:Number,default:0},height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:ue([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ce(["ariaLabel","ariaOrientation"])}),Pe={"end-reached":h=>["left","right","top","bottom"].includes(h),scroll:({scrollTop:h,scrollLeft:d})=>[h,d].every(L)},Re="ElScrollbar",xe=M({name:Re}),Be=M({...xe,props:Ne,emits:Pe,setup(h,{expose:d,emit:o}){const a=h,u=Z("scrollbar");let m,b,c=0,r=0,n="";const g={bottom:!1,top:!1,right:!1,left:!1},H=v(),t=v(),l=v(),p=v(),w=C(()=>{const e={};return a.height&&(e.height=F(a.height)),a.maxHeight&&(e.maxHeight=F(a.maxHeight)),[a.wrapStyle,e]}),E=C(()=>[a.wrapClass,u.e("wrap"),{[u.em("wrap","hidden-default")]:!a.native}]),z=C(()=>[u.e("view"),a.viewClass]),_=e=>{var s;return(s=g[e])!=null?s:!1},R={top:"bottom",bottom:"top",left:"right",right:"left"},k=e=>{const s=R[n];if(!s)return;const S=e[n],A=e[s];S&&!g[n]&&(g[n]=!0),!A&&g[s]&&(g[s]=!1)},x=()=>{var e;if(t.value){(e=p.value)==null||e.handleScroll(t.value);const s=c,S=r;c=t.value.scrollTop,r=t.value.scrollLeft;const A={bottom:c+t.value.clientHeight>=t.value.scrollHeight-a.distance,top:c<=a.distance&&s!==0,right:r+t.value.clientWidth>=t.value.scrollWidth-a.distance&&S!==r,left:r<=a.distance&&S!==0};if(o("scroll",{scrollTop:c,scrollLeft:r}),s!==c&&(n=c>s?"bottom":"top"),S!==r&&(n=r>S?"right":"left"),a.distance>0){if(_(n))return;k(A)}A[n]&&o("end-reached",n)}};function O(e,s){ye(e)?t.value.scrollTo(e):L(e)&&L(s)&&t.value.scrollTo(e,s)}const B=e=>{L(e)&&(t.value.scrollTop=e)},i=e=>{L(e)&&(t.value.scrollLeft=e)},f=()=>{var e;(e=p.value)==null||e.update(),g[n]=!1};return V(()=>a.noresize,e=>{e?(m==null||m(),b==null||b()):({stop:m}=Se(l,f),b=W("resize",f))},{immediate:!0}),V(()=>[a.maxHeight,a.height],()=>{a.native||q(()=>{var e;f(),t.value&&((e=p.value)==null||e.handleScroll(t.value))})}),fe(Y,ve({scrollbarElement:H,wrapElement:t})),de(()=>{t.value&&(t.value.scrollTop=c,t.value.scrollLeft=r)}),me(()=>{a.native||q(()=>{f()})}),pe(()=>f()),d({wrapRef:t,update:f,scrollTo:O,setScrollTop:B,setScrollLeft:i,handleScroll:x}),(e,s)=>(N(),ee("div",{ref_key:"scrollbarRef",ref:H,class:P(y(u).b())},[$("div",{ref_key:"wrapRef",ref:t,class:P(y(E)),style:I(y(w)),tabindex:e.tabindex,onScroll:x},[(N(),D(ge(e.tag),{id:e.id,ref_key:"resizeRef",ref:l,class:P(y(z)),style:I(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Q(()=>[be(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?he("v-if",!0):(N(),D(Le,{key:0,ref_key:"barRef",ref:p,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Ae=K(Be,[["__file","scrollbar.vue"]]);const Oe=we(Ae);export{Oe as E,Pe as s};
