import{a4 as ae,q as le,v as be,b7 as Ie,x as te,b8 as Pe,b9 as Se,P as Fe,r as Z,B as f,W as ie,ba as de,aF as ce,aM as Y,_ as Ce,d as ne,A as he,a7 as Le,bb as ge,c as _,o as M,a as Ne,w as ke,b as Q,H as p,e as l,n as _e,ad as pe,J,am as Ee,ae as Re,Q as Xe,p as Ke,X as Be,j as Ye,z as We,Z as $e,l as me,m as se,F as ue,D as ve,I as Ue,a2 as Oe}from"./index-DAZDpghP.js";import{E as Ae}from"./input-number-BUSsIkB9.js";import{C as Te,I as Ve,U as oe}from"./event-D5_Wo8Xc.js";import{d as xe}from"./debounce-Bv_84CHO.js";import{u as je,a as He}from"./index-17xiCnpu.js";import{a as qe}from"./card-_e8Y2itV.js";const ze=Symbol("sliderContextKey"),Ge=be({modelValue:{type:te([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Se,inputSize:Se,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:te(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:te(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Pe,default:"top"},marks:{type:te(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ie(["ariaLabel"])}),fe=e=>ae(e)||le(e)&&e.every(ae),Je={[oe]:fe,[Ve]:fe,[Te]:fe},Qe=be({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Pe,default:"top"}}),Ze={[oe]:e=>ae(e)},De=(e,t,d)=>{const a=Z(),u=Z(!1),m=f(()=>t.value instanceof Function),i=f(()=>m.value&&t.value(e.modelValue)||e.modelValue),h=xe(()=>{d.value&&(u.value=!0)},50),V=xe(()=>{d.value&&(u.value=!1)},50);return{tooltip:a,tooltipVisible:u,formatValue:i,displayTooltip:h,hideTooltip:V}},et=(e,t,d)=>{const{disabled:a,min:u,max:m,step:i,showTooltip:h,persistent:V,precision:c,sliderSize:v,formatTooltip:n,emitChange:y,resetSize:T,updateDragging:W}=Fe(ze),{tooltip:z,tooltipVisible:C,formatValue:I,displayTooltip:S,hideTooltip:R}=De(e,n,h),E=Z(),k=f(()=>`${(e.modelValue-u.value)/(m.value-u.value)*100}%`),P=f(()=>e.vertical?{bottom:k.value}:{left:k.value}),$=()=>{t.hovering=!0,S()},re=()=>{t.hovering=!1,t.dragging||R()},U=o=>{a.value||(o.preventDefault(),F(o),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),window.addEventListener("contextmenu",x),E.value.focus())},X=o=>{a.value||(t.newPosition=Number.parseFloat(k.value)+o/(m.value-u.value)*100,L(t.newPosition),y())},O=()=>{X(-i.value)},s=()=>{X(i.value)},b=()=>{X(-i.value*4)},w=()=>{X(i.value*4)},H=()=>{a.value||(L(0),y())},q=()=>{a.value||(L(100),y())},G=o=>{let g=!0;switch(o.code){case Y.left:case Y.down:O();break;case Y.right:case Y.up:s();break;case Y.home:H();break;case Y.end:q();break;case Y.pageDown:b();break;case Y.pageUp:w();break;default:g=!1;break}g&&o.preventDefault()},A=o=>{let g,N;return o.type.startsWith("touch")?(N=o.touches[0].clientY,g=o.touches[0].clientX):(N=o.clientY,g=o.clientX),{clientX:g,clientY:N}},F=o=>{t.dragging=!0,t.isClick=!0;const{clientX:g,clientY:N}=A(o);e.vertical?t.startY=N:t.startX=g,t.startPosition=Number.parseFloat(k.value),t.newPosition=t.startPosition},B=o=>{if(t.dragging){t.isClick=!1,S(),T();let g;const{clientX:N,clientY:K}=A(o);e.vertical?(t.currentY=K,g=(t.startY-t.currentY)/v.value*100):(t.currentX=N,g=(t.currentX-t.startX)/v.value*100),t.newPosition=t.startPosition+g,L(t.newPosition)}},x=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||R(),t.isClick||L(t.newPosition),y()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x),window.removeEventListener("contextmenu",x))},L=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const g=100/((m.value-u.value)/i.value);let K=Math.round(o/g)*g*(m.value-u.value)*.01+u.value;K=Number.parseFloat(K.toFixed(c.value)),K!==e.modelValue&&d(oe,K),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await ce(),t.dragging&&S(),z.value.updatePopper()};return ie(()=>t.dragging,o=>{W(o)}),de(E,"touchstart",U,{passive:!1}),{disabled:a,button:E,tooltip:z,tooltipVisible:C,showTooltip:h,persistent:V,wrapperStyle:P,formatValue:I,handleMouseEnter:$,handleMouseLeave:re,onButtonDown:U,onKeyDown:G,setPosition:L}},tt=ne({name:"ElSliderButton"}),lt=ne({...tt,props:Qe,emits:Ze,setup(e,{expose:t,emit:d}){const a=e,u=he("slider"),m=Le({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),i=f(()=>v.value?n.value:!1),{disabled:h,button:V,tooltip:c,showTooltip:v,persistent:n,tooltipVisible:y,wrapperStyle:T,formatValue:W,handleMouseEnter:z,handleMouseLeave:C,onButtonDown:I,onKeyDown:S,setPosition:R}=et(a,m,d),{hovering:E,dragging:k}=ge(m);return t({onButtonDown:I,onKeyDown:S,setPosition:R,hovering:E,dragging:k}),(P,$)=>(M(),_("div",{ref_key:"button",ref:V,class:p([l(u).e("button-wrapper"),{hover:l(E),dragging:l(k)}]),style:J(l(T)),tabindex:l(h)?-1:0,onMouseenter:l(z),onMouseleave:l(C),onMousedown:l(I),onFocus:l(z),onBlur:l(C),onKeydown:l(S)},[Ne(l(pe),{ref_key:"tooltip",ref:c,visible:l(y),placement:P.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":P.tooltipClass,disabled:!l(v),persistent:l(i)},{content:ke(()=>[Q("span",null,_e(l(W)),1)]),default:ke(()=>[Q("div",{class:p([l(u).e("button"),{hover:l(E),dragging:l(k)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Me=Ce(lt,[["__file","button.vue"]]);const at=be({mark:{type:te([String,Object]),default:void 0}});var nt=ne({name:"ElSliderMarker",props:at,setup(e){const t=he("slider"),d=f(()=>Ee(e.mark)?e.mark:e.mark.label),a=f(()=>Ee(e.mark)?void 0:e.mark.style);return()=>Re("div",{class:t.e("marks-text"),style:a.value},d.value)}});const ot=(e,t,d)=>{const{form:a,formItem:u}=je(),m=Xe(),i=Z(),h=Z(),V={firstButton:i,secondButton:h},c=f(()=>e.disabled||(a==null?void 0:a.disabled)||!1),v=f(()=>Math.min(t.firstValue,t.secondValue)),n=f(()=>Math.max(t.firstValue,t.secondValue)),y=f(()=>e.range?`${100*(n.value-v.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),T=f(()=>e.range?`${100*(v.value-e.min)/(e.max-e.min)}%`:"0%"),W=f(()=>e.vertical?{height:e.height}:{}),z=f(()=>e.vertical?{height:y.value,bottom:T.value}:{width:y.value,left:T.value}),C=()=>{m.value&&(t.sliderSize=m.value[`client${e.vertical?"Height":"Width"}`])},I=s=>{const b=e.min+s*(e.max-e.min)/100;if(!e.range)return i;let w;return Math.abs(v.value-b)<Math.abs(n.value-b)?w=t.firstValue<t.secondValue?"firstButton":"secondButton":w=t.firstValue>t.secondValue?"firstButton":"secondButton",V[w]},S=s=>{const b=I(s);return b.value.setPosition(s),b},R=s=>{t.firstValue=s??e.min,k(e.range?[v.value,n.value]:s??e.min)},E=s=>{t.secondValue=s,e.range&&k([v.value,n.value])},k=s=>{d(oe,s),d(Ve,s)},P=async()=>{await ce(),d(Te,e.range?[v.value,n.value]:e.modelValue)},$=s=>{var b,w,H,q,G,A;if(c.value||t.dragging)return;C();let F=0;if(e.vertical){const B=(H=(w=(b=s.touches)==null?void 0:b.item(0))==null?void 0:w.clientY)!=null?H:s.clientY;F=(m.value.getBoundingClientRect().bottom-B)/t.sliderSize*100}else{const B=(A=(G=(q=s.touches)==null?void 0:q.item(0))==null?void 0:G.clientX)!=null?A:s.clientX,x=m.value.getBoundingClientRect().left;F=(B-x)/t.sliderSize*100}if(!(F<0||F>100))return S(F)};return{elFormItem:u,slider:m,firstButton:i,secondButton:h,sliderDisabled:c,minValue:v,maxValue:n,runwayStyle:W,barStyle:z,resetSize:C,setPosition:S,emitChange:P,onSliderWrapperPrevent:s=>{var b,w;((b=V.firstButton.value)!=null&&b.dragging||(w=V.secondButton.value)!=null&&w.dragging)&&s.preventDefault()},onSliderClick:s=>{$(s)&&P()},onSliderDown:async s=>{const b=$(s);b&&(await ce(),b.value.onButtonDown(s))},onSliderMarkerDown:s=>{if(c.value||t.dragging)return;S(s)&&P()},setFirstValue:R,setSecondValue:E}},rt=(e,t,d,a)=>({stops:f(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,h=100*e.step/(e.max-e.min),V=Array.from({length:i-1}).map((c,v)=>(v+1)*h);return e.range?V.filter(c=>c<100*(d.value-e.min)/(e.max-e.min)||c>100*(a.value-e.min)/(e.max-e.min)):V.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),st=e=>f(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((d,a)=>d-a).filter(d=>d<=e.max&&d>=e.min).map(d=>({point:d,position:(d-e.min)*100/(e.max-e.min),mark:e.marks[d]})):[]),ut=(e,t,d,a,u,m)=>{const i=c=>{u(oe,c),u(Ve,c)},h=()=>e.range?![d.value,a.value].every((c,v)=>c===t.oldValue[v]):e.modelValue!==t.oldValue,V=()=>{var c,v;e.min>e.max&&Ke("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&le(n)?n[1]<e.min?i([e.min,e.min]):n[0]>e.max?i([e.max,e.max]):n[0]<e.min?i([e.min,n[1]]):n[1]>e.max?i([n[0],e.max]):(t.firstValue=n[0],t.secondValue=n[1],h()&&(e.validateEvent&&((c=m==null?void 0:m.validate)==null||c.call(m,"change").catch(y=>Be())),t.oldValue=n.slice())):!e.range&&ae(n)&&!Number.isNaN(n)&&(n<e.min?i(e.min):n>e.max?i(e.max):(t.firstValue=n,h()&&(e.validateEvent&&((v=m==null?void 0:m.validate)==null||v.call(m,"change").catch(y=>Be())),t.oldValue=n)))};V(),ie(()=>t.dragging,c=>{c||V()}),ie(()=>e.modelValue,(c,v)=>{t.dragging||le(c)&&le(v)&&c.every((n,y)=>n===v[y])&&t.firstValue===c[0]&&t.secondValue===c[1]||V()},{deep:!0}),ie(()=>[e.min,e.max],()=>{V()})},it=(e,t,d)=>{const a=Z();return Ye(async()=>{e.range?(le(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!ae(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),de(window,"resize",d),await ce(),d()}),{sliderWrapper:a}},dt=ne({name:"ElSlider"}),ct=ne({...dt,props:Ge,emits:Je,setup(e,{expose:t,emit:d}){const a=e,u=he("slider"),{t:m}=We(),i=Le({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:h,slider:V,firstButton:c,secondButton:v,sliderDisabled:n,minValue:y,maxValue:T,runwayStyle:W,barStyle:z,resetSize:C,emitChange:I,onSliderWrapperPrevent:S,onSliderClick:R,onSliderDown:E,onSliderMarkerDown:k,setFirstValue:P,setSecondValue:$}=ot(a,i,d),{stops:re,getStopStyle:U}=rt(a,i,y,T),{inputId:X,isLabeledByFormItem:O}=He(a,{formItemContext:h}),s=qe(),b=f(()=>a.inputSize||s.value),w=f(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),H=f(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):w.value),q=f(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),G=f(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),A=f(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),F=f(()=>[u.b(),u.m(s.value),u.is("vertical",a.vertical),{[u.m("with-input")]:a.showInput}]),B=st(a);ut(a,i,y,T,d,h);const x=f(()=>{const r=[a.min,a.max,a.step].map(ye=>{const D=`${ye}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,r)}),{sliderWrapper:L}=it(a,i,C),{firstValue:o,secondValue:g,sliderSize:N}=ge(i),K=r=>{i.dragging=r};return de(L,"touchstart",S,{passive:!1}),de(L,"touchmove",S,{passive:!1}),$e(ze,{...ge(a),sliderSize:N,disabled:n,precision:x,emitChange:I,resetSize:C,updateDragging:K}),t({onSliderClick:R}),(r,ye)=>{var D,we;return M(),_("div",{id:r.range?l(X):void 0,ref_key:"sliderWrapper",ref:L,class:p(l(F)),role:r.range?"group":void 0,"aria-label":r.range&&!l(O)?l(w):void 0,"aria-labelledby":r.range&&l(O)?(D=l(h))==null?void 0:D.labelId:void 0},[Q("div",{ref_key:"slider",ref:V,class:p([l(u).e("runway"),{"show-input":r.showInput&&!r.range},l(u).is("disabled",l(n))]),style:J(l(W)),onMousedown:l(E),onTouchstartPassive:l(E)},[Q("div",{class:p(l(u).e("bar")),style:J(l(z))},null,6),Ne(Me,{id:r.range?void 0:l(X),ref_key:"firstButton",ref:c,"model-value":l(o),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":r.range||!l(O)?l(H):void 0,"aria-labelledby":!r.range&&l(O)?(we=l(h))==null?void 0:we.labelId:void 0,"aria-valuemin":r.min,"aria-valuemax":r.range?l(g):r.max,"aria-valuenow":l(o),"aria-valuetext":l(q),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(P)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),r.range?(M(),me(Me,{key:0,ref_key:"secondButton",ref:v,"model-value":l(g),vertical:r.vertical,"tooltip-class":r.tooltipClass,placement:r.placement,role:"slider","aria-label":l(G),"aria-valuemin":l(o),"aria-valuemax":r.max,"aria-valuenow":l(g),"aria-valuetext":l(A),"aria-orientation":r.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l($)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):se("v-if",!0),r.showStops?(M(),_("div",{key:1},[(M(!0),_(ue,null,ve(l(re),(j,ee)=>(M(),_("div",{key:ee,class:p(l(u).e("stop")),style:J(l(U)(j))},null,6))),128))])):se("v-if",!0),l(B).length>0?(M(),_(ue,{key:2},[Q("div",null,[(M(!0),_(ue,null,ve(l(B),(j,ee)=>(M(),_("div",{key:ee,style:J(l(U)(j.position)),class:p([l(u).e("stop"),l(u).e("marks-stop")])},null,6))),128))]),Q("div",{class:p(l(u).e("marks"))},[(M(!0),_(ue,null,ve(l(B),(j,ee)=>(M(),me(l(nt),{key:ee,mark:j.mark,style:J(l(U)(j.position)),onMousedown:Ue(vt=>l(k)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):se("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),r.showInput&&!r.range?(M(),me(l(Ae),{key:0,ref:"input","model-value":l(o),class:p(l(u).e("input")),step:r.step,disabled:l(n),controls:r.showInputControls,min:r.min,max:r.max,precision:l(x),debounce:r.debounce,size:l(b),"onUpdate:modelValue":l(P),onChange:l(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):se("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var mt=Ce(ct,[["__file","slider.vue"]]);const wt=Oe(mt);export{wt as E};
