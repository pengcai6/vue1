import{n as O,a4 as R,s as h,d as T,x as F,W as H,b as S,o as m,z as G,f as t,C as o,D as v,a5 as q,Z,a6 as ee,r as U,P as te,h as le,y as b,a7 as se,Y as ae,j as y,e as V,I as M,c as x,w as l,a8 as oe,E as j,K as ne,L as re,t as g,a as i,a2 as ie,a9 as ue,u as pe,_ as de}from"./index-C1LNxWrc.js";import{E as me}from"./card-bOHwtd_N.js";import{E as ce}from"./button-CfgjJGa2.js";import{E as ve,a as fe}from"./descriptions-item-BClrjkTE.js";import{E as _e}from"./alert-DfKyxj_0.js";import{E as be}from"./input-LGwqt1-Y.js";import{E as ye}from"./input-number-BdlakYFh.js";import{E as Se,a as Ee}from"./radio-BfCnrhE6.js";/* empty css                       */import{E as ge,a as Ve}from"./checkbox-D429Hkk4.js";import{E as Ne}from"./divider-cQog8eF3.js";import{E as ke,a as Ce}from"./form-item-BZC8dQDK.js";/* empty css            */import{E as we,a as xe}from"./select-BSsX693L.js";import"./scrollbar-CWDB5A-B.js";import{g as Ie,s as Ae}from"./storage-2nKQMLp0.js";import{C as J}from"./index-DRLRXOGd.js";import{u as $e}from"./index-Dh5b_8aS.js";import{E as De}from"./index-JFsgmBjq.js";import"./use-form-common-props-dMO5F-Xy.js";import"./index-BPEUnmM4.js";import"./index-BYwYey8Q.js";import"./isEqual-CFwnnDW_.js";import"./_initCloneObject-T9RaIEd1.js";import"./_baseClone-0EgoVDGI.js";import"./index-gsKI2Iim.js";import"./strings-BOPxCUMK.js";import"./scroll-RLo4NxSV.js";import"./debounce-C4p0xsPh.js";import"./_baseIteratee-CNffayvf.js";const Ue=O({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Be={[J]:(I,C)=>[I,C].every(R)},Q="ElSteps",Pe=T({name:"ElSteps"}),Le=T({...Pe,props:Ue,emits:Be,setup(I,{emit:C}){const n=I,c=F("steps"),{children:s,addChild:E,removeChild:r,ChildrenSorter:e}=$e(q(),"ElStep");return H(s,()=>{s.value.forEach((u,N)=>{u.setIndex(N)})}),Z(Q,{props:n,steps:s,addStep:E,removeStep:r}),H(()=>n.active,(u,N)=>{C(J,u,N)}),(u,N)=>(m(),S("div",{class:v([o(c).b(),o(c).m(u.simple?"simple":u.direction)])},[G(u.$slots,"default"),t(o(e))],2))}});var Te=h(Le,[["__file","steps.vue"]]);const ze=O({title:{type:String,default:""},icon:{type:ee},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Ge=T({name:"ElStep"}),Ke=T({...Ge,props:ze,setup(I){const C=I,n=F("step"),c=U(-1),s=U({}),E=U(""),r=te(Q),e=q();le(()=>{H([()=>r.props.active,()=>r.props.processStatus,()=>r.props.finishStatus],([a])=>{Y(a)},{immediate:!0})});const u=b(()=>C.status||E.value),N=b(()=>{const a=r.steps.value[c.value-1];return a?a.currentStatus:"wait"}),f=b(()=>r.props.alignCenter),B=b(()=>r.props.direction==="vertical"),d=b(()=>r.props.simple),A=b(()=>r.steps.value.length),$=b(()=>{var a;return((a=r.steps.value[A.value-1])==null?void 0:a.uid)===e.uid}),_=b(()=>d.value?"":r.props.space),P=b(()=>[n.b(),n.is(d.value?"simple":r.props.direction),n.is("flex",$.value&&!_.value&&!f.value),n.is("center",f.value&&!B.value&&!d.value)]),K=b(()=>{const a={flexBasis:R(_.value)?`${_.value}px`:_.value?_.value:`${100/(A.value-(f.value?0:1))}%`};return B.value||$.value&&(a.maxWidth=`${100/A.value}%`),a}),D=a=>{c.value=a},W=a=>{const k=a==="wait",w={transitionDelay:`${k?"-":""}${150*c.value}ms`},z=a===r.props.processStatus||k?0:100;w.borderWidth=z&&!d.value?"1px":0,w[r.props.direction==="vertical"?"height":"width"]=`${z}%`,s.value=w},Y=a=>{a>c.value?E.value=r.props.finishStatus:a===c.value&&N.value!=="error"?E.value=r.props.processStatus:E.value="wait";const k=r.steps.value[c.value-1];k&&k.calcProgress(E.value)},L=se({uid:e.uid,getVnode:()=>e.vnode,currentStatus:u,setIndex:D,calcProgress:W});return r.addStep(L),ae(()=>{r.removeStep(L)}),(a,k)=>(m(),S("div",{style:M(o(K)),class:v(o(P))},[y(" icon & line "),V("div",{class:v([o(n).e("head"),o(n).is(o(u))])},[o(d)?y("v-if",!0):(m(),S("div",{key:0,class:v(o(n).e("line"))},[V("i",{class:v(o(n).e("line-inner")),style:M(s.value)},null,6)],2)),V("div",{class:v([o(n).e("icon"),o(n).is(a.icon||a.$slots.icon?"icon":"text")])},[G(a.$slots,"icon",{},()=>[a.icon?(m(),x(o(j),{key:0,class:v(o(n).e("icon-inner"))},{default:l(()=>[(m(),x(oe(a.icon)))]),_:1},8,["class"])):o(u)==="success"?(m(),x(o(j),{key:1,class:v([o(n).e("icon-inner"),o(n).is("status")])},{default:l(()=>[t(o(ne))]),_:1},8,["class"])):o(u)==="error"?(m(),x(o(j),{key:2,class:v([o(n).e("icon-inner"),o(n).is("status")])},{default:l(()=>[t(o(re))]),_:1},8,["class"])):o(d)?y("v-if",!0):(m(),S("div",{key:3,class:v(o(n).e("icon-inner"))},g(c.value+1),3))])],2)],2),y(" title & description "),V("div",{class:v(o(n).e("main"))},[V("div",{class:v([o(n).e("title"),o(n).is(o(u))])},[G(a.$slots,"title",{},()=>[i(g(a.title),1)])],2),o(d)?(m(),S("div",{key:0,class:v(o(n).e("arrow"))},null,2)):(m(),S("div",{key:1,class:v([o(n).e("description"),o(n).is(o(u))])},[G(a.$slots,"description",{},()=>[i(g(a.description),1)])],2))],2)],6))}});var X=h(Ke,[["__file","item.vue"]]);const We=ie(Te,{Step:X}),Ye=ue(X),je={class:"one-click-deploy-page"},He={key:0},Me={key:1},Oe={key:2},Re={class:"mt-6 flex gap-3"},he=T({__name:"one-click-deploy",setup(I){const C=pe(),n=U(0),c=U(!1),s=U({modelName:"",serviceName:"",description:"",capabilities:["chat"],cluster:"",gpuSpec:"A100-1",replicas:2,envVars:"",startupArgs:""});async function E(){c.value=!0,await new Promise(u=>setTimeout(u,2e3));const r=Ie("deployment-services",[]),e={id:Date.now().toString(),serviceName:s.value.serviceName,status:"running",online:!0,modelName:s.value.modelName,replicas:s.value.replicas,cluster:s.value.cluster,createTime:new Date().toLocaleString()};r.unshift(e),Ae("deployment-services",r),c.value=!1,De.success("模型部署成功！"),setTimeout(()=>{C.push("/model-deployment/service-list")},1e3)}return(r,e)=>{const u=Ye,N=We,f=xe,B=we,d=Ce,A=ke,$=Ne,_=be,P=Ve,K=ge,D=Ee,W=Se,Y=ye,L=_e,a=fe,k=ve,w=ce,z=me;return m(),S("div",je,[t(z,null,{default:l(()=>[e[27]||(e[27]=V("h2",{class:"text-2xl font-bold mb-4"}," 一键部署模型 ",-1)),t(N,{active:n.value,"finish-status":"success",class:"mb-6"},{default:l(()=>[t(u,{title:"选择模型"}),t(u,{title:"配置部署"}),t(u,{title:"确认部署"})]),_:1},8,["active"]),n.value===0?(m(),S("div",He,[t(A,{model:s.value,"label-width":"150px"},{default:l(()=>[t(d,{label:"选择模型"},{default:l(()=>[t(B,{modelValue:s.value.modelName,"onUpdate:modelValue":e[0]||(e[0]=p=>s.value.modelName=p),placeholder:"请选择要部署的模型",style:{width:"100%"}},{default:l(()=>[t(f,{label:"Llama-2-7B",value:"llama-2-7b"}),t(f,{label:"ChatGLM-6B",value:"chatglm-6b"}),t(f,{label:"Qwen-7B",value:"qwen-7b"}),t(f,{label:"Stable-Diffusion-XL",value:"sd-xl"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])):y("",!0),n.value===1?(m(),S("div",Me,[t(A,{model:s.value,"label-width":"150px"},{default:l(()=>[t($,{"content-position":"left"},{default:l(()=>e[11]||(e[11]=[i("基础配置",-1)])),_:1,__:[11]}),t(d,{label:"服务名称"},{default:l(()=>[t(_,{modelValue:s.value.serviceName,"onUpdate:modelValue":e[1]||(e[1]=p=>s.value.serviceName=p),placeholder:"请输入服务名称"},null,8,["modelValue"])]),_:1}),t(d,{label:"服务描述"},{default:l(()=>[t(_,{modelValue:s.value.description,"onUpdate:modelValue":e[2]||(e[2]=p=>s.value.description=p),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(d,{label:"服务能力"},{default:l(()=>[t(K,{modelValue:s.value.capabilities,"onUpdate:modelValue":e[3]||(e[3]=p=>s.value.capabilities=p)},{default:l(()=>[t(P,{value:"chat"},{default:l(()=>e[12]||(e[12]=[i("对话",-1)])),_:1,__:[12]}),t(P,{value:"completion"},{default:l(()=>e[13]||(e[13]=[i("文本补全",-1)])),_:1,__:[13]}),t(P,{value:"embedding"},{default:l(()=>e[14]||(e[14]=[i("向量化",-1)])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),t($,{"content-position":"left"},{default:l(()=>e[15]||(e[15]=[i("资源配置",-1)])),_:1,__:[15]}),t(d,{label:"选择集群"},{default:l(()=>[t(B,{modelValue:s.value.cluster,"onUpdate:modelValue":e[4]||(e[4]=p=>s.value.cluster=p),placeholder:"请选择集群"},{default:l(()=>[t(f,{label:"GPU集群-01",value:"gpu-cluster-01"}),t(f,{label:"GPU集群-02",value:"gpu-cluster-02"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"算力规格"},{default:l(()=>[t(W,{modelValue:s.value.gpuSpec,"onUpdate:modelValue":e[5]||(e[5]=p=>s.value.gpuSpec=p)},{default:l(()=>[t(D,{value:"A100-1"},{default:l(()=>e[16]||(e[16]=[i("NVIDIA A100 x 1",-1)])),_:1,__:[16]}),t(D,{value:"A100-2"},{default:l(()=>e[17]||(e[17]=[i("NVIDIA A100 x 2",-1)])),_:1,__:[17]}),t(D,{value:"A100-4"},{default:l(()=>e[18]||(e[18]=[i("NVIDIA A100 x 4",-1)])),_:1,__:[18]}),t(D,{value:"H100-1"},{default:l(()=>e[19]||(e[19]=[i("NVIDIA H100 x 1",-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"副本数"},{default:l(()=>[t(Y,{modelValue:s.value.replicas,"onUpdate:modelValue":e[6]||(e[6]=p=>s.value.replicas=p),min:1,max:10},null,8,["modelValue"]),e[20]||(e[20]=V("span",{class:"ml-2 text-sm text-gray-500"},"系统将自动调度到最优节点",-1))]),_:1,__:[20]}),t($,{"content-position":"left"},{default:l(()=>e[21]||(e[21]=[i("高级配置",-1)])),_:1,__:[21]}),t(d,{label:"环境变量"},{default:l(()=>[t(_,{modelValue:s.value.envVars,"onUpdate:modelValue":e[7]||(e[7]=p=>s.value.envVars=p),type:"textarea",rows:3,placeholder:`KEY1=VALUE1
KEY2=VALUE2`},null,8,["modelValue"])]),_:1}),t(d,{label:"启动参数"},{default:l(()=>[t(_,{modelValue:s.value.startupArgs,"onUpdate:modelValue":e[8]||(e[8]=p=>s.value.startupArgs=p),type:"textarea",rows:2,placeholder:"--max-batch-size=32"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):y("",!0),n.value===2?(m(),S("div",Oe,[t(L,{type:"success",closable:!1,class:"mb-4"},{title:l(()=>e[22]||(e[22]=[V("div",{class:"font-bold"},"部署配置确认",-1)])),_:1}),t(k,{column:2,border:""},{default:l(()=>[t(a,{label:"模型名称"},{default:l(()=>[i(g(s.value.modelName),1)]),_:1}),t(a,{label:"服务名称"},{default:l(()=>[i(g(s.value.serviceName),1)]),_:1}),t(a,{label:"集群"},{default:l(()=>[i(g(s.value.cluster),1)]),_:1}),t(a,{label:"算力规格"},{default:l(()=>[i(g(s.value.gpuSpec),1)]),_:1}),t(a,{label:"副本数"},{default:l(()=>[i(g(s.value.replicas),1)]),_:1}),t(a,{label:"服务能力"},{default:l(()=>[i(g(s.value.capabilities.join(", ")),1)]),_:1})]),_:1}),t(L,{type:"info",closable:!1,class:"mt-4"},{default:l(()=>e[23]||(e[23]=[i(" 系统将根据集群、算力规格及副本数，自动将模型服务调度到最优节点上进行部署 ",-1)])),_:1,__:[23]})])):y("",!0),V("div",Re,[n.value>0?(m(),x(w,{key:0,onClick:e[9]||(e[9]=p=>n.value--)},{default:l(()=>e[24]||(e[24]=[i(" 上一步 ",-1)])),_:1,__:[24]})):y("",!0),n.value<2?(m(),x(w,{key:1,type:"primary",onClick:e[10]||(e[10]=p=>n.value++)},{default:l(()=>e[25]||(e[25]=[i(" 下一步 ",-1)])),_:1,__:[25]})):y("",!0),n.value===2?(m(),x(w,{key:2,type:"primary",loading:c.value,onClick:E},{default:l(()=>e[26]||(e[26]=[i(" 开始部署 ",-1)])),_:1,__:[26]},8,["loading"])):y("",!0)])]),_:1,__:[27]})])}}}),kt=de(he,[["__scopeId","data-v-b87709d3"]]);export{kt as default};
