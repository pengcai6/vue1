import{az as Te,aA as ce,aB as Ee,aC as we,aD as Se,n as q,q as ae,p as W,s as ue,d as D,P as le,k as oe,x as J,r as _,W as V,aE as Y,aF as te,Y as de,b as fe,o as be,I as Re,D as ve,C as x,ao as se,aG as Oe,aH as $e,Q as xe,y as K,h as Be,aI as ke,aJ as Ae,f,E as H,aK as Le,aL as Fe,L as ze,aM as L,am as Me,a4 as Ie,z as ne,aN as Ve,a5 as me,Z as De,as as Ke,aO as re,a7 as Ue,aP as Ge,av as He,j as We,ax as Ye,a2 as qe,a9 as Je}from"./index-C1LNxWrc.js";import{c as F}from"./strings-BOPxCUMK.js";import{U as pe}from"./index-DRLRXOGd.js";import{u as Qe}from"./index-Dh5b_8aS.js";import{g as Xe,b as Ze}from"./_baseClone-0EgoVDGI.js";import{c as je}from"./_initCloneObject-T9RaIEd1.js";import{i as ea}from"./isPlainObject-BS8VhLgB.js";function aa(e,a,n){var u=-1,t=e.length;a<0&&(a=-a>t?0:t+a),n=n>t?t:n,n<0&&(n+=t),t=a>n?0:n-a>>>0,a>>>=0;for(var i=Array(t);++u<t;)i[u]=e[u+a];return i}function ta(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}function sa(e,a){return a.length<2?e:Te(e,aa(a,0,-1))}function na(e,a){return a=ce(a,e),e=sa(e,a),e==null||delete e[Ee(ta(a))]}function la(e){return ea(e)?void 0:e}var oa=1,ra=2,ia=4,ca=we(function(e,a){var n={};if(e==null)return n;var u=!1;a=Se(a,function(i){return i=ce(i,e),u||(u=i.length>1),i}),je(e,Xe(e),n),u&&(n=Ze(n,oa|ra|ia,la));for(var t=a.length;t--;)na(n,a[t]);return n});const Q=Symbol("tabsRootContextKey"),ua=q({tabs:{type:W(Array),default:()=>ae([])},tabRefs:{type:W(Object),default:()=>ae({})}}),he="ElTabBar",da=D({name:he}),fa=D({...da,props:ua,setup(e,{expose:a}){const n=e,u=le(Q);u||oe(he,"<el-tabs><el-tab-bar /></el-tabs>");const t=J("tabs"),i=_(),S=_(),v=()=>{let l=0,b=0;const N=["top","bottom"].includes(u.props.tabPosition)?"width":"height",c=N==="width"?"x":"y",B=c==="x"?"left":"top";return n.tabs.every(C=>{if(se(C.paneName))return!1;const o=n.tabRefs[C.paneName];if(!o)return!1;if(!C.active)return!0;l=o[`offset${F(B)}`],b=o[`client${F(N)}`];const y=window.getComputedStyle(o);return N==="width"&&(b-=Number.parseFloat(y.paddingLeft)+Number.parseFloat(y.paddingRight),l+=Number.parseFloat(y.paddingLeft)),!1}),{[N]:`${b}px`,transform:`translate${F(c)}(${l}px)`}},h=()=>S.value=v(),m=[],E=()=>{m.forEach(l=>l.stop()),m.length=0,Object.values(n.tabRefs).forEach(l=>{m.push(te(l,h))})};V(()=>n.tabs,async()=>{await Y(),h(),E()},{immediate:!0});const g=te(i,()=>h());return de(()=>{m.forEach(l=>l.stop()),m.length=0,g.stop()}),a({ref:i,update:h}),(l,b)=>(be(),fe("div",{ref_key:"barRef",ref:i,class:ve([x(t).e("active-bar"),x(t).is(x(u).props.tabPosition)]),style:Re(S.value)},null,6))}});var ba=ue(fa,[["__file","tab-bar.vue"]]);const va=q({panes:{type:W(Array),default:()=>ae([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ma={tabClick:(e,a,n)=>n instanceof Event,tabRemove:(e,a)=>a instanceof Event},ie="ElTabNav",pa=D({name:ie,props:va,emits:ma,setup(e,{expose:a,emit:n}){const u=le(Q);u||oe(ie,"<el-tabs><tab-nav /></el-tabs>");const t=J("tabs"),i=Oe(),S=$e(),v=_(),h=_(),m=_(),E=_({}),g=_(),l=_(!1),b=_(0),N=_(!1),c=_(!0),B=xe(),C=K(()=>["top","bottom"].includes(u.props.tabPosition)?"width":"height"),o=K(()=>({transform:`translate${C.value==="width"?"X":"Y"}(-${b.value}px)`})),y=()=>{if(!v.value)return;const r=v.value[`offset${F(C.value)}`],d=b.value;if(!d)return;const s=d>r?d-r:0;b.value=s},w=()=>{if(!v.value||!h.value)return;const r=h.value[`offset${F(C.value)}`],d=v.value[`offset${F(C.value)}`],s=b.value;if(r-s<=d)return;const P=r-s>d*2?s+d:r-d;b.value=P},k=async()=>{const r=h.value;if(!l.value||!m.value||!v.value||!r)return;await Y();const d=E.value[e.currentName];if(!d)return;const s=v.value,P=["top","bottom"].includes(u.props.tabPosition),p=d.getBoundingClientRect(),T=s.getBoundingClientRect(),U=P?r.offsetWidth-T.width:r.offsetHeight-T.height,A=b.value;let O=A;P?(p.left<T.left&&(O=A-(T.left-p.left)),p.right>T.right&&(O=A+p.right-T.right)):(p.top<T.top&&(O=A-(T.top-p.top)),p.bottom>T.bottom&&(O=A+(p.bottom-T.bottom))),O=Math.max(O,0),b.value=Math.min(O,U)},z=()=>{var r;if(!h.value||!v.value)return;e.stretch&&((r=g.value)==null||r.update());const d=h.value[`offset${F(C.value)}`],s=v.value[`offset${F(C.value)}`],P=b.value;s<d?(l.value=l.value||{},l.value.prev=P,l.value.next=P+s<d,d-P<s&&(b.value=d-s)):(l.value=!1,P>0&&(b.value=0))},I=r=>{let d=0;switch(r.code){case L.left:case L.up:d=-1;break;case L.right:case L.down:d=1;break;default:return}const s=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let p=s.indexOf(r.target)+d;p<0?p=s.length-1:p>=s.length&&(p=0),s[p].focus({preventScroll:!0}),s[p].click(),M()},M=()=>{c.value&&(N.value=!0)},R=()=>N.value=!1,X=(r,d)=>{E.value[d]=r},_e=async()=>{await Y();const r=E.value[e.currentName];r?.focus({preventScroll:!0})};return V(i,r=>{r==="hidden"?c.value=!1:r==="visible"&&setTimeout(()=>c.value=!0,50)}),V(S,r=>{r?setTimeout(()=>c.value=!0,50):c.value=!1}),te(m,z),Be(()=>setTimeout(()=>k(),0)),ke(()=>z()),a({scrollToActiveTab:k,removeFocus:R,focusActiveTab:_e,tabListRef:h,tabBarRef:g,scheduleRender:()=>Ae(B)}),()=>{const r=l.value?[f("span",{class:[t.e("nav-prev"),t.is("disabled",!l.value.prev)],onClick:y},[f(H,null,{default:()=>[f(Le,null,null)]})]),f("span",{class:[t.e("nav-next"),t.is("disabled",!l.value.next)],onClick:w},[f(H,null,{default:()=>[f(Fe,null,null)]})])]:null,d=e.panes.map((s,P)=>{var p,T,U,A;const O=s.uid,Z=s.props.disabled,G=(T=(p=s.props.name)!=null?p:s.index)!=null?T:`${P}`,j=!Z&&(s.isClosable||e.editable);s.index=`${P}`;const Ne=j?f(H,{class:"is-icon-close",onClick:$=>n("tabRemove",s,$)},{default:()=>[f(ze,null,null)]}):null,Ce=((A=(U=s.slots).label)==null?void 0:A.call(U))||s.props.label,Pe=!Z&&s.active?0:-1;return f("div",{ref:$=>X($,G),class:[t.e("item"),t.is(u.props.tabPosition),t.is("active",s.active),t.is("disabled",Z),t.is("closable",j),t.is("focus",N.value)],id:`tab-${G}`,key:`tab-${O}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":s.active,tabindex:Pe,onFocus:()=>M(),onBlur:()=>R(),onClick:$=>{R(),n("tabClick",s,G,$)},onKeydown:$=>{j&&($.code===L.delete||$.code===L.backspace)&&n("tabRemove",s,$)}},[Ce,Ne])});return B.value,f("div",{ref:m,class:[t.e("nav-wrap"),t.is("scrollable",!!l.value),t.is(u.props.tabPosition)]},[r,f("div",{class:t.e("nav-scroll"),ref:v},[e.panes.length>0?f("div",{class:[t.e("nav"),t.is(u.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(u.props.tabPosition))],ref:h,style:o.value,role:"tablist",onKeydown:I},[e.type?null:f(ba,{ref:g,tabs:[...e.panes],tabRefs:E.value},null),d]):null])])}}}),ha=q({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:W(Function),default:()=>!0},stretch:Boolean}),ee=e=>Me(e)||Ie(e),ga={[pe]:e=>ee(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ee(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ee(e),tabAdd:()=>!0},ya=D({name:"ElTabs",props:ha,emits:ga,setup(e,{emit:a,slots:n,expose:u}){var t;const i=J("tabs"),S=K(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:h,removeChild:m,ChildrenSorter:E}=Qe(me(),"ElTabPane"),g=_(),l=_((t=e.modelValue)!=null?t:"0"),b=async(o,y=!1)=>{var w,k,z,I;if(!(l.value===o||se(o)))try{let M;if(e.beforeLeave){const R=e.beforeLeave(o,l.value);M=R instanceof Promise?await R:R}else M=!0;if(M!==!1){const R=(w=v.value.find(X=>X.paneName===l.value))==null?void 0:w.isFocusInsidePane();l.value=o,y&&(a(pe,o),a("tabChange",o)),(z=(k=g.value)==null?void 0:k.removeFocus)==null||z.call(k),R&&((I=g.value)==null||I.focusActiveTab())}}catch{}},N=(o,y,w)=>{o.props.disabled||(a("tabClick",o,w),b(y,!0))},c=(o,y)=>{o.props.disabled||se(o.props.name)||(y.stopPropagation(),a("edit",o.props.name,"remove"),a("tabRemove",o.props.name))},B=()=>{a("edit",void 0,"add"),a("tabAdd")},C=o=>{const y=o.el.firstChild,w=["bottom","right"].includes(e.tabPosition)?o.children[0].el:o.children[1].el;y!==w&&y.before(w)};return V(()=>e.modelValue,o=>b(o)),V(l,async()=>{var o;await Y(),(o=g.value)==null||o.scrollToActiveTab()}),De(Q,{props:e,currentName:l,registerPane:h,unregisterPane:m,nav$:g}),u({currentName:l,get tabNavRef(){return ca(g.value,["scheduleRender"])}}),()=>{const o=n["add-icon"],y=e.editable||e.addable?f("div",{class:[i.e("new-tab"),S.value&&i.e("new-tab-vertical")],tabindex:"0",onClick:B,onKeydown:I=>{[L.enter,L.numpadEnter].includes(I.code)&&B()}},[o?ne(n,"add-icon"):f(H,{class:i.is("icon-plus")},{default:()=>[f(Ve,null,null)]})]):null,w=()=>f(pa,{ref:g,currentName:l.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:N,onTabRemove:c},null),k=f("div",{class:[i.e("header"),S.value&&i.e("header-vertical"),i.is(e.tabPosition)]},[f(E,null,{default:w,$stable:!0}),y]),z=f("div",{class:i.e("content")},[ne(n,"default")]);return f("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}],onVnodeMounted:C,onVnodeUpdated:C},[z,k])}}});var _a=ya;const Na=q({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ge="ElTabPane",Ca=D({name:ge}),Pa=D({...Ca,props:Na,setup(e){const a=e,n=me(),u=Ke(),t=le(Q);t||oe(ge,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=J("tab-pane"),S=_(),v=_(),h=K(()=>a.closable||t.props.closable),m=re(()=>{var c;return t.currentName.value===((c=a.name)!=null?c:v.value)}),E=_(m.value),g=K(()=>{var c;return(c=a.name)!=null?c:v.value}),l=re(()=>!a.lazy||E.value||m.value),b=()=>{var c;return(c=S.value)==null?void 0:c.contains(document.activeElement)};V(m,c=>{c&&(E.value=!0)});const N=Ue({uid:n.uid,getVnode:()=>n.vnode,slots:u,props:a,paneName:g,active:m,index:v,isClosable:h,isFocusInsidePane:b});return t.registerPane(N),de(()=>{t.unregisterPane(N)}),Ge(()=>{var c;u.label&&((c=t.nav$.value)==null||c.scheduleRender())}),(c,B)=>x(l)?He((be(),fe("div",{key:0,id:`pane-${x(g)}`,ref_key:"paneRef",ref:S,class:ve(x(i).b()),role:"tabpanel","aria-hidden":!x(m),"aria-labelledby":`tab-${x(g)}`},[ne(c.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ye,x(m)]]):We("v-if",!0)}});var ye=ue(Pa,[["__file","tab-pane.vue"]]);const xa=qe(_a,{TabPane:ye}),Ba=Je(ye);export{xa as E,Ba as a};
