import{v as Ct,al as kt,_ as Ce,d as re,r as D,A as de,B as he,ao as ee,j as Fe,aI as et,l as U,o as S,w as p,C as Pe,J as tt,H as M,e as Se,a8 as nt,b4 as bt,a2 as at,bn as Te,be as Et,q as pe,s as Ae,a7 as _t,U as ge,am as ot,N as wt,bo as Dt,bp as Ye,aF as ze,P as se,ae as Je,Z as fe,bq as Ie,br as xt,k as X,av as Be,ax as $e,c as j,b as O,a as i,m as oe,I as Y,F as ye,D as Ne,bf as Kt,E as lt,bs as It,W as V,bt as St,a5 as st,ba as Tt,aM as J,n as ue,a6 as At,x as me,z as zt,bu as Bt,i as I,aN as Ge}from"./index-DAZDpghP.js";import{E as $t}from"./dialog-CI4qXYgt.js";import{E as Ot,a as Lt}from"./radio-ChFPTsFt.js";import{E as Rt,a as Ft}from"./col-1pbAQj7U.js";import{a as Pt}from"./checkbox-DDntw5na.js";import{a as Ut,E as Mt}from"./card-_e8Y2itV.js";import{E as Vt}from"./pagination-BBEphupa.js";/* empty css            */import{s as qt,E as jt,a as Ht}from"./select-B_Nc0zOl.js";import"./scrollbar-BKn1N4ug.js";import{E as Wt}from"./input-BsUoEHjr.js";import{a as Yt,E as Jt}from"./table-column-CkszfM6q.js";import{E as Gt,a as Zt}from"./form-item-D50nbGgb.js";import{E as Qt}from"./button-CFFx6FdR.js";import{E as Xt}from"./index-i9SNigSW.js";import{i as en}from"./isEqual-DlB8YXyV.js";import{E as q}from"./index-B4p_U5VT.js";import{E as Ze}from"./index-TLwRQi5N.js";import{_ as tn}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./event-D5_Wo8Xc.js";import"./scroll-PXqKi88e.js";import"./index-17xiCnpu.js";import"./strings-BN0-5NCg.js";import"./debounce-Bv_84CHO.js";import"./_baseIteratee-DgY2c_zD.js";import"./isPlainObject-CnEW4LJ3.js";import"./_baseClone-BBryStzM.js";import"./validator-BGx-pjuX.js";const nn=Ct({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:kt,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),an=re({name:"ElText"}),on=re({...an,props:nn,setup(t){const e=t,n=D(),o=Ut(),a=de("text"),l=he(()=>[a.b(),a.m(e.type),a.m(o.value),a.is("truncated",e.truncated),a.is("line-clamp",!ee(e.lineClamp))]),r=()=>{var h,c,N,d,m,C,k;if(bt().title)return;let b=!1;const E=((h=n.value)==null?void 0:h.textContent)||"";if(e.truncated){const x=(c=n.value)==null?void 0:c.offsetWidth,K=(N=n.value)==null?void 0:N.scrollWidth;x&&K&&K>x&&(b=!0)}else if(!ee(e.lineClamp)){const x=(d=n.value)==null?void 0:d.offsetHeight,K=(m=n.value)==null?void 0:m.scrollHeight;x&&K&&K>x&&(b=!0)}b?(C=n.value)==null||C.setAttribute("title",E):(k=n.value)==null||k.removeAttribute("title")};return Fe(r),et(r),(h,c)=>(S(),U(nt(h.tag),{ref_key:"textRef",ref:n,class:M(Se(l)),style:tt({"-webkit-line-clamp":h.lineClamp})},{default:p(()=>[Pe(h.$slots,"default")]),_:3},8,["class","style"]))}});var ln=Ce(on,[["__file","text.vue"]]);const sn=at(ln),le="$treeNodeId",Qe=function(t,e){!e||e[le]||Object.defineProperty(e,le,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Ue=(t,e)=>e==null?void 0:e[t||le],Oe=(t,e,n)=>{const o=t.value.currentNode;n();const a=t.value.currentNode;o!==a&&e("current-change",a?a.data:null,a)},Le=t=>{let e=!0,n=!0,o=!0;for(let a=0,l=t.length;a<l;a++){const r=t[a];(r.checked!==!0||r.indeterminate)&&(e=!1,r.disabled||(o=!1)),(r.checked!==!1||r.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:o,half:!e&&!n}},ce=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:o}=Le(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const a=t.parent;!a||a.level===0||t.store.checkStrictly||ce(a)},ve=function(t,e){const n=t.store.props,o=t.data||{},a=n[e];if(ge(a))return a(o,t);if(ot(a))return o[a];if(ee(a)){const l=o[e];return ee(l)?"":l}},Re=function(t,e){t.forEach(n=>{n.canFocus=e,Re(n.childNodes,e)})};let rn=0;class te{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=rn++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Te(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const o=n.props;if(o&&typeof o.isLeaf<"u"){const r=ve(this,"isLeaf");Et(r)&&(this.isLeafByUser=r)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),pe(this.data)||Qe(this,this.data),!this.data)return;const a=n.defaultExpandedKeys,l=n.key;l&&!Ae(this.key)&&a&&a.includes(this.key)&&this.expand(null,n.autoExpandParent),l&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((e=this.parent)==null?void 0:e.expanded)===!0)&&(this.canFocus=!0)}setData(e){pe(e)||Qe(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&pe(this.data)?n=this.data:n=ve(this,"children")||[];for(let o=0,a=n.length;o<a;o++)this.insertChild({data:n[o]})}get label(){return ve(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return ve(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(o=>o===e||n&&o.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,o){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof te)){if(!o){const a=this.getChildren(!0);a!=null&&a.includes(e.data)||(ee(n)||n<0?a==null||a.push(e.data):a==null||a.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=_t(new te(e)),e instanceof te&&e.initialize()}e.level=this.level+1,ee(n)||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let o;n&&(o=this.childNodes.indexOf(n)),this.insertChild(e,o)}insertAfter(e,n){let o;n&&(o=this.childNodes.indexOf(n),o!==-1&&(o+=1)),this.insertChild(e,o)}removeChild(e){const n=this.getChildren()||[],o=n.indexOf(e.data);o>-1&&n.splice(o,1);const a=this.childNodes.indexOf(e);a>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(a,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let o=0;o<this.childNodes.length;o++)if(this.childNodes[o].data===e){n=this.childNodes[o];break}n&&this.removeChild(n)}expand(e,n){const o=()=>{if(n){let a=this.parent;for(;a&&a.level>0;)a.expanded=!0,a=a.parent}this.expanded=!0,e&&e(),Re(this.childNodes,!0)};this.shouldLoadData()?this.loadData(a=>{pe(a)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||ce(this),o())}):o()}doCreateChildren(e,n={}){e.forEach(o=>{this.insertChild(Object.assign({data:o},n),void 0,!0)})}collapse(){this.expanded=!1,Re(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,o,a){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:r,allWithoutDisable:h}=Le(this.childNodes);!this.isLeaf&&!r&&h&&(this.checked=!1,e=!1);const c=()=>{if(n){const N=this.childNodes;for(let C=0,k=N.length;C<k;C++){const y=N[C];a=a||e!==!1;const b=y.disabled?y.checked:a;y.setChecked(b,n,!0,a)}const{half:d,all:m}=Le(N);m||(this.checked=m,this.indeterminate=d)}};if(this.shouldLoadData()){this.loadData(()=>{c(),ce(this)},{checked:e!==!1});return}else c()}const l=this.parent;!l||l.level===0||o||ce(l)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const o=this.store.props;let a="children";return o&&(a=o.children||"children"),ee(n[a])&&(n[a]=null),e&&!n[a]&&(n[a]=[]),n[a]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(l=>l.data),o={},a=[];e.forEach((l,r)=>{const h=l[le];!!h&&n.findIndex(N=>(N==null?void 0:N[le])===h)>=0?o[h]={index:r,data:l}:a.push({index:r,data:l})}),this.store.lazy||n.forEach(l=>{o[l==null?void 0:l[le]]||this.removeChildByData(l)}),a.forEach(({index:l,data:r})=>{this.insertChild({data:r},l)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const o=l=>{this.childNodes=[],this.doCreateChildren(l,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,l)},a=()=>{this.loading=!1};this.store.load(this,o,a)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const o=n.shift();n.unshift(...o.childNodes),e(o)}}reInitChecked(){this.store.checkStrictly||ce(this)}}class dn{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in e)Te(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new te({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},wt)}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,o=this.lazy,a=async function(l){const r=l.root?l.root.childNodes:l.childNodes;for(const[h,c]of r.entries())c.visible=!!(n!=null&&n.call(c,e,c.data,c)),h%80===0&&h>0&&await ze(),await a(c);if(!l.visible&&r.length){let h=!0;h=!r.some(c=>c.visible),l.root?l.root.visible=h===!1:l.visible=h===!1}e&&l.visible&&!l.isLeaf&&(!o||l.loaded)&&l.expand()};a(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof te)return e;const n=Dt(e)?Ue(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){var o;const a=this.getNode(n);(o=a.parent)==null||o.insertBefore({data:e},a)}insertAfter(e,n){var o;const a=this.getNode(n);(o=a.parent)==null||o.insertAfter({data:e},a)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const o=Ye(n)?this.root:this.getNode(n);o&&o.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(o=>{const a=n[o];a&&a.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const n=this.defaultCheckedKeys||[];!Ae(e.key)&&n.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;if(!(!e||!e.data))if(!n)this.nodesMap[e.id]=e;else{const o=e.key;Ae(o)||(this.nodesMap[o]=e)}}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(o=>{this.deregisterNode(o)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const o=[],a=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(h=>{(h.checked||n&&h.indeterminate)&&(!e||e&&h.isLeaf)&&o.push(h.data),a(h)})};return a(this),o}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(l=>{l.indeterminate&&e.push(l.data),n(l)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const o in n)Te(n,o)&&e.push(n[o]);return e}updateChildren(e,n){const o=this.nodesMap[e];if(!o)return;const a=o.childNodes;for(let l=a.length-1;l>=0;l--){const r=a[l];this.remove(r.data)}for(let l=0,r=n.length;l<r;l++){const h=n[l];this.append(h,o.data)}}_setCheckedKeys(e,n=!1,o){const a=this._getAllNodes().sort((c,N)=>c.level-N.level),l=Object.create(null),r=Object.keys(o);a.forEach(c=>c.setChecked(!1,!1));const h=c=>{c.childNodes.forEach(N=>{var d;l[N.data[e]]=!0,(d=N.childNodes)!=null&&d.length&&h(N)})};for(let c=0,N=a.length;c<N;c++){const d=a[c],m=d.data[e].toString();if(!r.includes(m)){d.checked&&!l[m]&&d.setChecked(!1,!1);continue}if(d.childNodes.length&&h(d),d.isLeaf||this.checkStrictly){d.setChecked(!0,!1);continue}if(d.setChecked(!0,!0),n){d.setChecked(!1,!1);const k=function(y){y.childNodes.forEach(E=>{E.isLeaf||E.setChecked(!1,!1),k(E)})};k(d)}}}setCheckedNodes(e,n=!1){const o=this.key,a={};e.forEach(l=>{a[(l||{})[o]]=!0}),this._setCheckedKeys(o,n,a)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const o=this.key,a={};e.forEach(l=>{a[l]=!0}),this._setCheckedKeys(o,n,a)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const o=this.getNode(n);o&&o.expand(null,this.autoExpandParent)})}setChecked(e,n,o){const a=this.getNode(e);a&&a.setChecked(!!n,o)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){var o;const a=e[this.key],l=this.nodesMap[a];this.setCurrentNode(l),n&&this.currentNode&&this.currentNode.level>1&&((o=this.currentNode.parent)==null||o.expand(null,!0))}setCurrentNodeKey(e,n=!0){var o;if(this.currentNodeKey=e,Ye(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const a=this.getNode(e);a&&(this.setCurrentNode(a),n&&this.currentNode&&this.currentNode.level>1&&((o=this.currentNode.parent)==null||o.expand(null,!0)))}}const Me="RootTree",rt="NodeInstance",Xe="TreeNodeMap",un=re({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=de("tree"),n=se(rt),o=se(Me);return()=>{const a=t.node,{data:l,store:r}=a;return t.renderContent?t.renderContent(Je,{_self:n,node:a,data:l,store:r}):Pe(o.ctx.slots,"default",{node:a,data:l},()=>[Je(sn,{tag:"span",truncated:!0,class:e.be("node","label")},()=>[a.label])])}}});var cn=Ce(un,[["__file","tree-node-content.vue"]]);function dt(t){const e=se(Xe,null),n={treeNodeExpand:o=>{var a;t.node!==o&&((a=t.node)==null||a.collapse())},children:[]};return e&&e.children.push(n),fe(Xe,n),{broadcastExpanded:o=>{if(t.accordion)for(const a of n.children)a.treeNodeExpand(o)}}}const it=Symbol("dragEvents");function hn({props:t,ctx:e,el$:n,dropIndicator$:o,store:a}){const l=de("tree"),r=D({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return fe(it,{treeNodeDragStart:({event:d,treeNode:m})=>{if(d.dataTransfer){if(ge(t.allowDrag)&&!t.allowDrag(m.node))return d.preventDefault(),!1;d.dataTransfer.effectAllowed="move";try{d.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=m,e.emit("node-drag-start",m.node,d)}},treeNodeDragOver:({event:d,treeNode:m})=>{if(!d.dataTransfer)return;const C=m,k=r.value.dropNode;k&&k.node.id!==C.node.id&&Ie(k.$el,l.is("drop-inner"));const y=r.value.draggingNode;if(!y||!C)return;let b=!0,E=!0,x=!0,K=!0;ge(t.allowDrop)&&(b=t.allowDrop(y.node,C.node,"prev"),K=E=t.allowDrop(y.node,C.node,"inner"),x=t.allowDrop(y.node,C.node,"next")),d.dataTransfer.dropEffect=E||b||x?"move":"none",(b||E||x)&&(k==null?void 0:k.node.id)!==C.node.id&&(k&&e.emit("node-drag-leave",y.node,k.node,d),e.emit("node-drag-enter",y.node,C.node,d)),b||E||x?r.value.dropNode=C:r.value.dropNode=null,C.node.nextSibling===y.node&&(x=!1),C.node.previousSibling===y.node&&(b=!1),C.node.contains(y.node,!1)&&(E=!1),(y.node===C.node||y.node.contains(C.node))&&(b=!1,E=!1,x=!1);const B=C.$el,H=B.querySelector(`.${l.be("node","content")}`).getBoundingClientRect(),W=n.value.getBoundingClientRect();let z;const G=b?E?.25:x?.45:1:-1,ne=x?E?.75:b?.55:0:1;let g=-9999;const _=d.clientY-H.top;_<H.height*G?z="before":_>H.height*ne?z="after":E?z="inner":z="none";const A=B.querySelector(`.${l.be("node","expand-icon")}`).getBoundingClientRect(),L=o.value;z==="before"?g=A.top-W.top:z==="after"&&(g=A.bottom-W.top),L.style.top=`${g}px`,L.style.left=`${A.right-W.left}px`,z==="inner"?xt(B,l.is("drop-inner")):Ie(B,l.is("drop-inner")),r.value.showDropIndicator=z==="before"||z==="after",r.value.allowDrop=r.value.showDropIndicator||K,r.value.dropType=z,e.emit("node-drag-over",y.node,C.node,d)},treeNodeDragEnd:d=>{var m,C;const{draggingNode:k,dropType:y,dropNode:b}=r.value;if(d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect="move"),k!=null&&k.node.data&&b){const E={data:k.node.data};y!=="none"&&k.node.remove(),y==="before"?(m=b.node.parent)==null||m.insertBefore(E,b.node):y==="after"?(C=b.node.parent)==null||C.insertAfter(E,b.node):y==="inner"&&b.node.insertChild(E),y!=="none"&&(a.value.registerNode(E),a.value.key&&k.node.eachNode(x=>{var K;(K=a.value.nodesMap[x.data[a.value.key]])==null||K.setChecked(x.checked,!a.value.checkStrictly)})),Ie(b.$el,l.is("drop-inner")),e.emit("node-drag-end",k.node,b.node,y,d),y!=="none"&&e.emit("node-drop",k.node,b.node,y,d)}k&&!b&&e.emit("node-drag-end",k.node,null,y,d),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const fn=re({name:"ElTreeNode",components:{ElCollapseTransition:It,ElCheckbox:Pt,NodeContent:cn,ElIcon:lt,Loading:Kt},props:{node:{type:te,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(t,e){const n=de("tree"),{broadcastExpanded:o}=dt(t),a=se(Me),l=D(!1),r=D(!1),h=D(),c=D(),N=D(),d=se(it),m=st();fe(rt,m),t.node.expanded&&(l.value=!0,r.value=!0);const C=a.props.props.children||"children";V(()=>{var g;const _=(g=t.node.data)==null?void 0:g[C];return _&&[..._]},()=>{t.node.updateChildren()}),V(()=>t.node.indeterminate,g=>{b(t.node.checked,g)}),V(()=>t.node.checked,g=>{b(g,t.node.indeterminate)}),V(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),V(()=>t.node.expanded,g=>{ze(()=>l.value=g),g&&(r.value=!0)});const k=g=>Ue(a.props.nodeKey,g.data),y=g=>{const _=t.props.class;if(!_)return{};let A;if(ge(_)){const{data:L}=g;A=_(L,g)}else A=_;return ot(A)?{[A]:!0}:A},b=(g,_)=>{(h.value!==g||c.value!==_)&&a.ctx.emit("check-change",t.node.data,g,_),h.value=g,c.value=_},E=g=>{Oe(a.store,a.ctx.emit,()=>{var _;if((_=a==null?void 0:a.props)==null?void 0:_.nodeKey){const L=k(t.node);a.store.value.setCurrentNodeKey(L)}else a.store.value.setCurrentNode(t.node)}),a.currentNode.value=t.node,a.props.expandOnClickNode&&K(),(a.props.checkOnClickNode||t.node.isLeaf&&a.props.checkOnClickLeaf&&t.showCheckbox)&&!t.node.disabled&&B(!t.node.checked),a.ctx.emit("node-click",t.node.data,t.node,m,g)},x=g=>{var _;(_=a.instance.vnode.props)!=null&&_.onNodeContextmenu&&(g.stopPropagation(),g.preventDefault()),a.ctx.emit("node-contextmenu",g,t.node.data,t.node,m)},K=()=>{t.node.isLeaf||(l.value?(a.ctx.emit("node-collapse",t.node.data,t.node,m),t.node.collapse()):t.node.expand(()=>{e.emit("node-expand",t.node.data,t.node,m)}))},B=g=>{t.node.setChecked(g,!(a!=null&&a.props.checkStrictly)),ze(()=>{const _=a.store.value;a.ctx.emit("check",t.node.data,{checkedNodes:_.getCheckedNodes(),checkedKeys:_.getCheckedKeys(),halfCheckedNodes:_.getHalfCheckedNodes(),halfCheckedKeys:_.getHalfCheckedKeys()})})};return{ns:n,node$:N,tree:a,expanded:l,childNodeRendered:r,oldChecked:h,oldIndeterminate:c,getNodeKey:k,getNodeClass:y,handleSelectChange:b,handleClick:E,handleContextMenu:x,handleExpandIconClick:K,handleCheckChange:B,handleChildNodeExpand:(g,_,A)=>{o(_),a.ctx.emit("node-expand",g,_,A)},handleDragStart:g=>{a.props.draggable&&d.treeNodeDragStart({event:g,treeNode:t})},handleDragOver:g=>{g.preventDefault(),a.props.draggable&&d.treeNodeDragOver({event:g,treeNode:{$el:N.value,node:t.node}})},handleDrop:g=>{g.preventDefault()},handleDragEnd:g=>{a.props.draggable&&d.treeNodeDragEnd(g)},CaretRight:St}}});function pn(t,e,n,o,a,l){const r=X("el-icon"),h=X("el-checkbox"),c=X("loading"),N=X("node-content"),d=X("el-tree-node"),m=X("el-collapse-transition");return Be((S(),j("div",{ref:"node$",class:M([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:Y(t.handleClick,["stop"]),onContextmenu:t.handleContextMenu,onDragstart:Y(t.handleDragStart,["stop"]),onDragover:Y(t.handleDragOver,["stop"]),onDragend:Y(t.handleDragEnd,["stop"]),onDrop:Y(t.handleDrop,["stop"])},[O("div",{class:M(t.ns.be("node","content")),style:tt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(S(),U(r,{key:0,class:M([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:Y(t.handleExpandIconClick,["stop"])},{default:p(()=>[(S(),U(nt(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):oe("v-if",!0),t.showCheckbox?(S(),U(h,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:Y(()=>{},["stop"]),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):oe("v-if",!0),t.node.loading?(S(),U(r,{key:2,class:M([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:p(()=>[i(c)]),_:1},8,["class"])):oe("v-if",!0),i(N,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),i(m,null,{default:p(()=>[!t.renderAfterExpand||t.childNodeRendered?Be((S(),j("div",{key:0,class:M(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded,onClick:Y(()=>{},["stop"])},[(S(!0),j(ye,null,Ne(t.node.childNodes,C=>(S(),U(d,{key:t.getNodeKey(C),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:C,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[$e,t.expanded]]):oe("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[$e,t.node.visible]])}var mn=Ce(fn,[["render",pn],["__file","tree-node.vue"]]);function vn({el$:t},e){const n=de("tree");Fe(()=>{l()}),et(()=>{Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(h=>{h.setAttribute("tabindex","-1")})});function o(r,h){var c,N;const d=e.value.getNode(r[h].dataset.key);return d.canFocus&&d.visible&&(((c=d.parent)==null?void 0:c.expanded)||((N=d.parent)==null?void 0:N.level)===0)}Tt(t,"keydown",r=>{const h=r.target;if(!h.className.includes(n.b("node")))return;const c=r.code,N=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),d=N.indexOf(h);let m;if([J.up,J.down].includes(c)){if(r.preventDefault(),c===J.up){m=d===-1?0:d!==0?d-1:N.length-1;const k=m;for(;!o(N,m);){if(m--,m===k){m=-1;break}m<0&&(m=N.length-1)}}else{m=d===-1?0:d<N.length-1?d+1:0;const k=m;for(;!o(N,m);){if(m++,m===k){m=-1;break}m>=N.length&&(m=0)}}m!==-1&&N[m].focus()}[J.left,J.right].includes(c)&&(r.preventDefault(),h.click());const C=h.querySelector('[type="checkbox"]');[J.enter,J.numpadEnter,J.space].includes(c)&&C&&(r.preventDefault(),C.click())});const l=()=>{var r;if(!t.value)return;const h=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(d=>{d.setAttribute("tabindex","-1")});const N=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(N.length){N[0].setAttribute("tabindex","0");return}(r=h[0])==null||r.setAttribute("tabindex","0")}}const gn=re({name:"ElTree",components:{ElTreeNode:mn},props:{data:{type:me(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:me(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:me(Function)},allowDrop:{type:me(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:At}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=zt(),o=de("tree"),a=se(qt,null),l=D(new dn({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));l.value.initialize();const r=D(l.value.root),h=D(null),c=D(null),N=D(null),{broadcastExpanded:d}=dt(t),{dragState:m}=hn({props:t,ctx:e,el$:c,dropIndicator$:N,store:l});vn({el$:c},l);const C=he(()=>{const{childNodes:f}=r.value,w=a?a.hasFilteredOptions!==0:!1;return(!f||f.length===0||f.every(({visible:R})=>!R))&&!w});V(()=>t.currentNodeKey,f=>{l.value.setCurrentNodeKey(f??null)}),V(()=>t.defaultCheckedKeys,(f,w)=>{en(f,w)||l.value.setDefaultCheckedKey(f??[])}),V(()=>t.defaultExpandedKeys,f=>{l.value.setDefaultExpandedKeys(f??[])}),V(()=>t.data,f=>{l.value.setData(f)},{deep:!0}),V(()=>t.checkStrictly,f=>{l.value.checkStrictly=f});const k=f=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");l.value.filter(f)},y=f=>Ue(t.nodeKey,f.data),b=f=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const w=l.value.getNode(f);if(!w)return[];const R=[w.data];let Z=w.parent;for(;Z&&Z!==r.value;)R.push(Z.data),Z=Z.parent;return R.reverse()},E=(f,w)=>l.value.getCheckedNodes(f,w),x=f=>l.value.getCheckedKeys(f),K=()=>{const f=l.value.getCurrentNode();return f?f.data:null},B=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const f=K();return f?f[t.nodeKey]:null},H=(f,w)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");l.value.setCheckedNodes(f,w)},W=(f,w)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");l.value.setCheckedKeys(f,w)},z=(f,w,R)=>{l.value.setChecked(f,w,R)},G=()=>l.value.getHalfCheckedNodes(),ne=()=>l.value.getHalfCheckedKeys(),g=(f,w=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Oe(l,e.emit,()=>{d(f),l.value.setUserCurrentNode(f,w)})},_=(f,w=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Oe(l,e.emit,()=>{d(),l.value.setCurrentNodeKey(f??null,w)})},A=f=>l.value.getNode(f),L=f=>{l.value.remove(f)},ke=(f,w)=>{l.value.append(f,w)},be=(f,w)=>{l.value.insertBefore(f,w)},Ee=(f,w)=>{l.value.insertAfter(f,w)},_e=(f,w,R)=>{d(w),e.emit("node-expand",f,w,R)},we=(f,w)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");l.value.updateChildren(f,w)};return fe(Me,{ctx:e,props:t,store:l,root:r,currentNode:h,instance:st()}),fe(Bt,void 0),{ns:o,store:l,root:r,currentNode:h,dragState:m,el$:c,dropIndicator$:N,isEmpty:C,filter:k,getNodeKey:y,getNodePath:b,getCheckedNodes:E,getCheckedKeys:x,getCurrentNode:K,getCurrentKey:B,setCheckedNodes:H,setCheckedKeys:W,setChecked:z,getHalfCheckedNodes:G,getHalfCheckedKeys:ne,setCurrentNode:g,setCurrentKey:_,t:n,getNode:A,remove:L,append:ke,insertBefore:be,insertAfter:Ee,handleNodeExpand:_e,updateKeyChildren:we}}});function yn(t,e,n,o,a,l){const r=X("el-tree-node");return S(),j("div",{ref:"el$",class:M([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(S(!0),j(ye,null,Ne(t.root.childNodes,h=>(S(),U(r,{key:t.getNodeKey(h),node:h,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(S(),j("div",{key:0,class:M(t.ns.e("empty-block"))},[Pe(t.$slots,"empty",{},()=>{var h;return[O("span",{class:M(t.ns.e("empty-text"))},ue((h=t.emptyText)!=null?h:t.t("el.tree.emptyText")),3)]})],2)):oe("v-if",!0),Be(O("div",{ref:"dropIndicator$",class:M(t.ns.e("drop-indicator"))},null,2),[[$e,t.dragState.showDropIndicator]])],2)}var Nn=Ce(gn,[["render",yn],["__file","tree.vue"]]);const Cn=at(Nn),kn={class:"user-role-page"},bn={class:"card-header"},En={class:"pagination"},_n={class:"card-header"},wn={class:"card-header"},Dn={class:"title"},xn={style:{"margin-top":"16px","text-align":"right"}},Kn=re({__name:"user-role",setup(t){const e=D([]),n=D({userName:"",roleId:"",status:""}),o=D(1),a=D(10),l=D(!1),r=D("create"),h=D(),c=D({userId:"",userName:"",email:"",roleId:"",status:"active"}),N={userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}]},d=D([]),m=D(!1),C=D("create"),k=D(),y=D({id:"",name:"",description:""}),b={name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},E=D(null),x=D(),K=D({}),B=[{id:"model",label:"模型管理",children:[{id:"model.view",label:"查看模型"},{id:"model.deploy",label:"部署模型"},{id:"model.delete",label:"删除模型"}]},{id:"dataset",label:"数据集管理",children:[{id:"dataset.view",label:"查看数据集"},{id:"dataset.create",label:"创建数据集"},{id:"dataset.edit",label:"编辑数据集"},{id:"dataset.delete",label:"删除数据集"}]},{id:"finetune",label:"模型微调",children:[{id:"finetune.view",label:"查看任务"},{id:"finetune.create",label:"创建任务"},{id:"finetune.stop",label:"停止任务"}]},{id:"resource",label:"资源管理",children:[{id:"resource.view",label:"查看资源"},{id:"resource.allocate",label:"分配资源"},{id:"resource.release",label:"释放资源"}]},{id:"user",label:"用户管理",children:[{id:"user.view",label:"查看用户"},{id:"user.create",label:"创建用户"},{id:"user.edit",label:"编辑用户"},{id:"user.delete",label:"删除用户"}]}],H=he(()=>E.value?K.value[E.value.id]||[]:[]),W=()=>{const u=[{id:"role-admin",name:"系统管理员",description:"拥有系统所有权限",userCount:2,isSystem:!0},{id:"role-developer",name:"开发者",description:"可以部署模型、创建微调任务",userCount:15,isSystem:!1},{id:"role-operator",name:"运维人员",description:"负责资源管理和监控",userCount:5,isSystem:!1},{id:"role-viewer",name:"访客",description:"只有查看权限",userCount:20,isSystem:!1}],s=[{userId:"user-001",userName:"管理员",email:"admin@example.com",roleId:"role-admin",roleName:"系统管理员",status:"active",createdAt:"2024-01-10 10:00:00"},{userId:"user-002",userName:"张三",email:"zhangsan@example.com",roleId:"role-developer",roleName:"开发者",status:"active",createdAt:"2024-02-15 09:30:00"},{userId:"user-003",userName:"李四",email:"lisi@example.com",roleId:"role-developer",roleName:"开发者",status:"active",createdAt:"2024-03-20 14:20:00"},{userId:"user-004",userName:"王五",email:"wangwu@example.com",roleId:"role-operator",roleName:"运维人员",status:"active",createdAt:"2024-04-12 11:15:00"},{userId:"user-005",userName:"赵六",email:"zhaoliu@example.com",roleId:"role-viewer",roleName:"访客",status:"active",createdAt:"2024-05-08 16:45:00"},{userId:"user-006",userName:"钱七",email:"qianqi@example.com",roleId:"role-viewer",roleName:"访客",status:"disabled",createdAt:"2024-06-01 10:20:00"}],$={"role-admin":["model.view","model.deploy","model.delete","dataset.view","dataset.create","dataset.edit","dataset.delete","finetune.view","finetune.create","finetune.stop","resource.view","resource.allocate","resource.release","user.view","user.create","user.edit","user.delete"],"role-developer":["model.view","model.deploy","dataset.view","dataset.create","finetune.view","finetune.create","finetune.stop","resource.view"],"role-operator":["model.view","dataset.view","resource.view","resource.allocate","resource.release"],"role-viewer":["model.view","dataset.view","finetune.view","resource.view"]};d.value=u,e.value=s,K.value=$},z=()=>{W()},G=he(()=>{let u=e.value;return n.value.userName&&(u=u.filter(s=>s.userName.toLowerCase().includes(n.value.userName.toLowerCase()))),n.value.roleId&&(u=u.filter(s=>s.roleId===n.value.roleId)),n.value.status&&(u=u.filter(s=>s.status===n.value.status)),u}),ne=he(()=>{const u=(o.value-1)*a.value,s=u+a.value;return G.value.slice(u,s)}),g=()=>{o.value=1},_=()=>{n.value={userName:"",roleId:"",status:""},o.value=1},A=()=>{r.value="create",l.value=!0},L=u=>{r.value="edit",c.value={userId:u.userId,userName:u.userName,email:u.email,roleId:u.roleId,status:u.status},l.value=!0},ke=u=>{q.info("分配角色功能（演示模式）")},be=u=>{const s=u.status==="active"?"禁用":"启用";Ze.confirm(`确定要${s}用户"${u.userName}"吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u.status=u.status==="active"?"disabled":"active",q.success(`${s}成功`)})},Ee=async()=>{await h.value.validate();const u=d.value.find(s=>s.id===c.value.roleId);if(r.value==="create"){const s={...c.value,userId:`user-${Date.now()}`,roleName:(u==null?void 0:u.name)||"",createdAt:new Date().toLocaleString("zh-CN")};e.value.unshift(s),u&&u.userCount++,q.success("添加用户成功")}else{const s=e.value.findIndex($=>$.userId===c.value.userId);if(s>-1){const $=e.value[s].roleId;if(e.value[s]={...e.value[s],...c.value,roleName:(u==null?void 0:u.name)||""},$!==c.value.roleId){const T=d.value.find(Q=>Q.id===$);T&&T.userCount--,u&&u.userCount++}q.success("更新用户成功")}}l.value=!1},_e=()=>{var u;(u=h.value)==null||u.resetFields(),c.value={userId:"",userName:"",email:"",roleId:"",status:"active"}},we=()=>{C.value="create",m.value=!0},f=u=>{C.value="edit",y.value={id:u.id,name:u.name,description:u.description},m.value=!0},w=u=>{if(u.userCount>0){q.warning("该角色下还有用户,无法删除");return}Ze.confirm(`确定要删除角色"${u.name}"吗? 此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const s=d.value.findIndex($=>$.id===u.id);s>-1&&(d.value.splice(s,1),q.success("删除成功"))})},R=async()=>{if(await k.value.validate(),C.value==="create"){const u={...y.value,id:`role-${Date.now()}`,userCount:0,isSystem:!1};d.value.push(u),K.value[u.id]=[],q.success("创建角色成功")}else{const u=d.value.findIndex(s=>s.id===y.value.id);u>-1&&(d.value[u]={...d.value[u],...y.value},q.success("更新角色成功"))}m.value=!1},Z=()=>{var u;(u=k.value)==null||u.resetFields(),y.value={id:"",name:"",description:""}},ut=u=>{E.value=u},ct=()=>{},ht=()=>{if(!E.value)return;const u=x.value.getCheckedKeys();K.value[E.value.id]=u,q.success("权限保存成功")},ft=u=>u==="role-admin"?"danger":u==="role-developer"?"success":u==="role-operator"?"warning":"info",pt=u=>{a.value=u,o.value=1},mt=u=>{o.value=u};return Fe(()=>{z()}),(u,s)=>{const $=lt,T=Qt,Q=Wt,F=Zt,ae=Ht,De=jt,xe=Gt,P=Jt,Ve=Xt,qe=Yt,vt=Vt,Ke=Mt,je=Ft,gt=Cn,yt=Rt,He=Lt,Nt=Ot,We=$t;return S(),j("div",kn,[i(yt,{gutter:20},{default:p(()=>[i(je,{span:14},{default:p(()=>[i(Ke,null,{header:p(()=>[O("div",bn,[s[16]||(s[16]=O("span",{class:"title"},"用户管理",-1)),i(T,{type:"primary",size:"small",onClick:A},{default:p(()=>[i($,null,{default:p(()=>[i(Se(Ge))]),_:1}),s[15]||(s[15]=I(" 添加用户 ",-1))]),_:1,__:[15]})])]),default:p(()=>[i(xe,{inline:!0,class:"search-form"},{default:p(()=>[i(F,{label:"用户名"},{default:p(()=>[i(Q,{modelValue:n.value.userName,"onUpdate:modelValue":s[0]||(s[0]=v=>n.value.userName=v),placeholder:"请输入用户名",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),i(F,{label:"角色"},{default:p(()=>[i(De,{modelValue:n.value.roleId,"onUpdate:modelValue":s[1]||(s[1]=v=>n.value.roleId=v),placeholder:"请选择角色",clearable:"",style:{width:"150px"}},{default:p(()=>[i(ae,{label:"全部",value:""}),(S(!0),j(ye,null,Ne(d.value,v=>(S(),U(ae,{key:v.id,label:v.name,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(F,{label:"状态"},{default:p(()=>[i(De,{modelValue:n.value.status,"onUpdate:modelValue":s[2]||(s[2]=v=>n.value.status=v),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:p(()=>[i(ae,{label:"全部",value:""}),i(ae,{label:"正常",value:"active"}),i(ae,{label:"已禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),i(F,null,{default:p(()=>[i(T,{type:"primary",onClick:g},{default:p(()=>s[17]||(s[17]=[I("查询",-1)])),_:1,__:[17]}),i(T,{onClick:_},{default:p(()=>s[18]||(s[18]=[I("重置",-1)])),_:1,__:[18]})]),_:1})]),_:1}),i(qe,{data:ne.value,border:"",style:{width:"100%"}},{default:p(()=>[i(P,{prop:"userId",label:"用户ID",width:"150"}),i(P,{prop:"userName",label:"用户名",width:"120"}),i(P,{prop:"email",label:"邮箱",width:"180"}),i(P,{prop:"roleName",label:"角色",width:"120"},{default:p(({row:v})=>[i(Ve,{type:ft(v.roleId)},{default:p(()=>[I(ue(v.roleName),1)]),_:2},1032,["type"])]),_:1}),i(P,{prop:"status",label:"状态",width:"100",align:"center"},{default:p(({row:v})=>[i(Ve,{type:v.status==="active"?"success":"danger"},{default:p(()=>[I(ue(v.status==="active"?"正常":"已禁用"),1)]),_:2},1032,["type"])]),_:1}),i(P,{label:"操作",width:"200",fixed:"right"},{default:p(({row:v})=>[i(T,{link:"",type:"primary",size:"small",onClick:ie=>L(v)},{default:p(()=>s[19]||(s[19]=[I("编辑",-1)])),_:2,__:[19]},1032,["onClick"]),i(T,{link:"",type:"primary",size:"small",onClick:ie=>ke(v)},{default:p(()=>s[20]||(s[20]=[I("分配角色",-1)])),_:2,__:[20]},1032,["onClick"]),i(T,{link:"",type:v.status==="active"?"warning":"success",size:"small",onClick:ie=>be(v)},{default:p(()=>[I(ue(v.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"]),O("div",En,[i(vt,{"current-page":o.value,"onUpdate:currentPage":s[3]||(s[3]=v=>o.value=v),"page-size":a.value,"onUpdate:pageSize":s[4]||(s[4]=v=>a.value=v),"page-sizes":[10,20,50],total:G.value.length,layout:"total, sizes, prev, pager, next",onSizeChange:pt,onCurrentChange:mt},null,8,["current-page","page-size","total"])])]),_:1})]),_:1}),i(je,{span:10},{default:p(()=>[i(Ke,null,{header:p(()=>[O("div",_n,[s[22]||(s[22]=O("span",{class:"title"},"角色管理",-1)),i(T,{type:"primary",size:"small",onClick:we},{default:p(()=>[i($,null,{default:p(()=>[i(Se(Ge))]),_:1}),s[21]||(s[21]=I(" 添加角色 ",-1))]),_:1,__:[21]})])]),default:p(()=>[i(qe,{data:d.value,border:"",style:{width:"100%"}},{default:p(()=>[i(P,{prop:"name",label:"角色名称",width:"140"}),i(P,{prop:"description",label:"描述","min-width":"150","show-overflow-tooltip":""}),i(P,{prop:"userCount",label:"用户数",width:"80",align:"center"}),i(P,{label:"操作",width:"160"},{default:p(({row:v})=>[i(T,{link:"",type:"primary",size:"small",onClick:ie=>f(v)},{default:p(()=>s[23]||(s[23]=[I("编辑",-1)])),_:2,__:[23]},1032,["onClick"]),i(T,{link:"",type:"primary",size:"small",onClick:ie=>ut(v)},{default:p(()=>s[24]||(s[24]=[I("权限",-1)])),_:2,__:[24]},1032,["onClick"]),i(T,{link:"",type:"danger",size:"small",onClick:ie=>w(v),disabled:v.isSystem},{default:p(()=>s[25]||(s[25]=[I(" 删除 ",-1)])),_:2,__:[25]},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),E.value?(S(),U(Ke,{key:0,style:{"margin-top":"20px"}},{header:p(()=>[O("div",wn,[O("span",Dn,ue(E.value.name)+" - 权限配置",1)])]),default:p(()=>[i(gt,{ref_key:"permissionTreeRef",ref:x,data:B,props:{label:"label",children:"children"},"node-key":"id","show-checkbox":"","default-checked-keys":H.value,onCheck:ct},null,8,["default-checked-keys"]),O("div",xn,[i(T,{type:"primary",size:"small",onClick:ht},{default:p(()=>s[26]||(s[26]=[I("保存权限",-1)])),_:1,__:[26]})])]),_:1})):oe("",!0)]),_:1})]),_:1}),i(We,{modelValue:l.value,"onUpdate:modelValue":s[10]||(s[10]=v=>l.value=v),title:r.value==="create"?"添加用户":"编辑用户",width:"500px",onClose:_e},{footer:p(()=>[i(T,{onClick:s[9]||(s[9]=v=>l.value=!1)},{default:p(()=>s[29]||(s[29]=[I("取消",-1)])),_:1,__:[29]}),i(T,{type:"primary",onClick:Ee},{default:p(()=>s[30]||(s[30]=[I("确定",-1)])),_:1,__:[30]})]),default:p(()=>[i(xe,{model:c.value,rules:N,ref_key:"userFormRef",ref:h,"label-width":"80px"},{default:p(()=>[i(F,{label:"用户名",prop:"userName"},{default:p(()=>[i(Q,{modelValue:c.value.userName,"onUpdate:modelValue":s[5]||(s[5]=v=>c.value.userName=v),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),i(F,{label:"邮箱",prop:"email"},{default:p(()=>[i(Q,{modelValue:c.value.email,"onUpdate:modelValue":s[6]||(s[6]=v=>c.value.email=v),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),i(F,{label:"角色",prop:"roleId"},{default:p(()=>[i(De,{modelValue:c.value.roleId,"onUpdate:modelValue":s[7]||(s[7]=v=>c.value.roleId=v),placeholder:"请选择角色",style:{width:"100%"}},{default:p(()=>[(S(!0),j(ye,null,Ne(d.value,v=>(S(),U(ae,{key:v.id,label:v.name,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(F,{label:"状态",prop:"status"},{default:p(()=>[i(Nt,{modelValue:c.value.status,"onUpdate:modelValue":s[8]||(s[8]=v=>c.value.status=v)},{default:p(()=>[i(He,{label:"active"},{default:p(()=>s[27]||(s[27]=[I("正常",-1)])),_:1,__:[27]}),i(He,{label:"disabled"},{default:p(()=>s[28]||(s[28]=[I("禁用",-1)])),_:1,__:[28]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),i(We,{modelValue:m.value,"onUpdate:modelValue":s[14]||(s[14]=v=>m.value=v),title:C.value==="create"?"添加角色":"编辑角色",width:"500px",onClose:Z},{footer:p(()=>[i(T,{onClick:s[13]||(s[13]=v=>m.value=!1)},{default:p(()=>s[31]||(s[31]=[I("取消",-1)])),_:1,__:[31]}),i(T,{type:"primary",onClick:R},{default:p(()=>s[32]||(s[32]=[I("确定",-1)])),_:1,__:[32]})]),default:p(()=>[i(xe,{model:y.value,rules:b,ref_key:"roleFormRef",ref:k,"label-width":"80px"},{default:p(()=>[i(F,{label:"角色名称",prop:"name"},{default:p(()=>[i(Q,{modelValue:y.value.name,"onUpdate:modelValue":s[11]||(s[11]=v=>y.value.name=v),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),i(F,{label:"角色描述",prop:"description"},{default:p(()=>[i(Q,{modelValue:y.value.description,"onUpdate:modelValue":s[12]||(s[12]=v=>y.value.description=v),type:"textarea",rows:3,placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),aa=tn(Kn,[["__scopeId","data-v-ef6cd6dd"]]);export{aa as default};
