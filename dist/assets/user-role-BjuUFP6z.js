import{n as wt,al as Dt,s as _e,d as ie,r as D,x as ue,y as pe,ao as te,h as qe,aI as lt,c as M,o as S,w as p,z as je,I as st,D as V,C as Re,a8 as rt,b4 as Kt,a2 as dt,b5 as Be,aX as xt,l as me,m as $e,a7 as It,U as ke,am as it,N as St,b6 as Tt,b7 as Qe,aE as Le,P as de,ae as et,Z as ve,b8 as ze,b9 as At,i as ee,av as Pe,ax as Ue,b as H,e as $,f as i,j as se,G,F as be,A as Ee,aY as zt,E as ut,ba as Ot,W as q,bb as Rt,a5 as ct,aU as Bt,aM as J,t as he,a6 as $t,p as ge,v as Lt,bc as Pt,a as I,aN as tt,_ as Ut}from"./index-C1LNxWrc.js";import{E as Ft}from"./dialog-D1_iS1Vq.js";import{E as Mt,a as Vt}from"./radio-BfCnrhE6.js";import{E as qt,a as jt}from"./col-BHj47XkZ.js";import{a as Ht}from"./checkbox-D429Hkk4.js";import{E as Yt}from"./card-bOHwtd_N.js";import{E as Wt}from"./pagination-C_8mWErZ.js";/* empty css            */import{s as Gt,E as Jt,a as Xt}from"./select-BSsX693L.js";import"./scrollbar-CWDB5A-B.js";import{E as Zt}from"./input-LGwqt1-Y.js";import{E as Qt,a as en}from"./table-column-QOtjyKSd.js";import{E as tn,a as nn}from"./form-item-BZC8dQDK.js";import{E as an}from"./button-CfgjJGa2.js";import{g as Oe,s as B}from"./storage-2nKQMLp0.js";import{E as on}from"./index-gsKI2Iim.js";import{a as ln}from"./use-form-common-props-dMO5F-Xy.js";import{i as sn}from"./isEqual-CFwnnDW_.js";import{E as j}from"./index-JFsgmBjq.js";import{E as nt}from"./index-B9Nwm2NO.js";import"./index-DaWWsILK.js";import"./scroll-RLo4NxSV.js";import"./index-DRLRXOGd.js";import"./strings-BOPxCUMK.js";import"./_initCloneObject-T9RaIEd1.js";import"./index-BPEUnmM4.js";import"./debounce-C4p0xsPh.js";import"./_baseIteratee-CNffayvf.js";import"./isPlainObject-BS8VhLgB.js";import"./_baseClone-0EgoVDGI.js";import"./validator-DJAEN8sI.js";const rn=wt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Dt,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),dn=ie({name:"ElText"}),un=ie({...dn,props:rn,setup(t){const e=t,n=D(),o=ln(),a=ue("text"),l=pe(()=>[a.b(),a.m(e.type),a.m(o.value),a.is("truncated",e.truncated),a.is("line-clamp",!te(e.lineClamp))]),d=()=>{var h,c,N,r,v,C,k;if(Kt().title)return;let b=!1;const E=((h=n.value)==null?void 0:h.textContent)||"";if(e.truncated){const x=(c=n.value)==null?void 0:c.offsetWidth,K=(N=n.value)==null?void 0:N.scrollWidth;x&&K&&K>x&&(b=!0)}else if(!te(e.lineClamp)){const x=(r=n.value)==null?void 0:r.offsetHeight,K=(v=n.value)==null?void 0:v.scrollHeight;x&&K&&K>x&&(b=!0)}b?(C=n.value)==null||C.setAttribute("title",E):(k=n.value)==null||k.removeAttribute("title")};return qe(d),lt(d),(h,c)=>(S(),M(rt(h.tag),{ref_key:"textRef",ref:n,class:V(Re(l)),style:st({"-webkit-line-clamp":h.lineClamp})},{default:p(()=>[je(h.$slots,"default")]),_:3},8,["class","style"]))}});var cn=_e(un,[["__file","text.vue"]]);const hn=dt(cn),re="$treeNodeId",at=function(t,e){!e||e[re]||Object.defineProperty(e,re,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},He=(t,e)=>e?.[t||re],Fe=(t,e,n)=>{const o=t.value.currentNode;n();const a=t.value.currentNode;o!==a&&e("current-change",a?a.data:null,a)},Me=t=>{let e=!0,n=!0,o=!0;for(let a=0,l=t.length;a<l;a++){const d=t[a];(d.checked!==!0||d.indeterminate)&&(e=!1,d.disabled||(o=!1)),(d.checked!==!1||d.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:o,half:!e&&!n}},fe=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:o}=Me(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const a=t.parent;!a||a.level===0||t.store.checkStrictly||fe(a)},ye=function(t,e){const n=t.store.props,o=t.data||{},a=n[e];if(ke(a))return a(o,t);if(it(a))return o[a];if(te(a)){const l=o[e];return te(l)?"":l}},Ve=function(t,e){t.forEach(n=>{n.canFocus=e,Ve(n.childNodes,e)})};let fn=0;class ne{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=fn++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Be(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const o=n.props;if(o&&typeof o.isLeaf<"u"){const d=ye(this,"isLeaf");xt(d)&&(this.isLeafByUser=d)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&!this.isLeafByUser&&this.expand(),me(this.data)||at(this,this.data),!this.data)return;const a=n.defaultExpandedKeys,l=n.key;l&&!$e(this.key)&&a&&a.includes(this.key)&&this.expand(null,n.autoExpandParent),l&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),(this.level===1||((e=this.parent)==null?void 0:e.expanded)===!0)&&(this.canFocus=!0)}setData(e){me(e)||at(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&me(this.data)?n=this.data:n=ye(this,"children")||[];for(let o=0,a=n.length;o<a;o++)this.insertChild({data:n[o]})}get label(){return ye(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return ye(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(o=>o===e||n&&o.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,o){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof ne)){if(!o){const a=this.getChildren(!0);a?.includes(e.data)||(te(n)||n<0?a?.push(e.data):a?.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=It(new ne(e)),e instanceof ne&&e.initialize()}e.level=this.level+1,te(n)||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let o;n&&(o=this.childNodes.indexOf(n)),this.insertChild(e,o)}insertAfter(e,n){let o;n&&(o=this.childNodes.indexOf(n),o!==-1&&(o+=1)),this.insertChild(e,o)}removeChild(e){const n=this.getChildren()||[],o=n.indexOf(e.data);o>-1&&n.splice(o,1);const a=this.childNodes.indexOf(e);a>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(a,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let o=0;o<this.childNodes.length;o++)if(this.childNodes[o].data===e){n=this.childNodes[o];break}n&&this.removeChild(n)}expand(e,n){const o=()=>{if(n){let a=this.parent;for(;a&&a.level>0;)a.expanded=!0,a=a.parent}this.expanded=!0,e&&e(),Ve(this.childNodes,!0)};this.shouldLoadData()?this.loadData(a=>{me(a)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||fe(this),o())}):o()}doCreateChildren(e,n={}){e.forEach(o=>{this.insertChild(Object.assign({data:o},n),void 0,!0)})}collapse(){this.expanded=!1,Ve(this.childNodes,!1)}shouldLoadData(){return!!(this.store.lazy===!0&&this.store.load&&!this.loaded)}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,o,a){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:d,allWithoutDisable:h}=Me(this.childNodes);!this.isLeaf&&!d&&h&&(this.checked=!1,e=!1);const c=()=>{if(n){const N=this.childNodes;for(let C=0,k=N.length;C<k;C++){const y=N[C];a=a||e!==!1;const b=y.disabled?y.checked:a;y.setChecked(b,n,!0,a)}const{half:r,all:v}=Me(N);v||(this.checked=v,this.indeterminate=r)}};if(this.shouldLoadData()){this.loadData(()=>{c(),fe(this)},{checked:e!==!1});return}else c()}const l=this.parent;!l||l.level===0||o||fe(l)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const o=this.store.props;let a="children";return o&&(a=o.children||"children"),te(n[a])&&(n[a]=null),e&&!n[a]&&(n[a]=[]),n[a]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(l=>l.data),o={},a=[];e.forEach((l,d)=>{const h=l[re];!!h&&n.findIndex(N=>N?.[re]===h)>=0?o[h]={index:d,data:l}:a.push({index:d,data:l})}),this.store.lazy||n.forEach(l=>{o[l?.[re]]||this.removeChildByData(l)}),a.forEach(({index:l,data:d})=>{this.insertChild({data:d},l)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const o=l=>{this.childNodes=[],this.doCreateChildren(l,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,l)},a=()=>{this.loading=!1};this.store.load(this,o,a)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const o=n.shift();n.unshift(...o.childNodes),e(o)}}reInitChecked(){this.store.checkStrictly||fe(this)}}class pn{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const n in e)Be(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new ne({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()},St)}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,o=this.lazy,a=async function(l){const d=l.root?l.root.childNodes:l.childNodes;for(const[h,c]of d.entries())c.visible=!!n?.call(c,e,c.data,c),h%80===0&&h>0&&await Le(),await a(c);if(!l.visible&&d.length){let h=!0;h=!d.some(c=>c.visible),l.root?l.root.visible=h===!1:l.visible=h===!1}e&&l.visible&&!l.isLeaf&&(!o||l.loaded)&&l.expand()};a(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof ne)return e;const n=Tt(e)?He(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){var o;const a=this.getNode(n);(o=a.parent)==null||o.insertBefore({data:e},a)}insertAfter(e,n){var o;const a=this.getNode(n);(o=a.parent)==null||o.insertAfter({data:e},a)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const o=Qe(n)?this.root:this.getNode(n);o&&o.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(o=>{const a=n[o];a&&a.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const n=this.defaultCheckedKeys||[];!$e(e.key)&&n.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;if(!(!e||!e.data))if(!n)this.nodesMap[e.id]=e;else{const o=e.key;$e(o)||(this.nodesMap[o]=e)}}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(o=>{this.deregisterNode(o)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const o=[],a=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(h=>{(h.checked||n&&h.indeterminate)&&(!e||e&&h.isLeaf)&&o.push(h.data),a(h)})};return a(this),o}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(l=>{l.indeterminate&&e.push(l.data),n(l)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const o in n)Be(n,o)&&e.push(n[o]);return e}updateChildren(e,n){const o=this.nodesMap[e];if(!o)return;const a=o.childNodes;for(let l=a.length-1;l>=0;l--){const d=a[l];this.remove(d.data)}for(let l=0,d=n.length;l<d;l++){const h=n[l];this.append(h,o.data)}}_setCheckedKeys(e,n=!1,o){const a=this._getAllNodes().sort((c,N)=>c.level-N.level),l=Object.create(null),d=Object.keys(o);a.forEach(c=>c.setChecked(!1,!1));const h=c=>{c.childNodes.forEach(N=>{var r;l[N.data[e]]=!0,(r=N.childNodes)!=null&&r.length&&h(N)})};for(let c=0,N=a.length;c<N;c++){const r=a[c],v=r.data[e].toString();if(!d.includes(v)){r.checked&&!l[v]&&r.setChecked(!1,!1);continue}if(r.childNodes.length&&h(r),r.isLeaf||this.checkStrictly){r.setChecked(!0,!1);continue}if(r.setChecked(!0,!0),n){r.setChecked(!1,!1);const k=function(y){y.childNodes.forEach(E=>{E.isLeaf||E.setChecked(!1,!1),k(E)})};k(r)}}}setCheckedNodes(e,n=!1){const o=this.key,a={};e.forEach(l=>{a[(l||{})[o]]=!0}),this._setCheckedKeys(o,n,a)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const o=this.key,a={};e.forEach(l=>{a[l]=!0}),this._setCheckedKeys(o,n,a)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const o=this.getNode(n);o&&o.expand(null,this.autoExpandParent)})}setChecked(e,n,o){const a=this.getNode(e);a&&a.setChecked(!!n,o)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){var o;const a=e[this.key],l=this.nodesMap[a];this.setCurrentNode(l),n&&this.currentNode&&this.currentNode.level>1&&((o=this.currentNode.parent)==null||o.expand(null,!0))}setCurrentNodeKey(e,n=!0){var o;if(this.currentNodeKey=e,Qe(e)){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const a=this.getNode(e);a&&(this.setCurrentNode(a),n&&this.currentNode&&this.currentNode.level>1&&((o=this.currentNode.parent)==null||o.expand(null,!0)))}}const Ye="RootTree",ht="NodeInstance",ot="TreeNodeMap",vn=ie({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=ue("tree"),n=de(ht),o=de(Ye);return()=>{const a=t.node,{data:l,store:d}=a;return t.renderContent?t.renderContent(et,{_self:n,node:a,data:l,store:d}):je(o.ctx.slots,"default",{node:a,data:l},()=>[et(hn,{tag:"span",truncated:!0,class:e.be("node","label")},()=>[a.label])])}}});var mn=_e(vn,[["__file","tree-node-content.vue"]]);function ft(t){const e=de(ot,null),n={treeNodeExpand:o=>{var a;t.node!==o&&((a=t.node)==null||a.collapse())},children:[]};return e&&e.children.push(n),ve(ot,n),{broadcastExpanded:o=>{if(t.accordion)for(const a of n.children)a.treeNodeExpand(o)}}}const pt=Symbol("dragEvents");function gn({props:t,ctx:e,el$:n,dropIndicator$:o,store:a}){const l=ue("tree"),d=D({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return ve(pt,{treeNodeDragStart:({event:r,treeNode:v})=>{if(r.dataTransfer){if(ke(t.allowDrag)&&!t.allowDrag(v.node))return r.preventDefault(),!1;r.dataTransfer.effectAllowed="move";try{r.dataTransfer.setData("text/plain","")}catch{}d.value.draggingNode=v,e.emit("node-drag-start",v.node,r)}},treeNodeDragOver:({event:r,treeNode:v})=>{if(!r.dataTransfer)return;const C=v,k=d.value.dropNode;k&&k.node.id!==C.node.id&&ze(k.$el,l.is("drop-inner"));const y=d.value.draggingNode;if(!y||!C)return;let b=!0,E=!0,x=!0,K=!0;ke(t.allowDrop)&&(b=t.allowDrop(y.node,C.node,"prev"),K=E=t.allowDrop(y.node,C.node,"inner"),x=t.allowDrop(y.node,C.node,"next")),r.dataTransfer.dropEffect=E||b||x?"move":"none",(b||E||x)&&k?.node.id!==C.node.id&&(k&&e.emit("node-drag-leave",y.node,k.node,r),e.emit("node-drag-enter",y.node,C.node,r)),b||E||x?d.value.dropNode=C:d.value.dropNode=null,C.node.nextSibling===y.node&&(x=!1),C.node.previousSibling===y.node&&(b=!1),C.node.contains(y.node,!1)&&(E=!1),(y.node===C.node||y.node.contains(C.node))&&(b=!1,E=!1,x=!1);const R=C.$el,Y=R.querySelector(`.${l.be("node","content")}`).getBoundingClientRect(),W=n.value.getBoundingClientRect();let z;const X=b?E?.25:x?.45:1:-1,ae=x?E?.75:b?.55:0:1;let g=-9999;const _=r.clientY-Y.top;_<Y.height*X?z="before":_>Y.height*ae?z="after":E?z="inner":z="none";const A=R.querySelector(`.${l.be("node","expand-icon")}`).getBoundingClientRect(),L=o.value;z==="before"?g=A.top-W.top:z==="after"&&(g=A.bottom-W.top),L.style.top=`${g}px`,L.style.left=`${A.right-W.left}px`,z==="inner"?At(R,l.is("drop-inner")):ze(R,l.is("drop-inner")),d.value.showDropIndicator=z==="before"||z==="after",d.value.allowDrop=d.value.showDropIndicator||K,d.value.dropType=z,e.emit("node-drag-over",y.node,C.node,r)},treeNodeDragEnd:r=>{var v,C;const{draggingNode:k,dropType:y,dropNode:b}=d.value;if(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"),k?.node.data&&b){const E={data:k.node.data};y!=="none"&&k.node.remove(),y==="before"?(v=b.node.parent)==null||v.insertBefore(E,b.node):y==="after"?(C=b.node.parent)==null||C.insertAfter(E,b.node):y==="inner"&&b.node.insertChild(E),y!=="none"&&(a.value.registerNode(E),a.value.key&&k.node.eachNode(x=>{var K;(K=a.value.nodesMap[x.data[a.value.key]])==null||K.setChecked(x.checked,!a.value.checkStrictly)})),ze(b.$el,l.is("drop-inner")),e.emit("node-drag-end",k.node,b.node,y,r),y!=="none"&&e.emit("node-drop",k.node,b.node,y,r)}k&&!b&&e.emit("node-drag-end",k.node,null,y,r),d.value.showDropIndicator=!1,d.value.draggingNode=null,d.value.dropNode=null,d.value.allowDrop=!0}}),{dragState:d}}const yn=ie({name:"ElTreeNode",components:{ElCollapseTransition:Ot,ElCheckbox:Ht,NodeContent:mn,ElIcon:ut,Loading:zt},props:{node:{type:ne,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(t,e){const n=ue("tree"),{broadcastExpanded:o}=ft(t),a=de(Ye),l=D(!1),d=D(!1),h=D(),c=D(),N=D(),r=de(pt),v=ct();ve(ht,v),t.node.expanded&&(l.value=!0,d.value=!0);const C=a.props.props.children||"children";q(()=>{var g;const _=(g=t.node.data)==null?void 0:g[C];return _&&[..._]},()=>{t.node.updateChildren()}),q(()=>t.node.indeterminate,g=>{b(t.node.checked,g)}),q(()=>t.node.checked,g=>{b(g,t.node.indeterminate)}),q(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),q(()=>t.node.expanded,g=>{Le(()=>l.value=g),g&&(d.value=!0)});const k=g=>He(a.props.nodeKey,g.data),y=g=>{const _=t.props.class;if(!_)return{};let A;if(ke(_)){const{data:L}=g;A=_(L,g)}else A=_;return it(A)?{[A]:!0}:A},b=(g,_)=>{(h.value!==g||c.value!==_)&&a.ctx.emit("check-change",t.node.data,g,_),h.value=g,c.value=_},E=g=>{Fe(a.store,a.ctx.emit,()=>{var _;if((_=a?.props)==null?void 0:_.nodeKey){const L=k(t.node);a.store.value.setCurrentNodeKey(L)}else a.store.value.setCurrentNode(t.node)}),a.currentNode.value=t.node,a.props.expandOnClickNode&&K(),(a.props.checkOnClickNode||t.node.isLeaf&&a.props.checkOnClickLeaf&&t.showCheckbox)&&!t.node.disabled&&R(!t.node.checked),a.ctx.emit("node-click",t.node.data,t.node,v,g)},x=g=>{var _;(_=a.instance.vnode.props)!=null&&_.onNodeContextmenu&&(g.stopPropagation(),g.preventDefault()),a.ctx.emit("node-contextmenu",g,t.node.data,t.node,v)},K=()=>{t.node.isLeaf||(l.value?(a.ctx.emit("node-collapse",t.node.data,t.node,v),t.node.collapse()):t.node.expand(()=>{e.emit("node-expand",t.node.data,t.node,v)}))},R=g=>{t.node.setChecked(g,!a?.props.checkStrictly),Le(()=>{const _=a.store.value;a.ctx.emit("check",t.node.data,{checkedNodes:_.getCheckedNodes(),checkedKeys:_.getCheckedKeys(),halfCheckedNodes:_.getHalfCheckedNodes(),halfCheckedKeys:_.getHalfCheckedKeys()})})};return{ns:n,node$:N,tree:a,expanded:l,childNodeRendered:d,oldChecked:h,oldIndeterminate:c,getNodeKey:k,getNodeClass:y,handleSelectChange:b,handleClick:E,handleContextMenu:x,handleExpandIconClick:K,handleCheckChange:R,handleChildNodeExpand:(g,_,A)=>{o(_),a.ctx.emit("node-expand",g,_,A)},handleDragStart:g=>{a.props.draggable&&r.treeNodeDragStart({event:g,treeNode:t})},handleDragOver:g=>{g.preventDefault(),a.props.draggable&&r.treeNodeDragOver({event:g,treeNode:{$el:N.value,node:t.node}})},handleDrop:g=>{g.preventDefault()},handleDragEnd:g=>{a.props.draggable&&r.treeNodeDragEnd(g)},CaretRight:Rt}}});function Nn(t,e,n,o,a,l){const d=ee("el-icon"),h=ee("el-checkbox"),c=ee("loading"),N=ee("node-content"),r=ee("el-tree-node"),v=ee("el-collapse-transition");return Pe((S(),H("div",{ref:"node$",class:V([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:G(t.handleClick,["stop"]),onContextmenu:t.handleContextMenu,onDragstart:G(t.handleDragStart,["stop"]),onDragover:G(t.handleDragOver,["stop"]),onDragend:G(t.handleDragEnd,["stop"]),onDrop:G(t.handleDrop,["stop"])},[$("div",{class:V(t.ns.be("node","content")),style:st({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(S(),M(d,{key:0,class:V([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:G(t.handleExpandIconClick,["stop"])},{default:p(()=>[(S(),M(rt(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):se("v-if",!0),t.showCheckbox?(S(),M(h,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:G(()=>{},["stop"]),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):se("v-if",!0),t.node.loading?(S(),M(d,{key:2,class:V([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:p(()=>[i(c)]),_:1},8,["class"])):se("v-if",!0),i(N,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),i(v,null,{default:p(()=>[!t.renderAfterExpand||t.childNodeRendered?Pe((S(),H("div",{key:0,class:V(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded,onClick:G(()=>{},["stop"])},[(S(!0),H(be,null,Ee(t.node.childNodes,C=>(S(),M(r,{key:t.getNodeKey(C),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:C,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[Ue,t.expanded]]):se("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Ue,t.node.visible]])}var Cn=_e(yn,[["render",Nn],["__file","tree-node.vue"]]);function kn({el$:t},e){const n=ue("tree");qe(()=>{l()}),lt(()=>{Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(h=>{h.setAttribute("tabindex","-1")})});function o(d,h){var c,N;const r=e.value.getNode(d[h].dataset.key);return r.canFocus&&r.visible&&(((c=r.parent)==null?void 0:c.expanded)||((N=r.parent)==null?void 0:N.level)===0)}Bt(t,"keydown",d=>{const h=d.target;if(!h.className.includes(n.b("node")))return;const c=d.code,N=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),r=N.indexOf(h);let v;if([J.up,J.down].includes(c)){if(d.preventDefault(),c===J.up){v=r===-1?0:r!==0?r-1:N.length-1;const k=v;for(;!o(N,v);){if(v--,v===k){v=-1;break}v<0&&(v=N.length-1)}}else{v=r===-1?0:r<N.length-1?r+1:0;const k=v;for(;!o(N,v);){if(v++,v===k){v=-1;break}v>=N.length&&(v=0)}}v!==-1&&N[v].focus()}[J.left,J.right].includes(c)&&(d.preventDefault(),h.click());const C=h.querySelector('[type="checkbox"]');[J.enter,J.numpadEnter,J.space].includes(c)&&C&&(d.preventDefault(),C.click())});const l=()=>{var d;if(!t.value)return;const h=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));Array.from(t.value.querySelectorAll("input[type=checkbox]")).forEach(r=>{r.setAttribute("tabindex","-1")});const N=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(N.length){N[0].setAttribute("tabindex","0");return}(d=h[0])==null||d.setAttribute("tabindex","0")}}const bn=ie({name:"ElTree",components:{ElTreeNode:Cn},props:{data:{type:ge(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:ge(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:ge(Function)},allowDrop:{type:ge(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:$t}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Lt(),o=ue("tree"),a=de(Gt,null),l=D(new pn({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));l.value.initialize();const d=D(l.value.root),h=D(null),c=D(null),N=D(null),{broadcastExpanded:r}=ft(t),{dragState:v}=gn({props:t,ctx:e,el$:c,dropIndicator$:N,store:l});kn({el$:c},l);const C=pe(()=>{const{childNodes:f}=d.value,w=a?a.hasFilteredOptions!==0:!1;return(!f||f.length===0||f.every(({visible:P})=>!P))&&!w});q(()=>t.currentNodeKey,f=>{l.value.setCurrentNodeKey(f??null)}),q(()=>t.defaultCheckedKeys,(f,w)=>{sn(f,w)||l.value.setDefaultCheckedKey(f??[])}),q(()=>t.defaultExpandedKeys,f=>{l.value.setDefaultExpandedKeys(f??[])}),q(()=>t.data,f=>{l.value.setData(f)},{deep:!0}),q(()=>t.checkStrictly,f=>{l.value.checkStrictly=f});const k=f=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");l.value.filter(f)},y=f=>He(t.nodeKey,f.data),b=f=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const w=l.value.getNode(f);if(!w)return[];const P=[w.data];let Z=w.parent;for(;Z&&Z!==d.value;)P.push(Z.data),Z=Z.parent;return P.reverse()},E=(f,w)=>l.value.getCheckedNodes(f,w),x=f=>l.value.getCheckedKeys(f),K=()=>{const f=l.value.getCurrentNode();return f?f.data:null},R=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const f=K();return f?f[t.nodeKey]:null},Y=(f,w)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");l.value.setCheckedNodes(f,w)},W=(f,w)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");l.value.setCheckedKeys(f,w)},z=(f,w,P)=>{l.value.setChecked(f,w,P)},X=()=>l.value.getHalfCheckedNodes(),ae=()=>l.value.getHalfCheckedKeys(),g=(f,w=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Fe(l,e.emit,()=>{r(f),l.value.setUserCurrentNode(f,w)})},_=(f,w=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Fe(l,e.emit,()=>{r(),l.value.setCurrentNodeKey(f??null,w)})},A=f=>l.value.getNode(f),L=f=>{l.value.remove(f)},we=(f,w)=>{l.value.append(f,w)},De=(f,w)=>{l.value.insertBefore(f,w)},Ke=(f,w)=>{l.value.insertAfter(f,w)},xe=(f,w,P)=>{r(w),e.emit("node-expand",f,w,P)},Ie=(f,w)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");l.value.updateChildren(f,w)};return ve(Ye,{ctx:e,props:t,store:l,root:d,currentNode:h,instance:ct()}),ve(Pt,void 0),{ns:o,store:l,root:d,currentNode:h,dragState:v,el$:c,dropIndicator$:N,isEmpty:C,filter:k,getNodeKey:y,getNodePath:b,getCheckedNodes:E,getCheckedKeys:x,getCurrentNode:K,getCurrentKey:R,setCheckedNodes:Y,setCheckedKeys:W,setChecked:z,getHalfCheckedNodes:X,getHalfCheckedKeys:ae,setCurrentNode:g,setCurrentKey:_,t:n,getNode:A,remove:L,append:we,insertBefore:De,insertAfter:Ke,handleNodeExpand:xe,updateKeyChildren:Ie}}});function En(t,e,n,o,a,l){const d=ee("el-tree-node");return S(),H("div",{ref:"el$",class:V([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(S(!0),H(be,null,Ee(t.root.childNodes,h=>(S(),M(d,{key:t.getNodeKey(h),node:h,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(S(),H("div",{key:0,class:V(t.ns.e("empty-block"))},[je(t.$slots,"empty",{},()=>{var h;return[$("span",{class:V(t.ns.e("empty-text"))},he((h=t.emptyText)!=null?h:t.t("el.tree.emptyText")),3)]})],2)):se("v-if",!0),Pe($("div",{ref:"dropIndicator$",class:V(t.ns.e("drop-indicator"))},null,2),[[Ue,t.dragState.showDropIndicator]])],2)}var _n=_e(bn,[["render",En],["__file","tree.vue"]]);const wn=dt(_n),Dn={class:"user-role-page"},Kn={class:"card-header"},xn={class:"pagination"},In={class:"card-header"},Sn={class:"card-header"},Tn={class:"title"},An={style:{"margin-top":"16px","text-align":"right"}},Ne="rbac_users_data",le="rbac_roles_data",Ce="rbac_role_permissions_data",zn=ie({__name:"user-role",setup(t){const e=D([]),n=D({userName:"",roleId:"",status:""}),o=D(1),a=D(10),l=D(!1),d=D("create"),h=D(),c=D({userId:"",userName:"",email:"",roleId:"",status:"active"}),N={userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],roleId:[{required:!0,message:"请选择角色",trigger:"change"}]},r=D([]),v=D(!1),C=D("create"),k=D(),y=D({id:"",name:"",description:""}),b={name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},E=D(null),x=D(),K=D({}),R=[{id:"model",label:"模型管理",children:[{id:"model.view",label:"查看模型"},{id:"model.deploy",label:"部署模型"},{id:"model.delete",label:"删除模型"}]},{id:"dataset",label:"数据集管理",children:[{id:"dataset.view",label:"查看数据集"},{id:"dataset.create",label:"创建数据集"},{id:"dataset.edit",label:"编辑数据集"},{id:"dataset.delete",label:"删除数据集"}]},{id:"finetune",label:"模型微调",children:[{id:"finetune.view",label:"查看任务"},{id:"finetune.create",label:"创建任务"},{id:"finetune.stop",label:"停止任务"}]},{id:"resource",label:"资源管理",children:[{id:"resource.view",label:"查看资源"},{id:"resource.allocate",label:"分配资源"},{id:"resource.release",label:"释放资源"}]},{id:"user",label:"用户管理",children:[{id:"user.view",label:"查看用户"},{id:"user.create",label:"创建用户"},{id:"user.edit",label:"编辑用户"},{id:"user.delete",label:"删除用户"}]}],Y=pe(()=>E.value?K.value[E.value.id]||[]:[]),W=()=>{const u=[{id:"role-admin",name:"系统管理员",description:"拥有系统所有权限",userCount:2,isSystem:!0},{id:"role-developer",name:"开发者",description:"可以部署模型、创建微调任务",userCount:15,isSystem:!1},{id:"role-operator",name:"运维人员",description:"负责资源管理和监控",userCount:5,isSystem:!1},{id:"role-viewer",name:"访客",description:"只有查看权限",userCount:20,isSystem:!1}],s=[{userId:"user-001",userName:"管理员",email:"admin@example.com",roleId:"role-admin",roleName:"系统管理员",status:"active",createdAt:"2024-01-10 10:00:00"},{userId:"user-002",userName:"张三",email:"zhangsan@example.com",roleId:"role-developer",roleName:"开发者",status:"active",createdAt:"2024-02-15 09:30:00"},{userId:"user-003",userName:"李四",email:"lisi@example.com",roleId:"role-developer",roleName:"开发者",status:"active",createdAt:"2024-03-20 14:20:00"},{userId:"user-004",userName:"王五",email:"wangwu@example.com",roleId:"role-operator",roleName:"运维人员",status:"active",createdAt:"2024-04-12 11:15:00"},{userId:"user-005",userName:"赵六",email:"zhaoliu@example.com",roleId:"role-viewer",roleName:"访客",status:"active",createdAt:"2024-05-08 16:45:00"},{userId:"user-006",userName:"钱七",email:"qianqi@example.com",roleId:"role-viewer",roleName:"访客",status:"disabled",createdAt:"2024-06-01 10:20:00"}],O={"role-admin":["model.view","model.deploy","model.delete","dataset.view","dataset.create","dataset.edit","dataset.delete","finetune.view","finetune.create","finetune.stop","resource.view","resource.allocate","resource.release","user.view","user.create","user.edit","user.delete"],"role-developer":["model.view","model.deploy","dataset.view","dataset.create","finetune.view","finetune.create","finetune.stop","resource.view"],"role-operator":["model.view","dataset.view","resource.view","resource.allocate","resource.release"],"role-viewer":["model.view","dataset.view","finetune.view","resource.view"]};r.value=u,e.value=s,K.value=O,B(le,u),B(Ne,s),B(Ce,O)},z=()=>{const u=Oe(le),s=Oe(Ne),O=Oe(Ce);u&&Array.isArray(u)&&u.length>0?(r.value=u,e.value=s||[],K.value=O||{}):W()},X=pe(()=>{let u=e.value;return n.value.userName&&(u=u.filter(s=>s.userName.toLowerCase().includes(n.value.userName.toLowerCase()))),n.value.roleId&&(u=u.filter(s=>s.roleId===n.value.roleId)),n.value.status&&(u=u.filter(s=>s.status===n.value.status)),u}),ae=pe(()=>{const u=(o.value-1)*a.value,s=u+a.value;return X.value.slice(u,s)}),g=()=>{o.value=1},_=()=>{n.value={userName:"",roleId:"",status:""},o.value=1},A=()=>{d.value="create",l.value=!0},L=u=>{d.value="edit",c.value={userId:u.userId,userName:u.userName,email:u.email,roleId:u.roleId,status:u.status},l.value=!0},we=u=>{j.info("分配角色功能（演示模式）")},De=u=>{const s=u.status==="active"?"禁用":"启用";nt.confirm(`确定要${s}用户"${u.userName}"吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u.status=u.status==="active"?"disabled":"active",B(Ne,e.value),j.success(`${s}成功`)})},Ke=async()=>{await h.value.validate();const u=r.value.find(s=>s.id===c.value.roleId);if(d.value==="create"){const s={...c.value,userId:`user-${Date.now()}`,roleName:u?.name||"",createdAt:new Date().toLocaleString("zh-CN")};e.value.unshift(s),u&&(u.userCount++,B(le,r.value)),j.success("添加用户成功")}else{const s=e.value.findIndex(O=>O.userId===c.value.userId);if(s>-1){const O=e.value[s].roleId;if(e.value[s]={...e.value[s],...c.value,roleName:u?.name||""},O!==c.value.roleId){const T=r.value.find(Q=>Q.id===O);T&&T.userCount--,u&&u.userCount++,B(le,r.value)}j.success("更新用户成功")}}B(Ne,e.value),l.value=!1},xe=()=>{h.value?.resetFields(),c.value={userId:"",userName:"",email:"",roleId:"",status:"active"}},Ie=()=>{C.value="create",v.value=!0},f=u=>{C.value="edit",y.value={id:u.id,name:u.name,description:u.description},v.value=!0},w=u=>{if(u.userCount>0){j.warning("该角色下还有用户,无法删除");return}nt.confirm(`确定要删除角色"${u.name}"吗? 此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const s=r.value.findIndex(O=>O.id===u.id);s>-1&&(r.value.splice(s,1),B(le,r.value),j.success("删除成功"))})},P=async()=>{if(await k.value.validate(),C.value==="create"){const u={...y.value,id:`role-${Date.now()}`,userCount:0,isSystem:!1};r.value.push(u),K.value[u.id]=[],j.success("创建角色成功")}else{const u=r.value.findIndex(s=>s.id===y.value.id);u>-1&&(r.value[u]={...r.value[u],...y.value},j.success("更新角色成功"))}B(le,r.value),B(Ce,K.value),v.value=!1},Z=()=>{k.value?.resetFields(),y.value={id:"",name:"",description:""}},vt=u=>{E.value=u},mt=()=>{},gt=()=>{if(!E.value)return;const u=x.value.getCheckedKeys();K.value[E.value.id]=u,B(Ce,K.value),j.success("权限保存成功")},yt=u=>u==="role-admin"?"danger":u==="role-developer"?"success":u==="role-operator"?"warning":"info",Nt=u=>{a.value=u,o.value=1},Ct=u=>{o.value=u};return qe(()=>{z()}),(u,s)=>{const O=ut,T=an,Q=Zt,U=nn,oe=Xt,Se=Jt,Te=tn,F=en,We=on,Ge=Qt,kt=Wt,Ae=Yt,Je=qt,bt=wn,Et=jt,Xe=Vt,_t=Mt,Ze=Ft;return S(),H("div",Dn,[i(Et,{gutter:20},{default:p(()=>[i(Je,{span:14},{default:p(()=>[i(Ae,null,{header:p(()=>[$("div",Kn,[s[16]||(s[16]=$("span",{class:"title"},"用户管理",-1)),i(T,{type:"primary",size:"small",onClick:A},{default:p(()=>[i(O,null,{default:p(()=>[i(Re(tt))]),_:1}),s[15]||(s[15]=I(" 添加用户 ",-1))]),_:1,__:[15]})])]),default:p(()=>[i(Te,{inline:!0,class:"search-form"},{default:p(()=>[i(U,{label:"用户名"},{default:p(()=>[i(Q,{modelValue:n.value.userName,"onUpdate:modelValue":s[0]||(s[0]=m=>n.value.userName=m),placeholder:"请输入用户名",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),i(U,{label:"角色"},{default:p(()=>[i(Se,{modelValue:n.value.roleId,"onUpdate:modelValue":s[1]||(s[1]=m=>n.value.roleId=m),placeholder:"请选择角色",clearable:"",style:{width:"150px"}},{default:p(()=>[i(oe,{label:"全部",value:""}),(S(!0),H(be,null,Ee(r.value,m=>(S(),M(oe,{key:m.id,label:m.name,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(U,{label:"状态"},{default:p(()=>[i(Se,{modelValue:n.value.status,"onUpdate:modelValue":s[2]||(s[2]=m=>n.value.status=m),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:p(()=>[i(oe,{label:"全部",value:""}),i(oe,{label:"正常",value:"active"}),i(oe,{label:"已禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),i(U,null,{default:p(()=>[i(T,{type:"primary",onClick:g},{default:p(()=>s[17]||(s[17]=[I("查询",-1)])),_:1,__:[17]}),i(T,{onClick:_},{default:p(()=>s[18]||(s[18]=[I("重置",-1)])),_:1,__:[18]})]),_:1})]),_:1}),i(Ge,{data:ae.value,border:"",style:{width:"100%"}},{default:p(()=>[i(F,{prop:"userId",label:"用户ID",width:"150"}),i(F,{prop:"userName",label:"用户名",width:"120"}),i(F,{prop:"email",label:"邮箱",width:"180"}),i(F,{prop:"roleName",label:"角色",width:"120"},{default:p(({row:m})=>[i(We,{type:yt(m.roleId)},{default:p(()=>[I(he(m.roleName),1)]),_:2},1032,["type"])]),_:1}),i(F,{prop:"status",label:"状态",width:"100",align:"center"},{default:p(({row:m})=>[i(We,{type:m.status==="active"?"success":"danger"},{default:p(()=>[I(he(m.status==="active"?"正常":"已禁用"),1)]),_:2},1032,["type"])]),_:1}),i(F,{label:"操作",width:"200",fixed:"right"},{default:p(({row:m})=>[i(T,{link:"",type:"primary",size:"small",onClick:ce=>L(m)},{default:p(()=>s[19]||(s[19]=[I("编辑",-1)])),_:2,__:[19]},1032,["onClick"]),i(T,{link:"",type:"primary",size:"small",onClick:ce=>we(m)},{default:p(()=>s[20]||(s[20]=[I("分配角色",-1)])),_:2,__:[20]},1032,["onClick"]),i(T,{link:"",type:m.status==="active"?"warning":"success",size:"small",onClick:ce=>De(m)},{default:p(()=>[I(he(m.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"]),$("div",xn,[i(kt,{"current-page":o.value,"onUpdate:currentPage":s[3]||(s[3]=m=>o.value=m),"page-size":a.value,"onUpdate:pageSize":s[4]||(s[4]=m=>a.value=m),"page-sizes":[10,20,50],total:X.value.length,layout:"total, sizes, prev, pager, next",onSizeChange:Nt,onCurrentChange:Ct},null,8,["current-page","page-size","total"])])]),_:1})]),_:1}),i(Je,{span:10},{default:p(()=>[i(Ae,null,{header:p(()=>[$("div",In,[s[22]||(s[22]=$("span",{class:"title"},"角色管理",-1)),i(T,{type:"primary",size:"small",onClick:Ie},{default:p(()=>[i(O,null,{default:p(()=>[i(Re(tt))]),_:1}),s[21]||(s[21]=I(" 添加角色 ",-1))]),_:1,__:[21]})])]),default:p(()=>[i(Ge,{data:r.value,border:"",style:{width:"100%"}},{default:p(()=>[i(F,{prop:"name",label:"角色名称",width:"140"}),i(F,{prop:"description",label:"描述","min-width":"150","show-overflow-tooltip":""}),i(F,{prop:"userCount",label:"用户数",width:"80",align:"center"}),i(F,{label:"操作",width:"160"},{default:p(({row:m})=>[i(T,{link:"",type:"primary",size:"small",onClick:ce=>f(m)},{default:p(()=>s[23]||(s[23]=[I("编辑",-1)])),_:2,__:[23]},1032,["onClick"]),i(T,{link:"",type:"primary",size:"small",onClick:ce=>vt(m)},{default:p(()=>s[24]||(s[24]=[I("权限",-1)])),_:2,__:[24]},1032,["onClick"]),i(T,{link:"",type:"danger",size:"small",onClick:ce=>w(m),disabled:m.isSystem},{default:p(()=>s[25]||(s[25]=[I(" 删除 ",-1)])),_:2,__:[25]},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"])]),_:1}),E.value?(S(),M(Ae,{key:0,style:{"margin-top":"20px"}},{header:p(()=>[$("div",Sn,[$("span",Tn,he(E.value.name)+" - 权限配置",1)])]),default:p(()=>[i(bt,{ref_key:"permissionTreeRef",ref:x,data:R,props:{label:"label",children:"children"},"node-key":"id","show-checkbox":"","default-checked-keys":Y.value,onCheck:mt},null,8,["default-checked-keys"]),$("div",An,[i(T,{type:"primary",size:"small",onClick:gt},{default:p(()=>s[26]||(s[26]=[I("保存权限",-1)])),_:1,__:[26]})])]),_:1})):se("",!0)]),_:1})]),_:1}),i(Ze,{modelValue:l.value,"onUpdate:modelValue":s[10]||(s[10]=m=>l.value=m),title:d.value==="create"?"添加用户":"编辑用户",width:"500px",onClose:xe},{footer:p(()=>[i(T,{onClick:s[9]||(s[9]=m=>l.value=!1)},{default:p(()=>s[29]||(s[29]=[I("取消",-1)])),_:1,__:[29]}),i(T,{type:"primary",onClick:Ke},{default:p(()=>s[30]||(s[30]=[I("确定",-1)])),_:1,__:[30]})]),default:p(()=>[i(Te,{model:c.value,rules:N,ref_key:"userFormRef",ref:h,"label-width":"80px"},{default:p(()=>[i(U,{label:"用户名",prop:"userName"},{default:p(()=>[i(Q,{modelValue:c.value.userName,"onUpdate:modelValue":s[5]||(s[5]=m=>c.value.userName=m),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),i(U,{label:"邮箱",prop:"email"},{default:p(()=>[i(Q,{modelValue:c.value.email,"onUpdate:modelValue":s[6]||(s[6]=m=>c.value.email=m),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),i(U,{label:"角色",prop:"roleId"},{default:p(()=>[i(Se,{modelValue:c.value.roleId,"onUpdate:modelValue":s[7]||(s[7]=m=>c.value.roleId=m),placeholder:"请选择角色",style:{width:"100%"}},{default:p(()=>[(S(!0),H(be,null,Ee(r.value,m=>(S(),M(oe,{key:m.id,label:m.name,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(U,{label:"状态",prop:"status"},{default:p(()=>[i(_t,{modelValue:c.value.status,"onUpdate:modelValue":s[8]||(s[8]=m=>c.value.status=m)},{default:p(()=>[i(Xe,{label:"active"},{default:p(()=>s[27]||(s[27]=[I("正常",-1)])),_:1,__:[27]}),i(Xe,{label:"disabled"},{default:p(()=>s[28]||(s[28]=[I("禁用",-1)])),_:1,__:[28]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),i(Ze,{modelValue:v.value,"onUpdate:modelValue":s[14]||(s[14]=m=>v.value=m),title:C.value==="create"?"添加角色":"编辑角色",width:"500px",onClose:Z},{footer:p(()=>[i(T,{onClick:s[13]||(s[13]=m=>v.value=!1)},{default:p(()=>s[31]||(s[31]=[I("取消",-1)])),_:1,__:[31]}),i(T,{type:"primary",onClick:P},{default:p(()=>s[32]||(s[32]=[I("确定",-1)])),_:1,__:[32]})]),default:p(()=>[i(Te,{model:y.value,rules:b,ref_key:"roleFormRef",ref:k,"label-width":"80px"},{default:p(()=>[i(U,{label:"角色名称",prop:"name"},{default:p(()=>[i(Q,{modelValue:y.value.name,"onUpdate:modelValue":s[11]||(s[11]=m=>y.value.name=m),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),i(U,{label:"角色描述",prop:"description"},{default:p(()=>[i(Q,{modelValue:y.value.description,"onUpdate:modelValue":s[12]||(s[12]=m=>y.value.description=m),type:"textarea",rows:3,placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ca=Ut(zn,[["__scopeId","data-v-64e6881d"]]);export{ca as default};
