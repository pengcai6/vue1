import{d as se,r as u,B as M,j as re,c as ie,a,w as l,o as ue,b as x,i as s,n as h,E as de,e as S,aN as U}from"./index-DAZDpghP.js";import{E as me}from"./dialog-CI4qXYgt.js";import{E as pe,a as ce}from"./radio-ChFPTsFt.js";import{E as fe}from"./card-_e8Y2itV.js";import{E as _e}from"./pagination-BBEphupa.js";/* empty css            */import{E as ve,a as ge}from"./select-B_Nc0zOl.js";import"./scrollbar-BKn1N4ug.js";import{E as be}from"./input-BsUoEHjr.js";import{a as Ce,E as ye}from"./table-column-CkszfM6q.js";import"./checkbox-DDntw5na.js";import{E as xe,a as Ee}from"./form-item-D50nbGgb.js";import{E as ke}from"./button-CFFx6FdR.js";import{E as Ve}from"./index-i9SNigSW.js";import{E}from"./index-TLwRQi5N.js";import{E as f}from"./index-B4p_U5VT.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./event-D5_Wo8Xc.js";import"./scroll-PXqKi88e.js";import"./index-17xiCnpu.js";import"./isEqual-DlB8YXyV.js";import"./strings-BN0-5NCg.js";import"./debounce-Bv_84CHO.js";import"./_baseIteratee-DgY2c_zD.js";import"./isPlainObject-CnEW4LJ3.js";import"./_baseClone-BBryStzM.js";import"./validator-BGx-pjuX.js";const ze={class:"organization-management-page"},Ie={class:"card-header"},he={class:"pagination"},Ae={class:"member-management"},$e=se({__name:"organization-management",setup(Be){const d=u({name:"",status:""}),m=u([]),_=u(1),k=u(10),v=u(!1),C=u("create"),V=u(),r=u({id:"",name:"",description:"",admin:"",status:"normal"}),R={name:[{required:!0,message:"请输入组织名称",trigger:"blur"}],description:[{required:!0,message:"请输入组织描述",trigger:"blur"}],admin:[{required:!0,message:"请输入管理员名称",trigger:"blur"}]},w=u(!1),y=u(""),z=u({}),j=M(()=>z.value[y.value]||[]),O=()=>{const t=[{id:"org-001",name:"技术研发部",description:"负责公司核心技术研发和创新",memberCount:25,admin:"张三",createdAt:"2024-01-15 10:30:00",status:"normal"},{id:"org-002",name:"产品部",description:"负责产品规划、设计和管理",memberCount:18,admin:"李四",createdAt:"2024-02-20 14:20:00",status:"normal"},{id:"org-003",name:"市场营销部",description:"负责市场推广和品牌建设",memberCount:12,admin:"王五",createdAt:"2024-03-10 09:15:00",status:"normal"},{id:"org-004",name:"AI实验室",description:"专注于人工智能技术研究与应用",memberCount:30,admin:"赵六",createdAt:"2024-04-05 11:00:00",status:"normal"},{id:"org-005",name:"数据中心",description:"负责数据管理和数据分析",memberCount:8,admin:"钱七",createdAt:"2024-05-12 16:45:00",status:"disabled"}],e={"org-001":[{userId:"user-001",userName:"张三",email:"zhangsan@example.com",role:"admin",joinedAt:"2024-01-15 10:30:00"},{userId:"user-002",userName:"李明",email:"liming@example.com",role:"member",joinedAt:"2024-01-16 09:20:00"},{userId:"user-003",userName:"王芳",email:"wangfang@example.com",role:"member",joinedAt:"2024-01-18 14:30:00"}],"org-002":[{userId:"user-004",userName:"李四",email:"lisi@example.com",role:"admin",joinedAt:"2024-02-20 14:20:00"},{userId:"user-005",userName:"陈伟",email:"chenwei@example.com",role:"member",joinedAt:"2024-02-21 10:00:00"}]};m.value=t,z.value=e},F=()=>{O()},A=M(()=>{let t=m.value;return d.value.name&&(t=t.filter(e=>e.name.toLowerCase().includes(d.value.name.toLowerCase()))),d.value.status&&(t=t.filter(e=>e.status===d.value.status)),t}),q=()=>{_.value=1},L=()=>{d.value={name:"",status:""},_.value=1},P=()=>{C.value="create",v.value=!0},G=t=>{C.value="edit",r.value={...t},v.value=!0},H=t=>{const e=t.status==="normal"?"停用":"启用";E.confirm(`确定要${e}组织"${t.name}"吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.status=t.status==="normal"?"disabled":"normal",f.success(`${e}成功`)})},J=t=>{E.confirm(`确定要删除组织"${t.name}"吗? 此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const e=m.value.findIndex(p=>p.id===t.id);e>-1&&(m.value.splice(e,1),f.success("删除成功"))})},K=async()=>{if(await V.value.validate(),C.value==="create"){const t={...r.value,id:`org-${Date.now()}`,memberCount:0,createdAt:new Date().toLocaleString("zh-CN")};m.value.unshift(t),f.success("创建成功")}else{const t=m.value.findIndex(e=>e.id===r.value.id);t>-1&&(m.value[t]={...m.value[t],...r.value},f.success("更新成功"))}v.value=!1},Q=()=>{var t;(t=V.value)==null||t.resetFields(),r.value={id:"",name:"",description:"",admin:"",status:"normal"}},W=t=>{y.value=t.id,w.value=!0},X=()=>{f.info("添加成员功能（演示模式）")},Y=t=>{const e=t.role==="admin"?"member":"admin";E.confirm(`确定要将"${t.userName}"的角色变更为${e==="admin"?"管理员":"成员"}吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{t.role=e,f.success("角色变更成功")})},Z=t=>{E.confirm(`确定要移除成员"${t.userName}"吗?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=z.value[y.value],p=e.findIndex(n=>n.userId===t.userId);if(p>-1){e.splice(p,1);const n=m.value.find(g=>g.id===y.value);n&&(n.memberCount=e.length),f.success("移除成功")}})},ee=t=>{k.value=t,_.value=1},ae=t=>{_.value=t};return re(()=>{F()}),(t,e)=>{const p=de,n=ke,g=be,c=Ee,I=ge,te=ve,$=xe,i=ye,B=Ve,N=Ce,le=_e,oe=fe,T=ce,ne=pe,D=me;return ue(),ie("div",ze,[a(oe,null,{header:l(()=>[x("div",Ie,[e[12]||(e[12]=x("span",{class:"title"},"组织管理",-1)),a(n,{type:"primary",onClick:P},{default:l(()=>[a(p,null,{default:l(()=>[a(S(U))]),_:1}),e[11]||(e[11]=s(" 创建组织 ",-1))]),_:1,__:[11]})])]),default:l(()=>[a($,{inline:!0,class:"search-form"},{default:l(()=>[a(c,{label:"组织名称"},{default:l(()=>[a(g,{modelValue:d.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value.name=o),placeholder:"请输入组织名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),a(c,{label:"状态"},{default:l(()=>[a(te,{modelValue:d.value.status,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value.status=o),placeholder:"请选择状态",clearable:"",style:{width:"150px"}},{default:l(()=>[a(I,{label:"全部",value:""}),a(I,{label:"正常",value:"normal"}),a(I,{label:"已停用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),a(c,null,{default:l(()=>[a(n,{type:"primary",onClick:q},{default:l(()=>e[13]||(e[13]=[s("查询",-1)])),_:1,__:[13]}),a(n,{onClick:L},{default:l(()=>e[14]||(e[14]=[s("重置",-1)])),_:1,__:[14]})]),_:1})]),_:1}),a(N,{data:A.value,border:"",style:{width:"100%"}},{default:l(()=>[a(i,{prop:"id",label:"组织ID",width:"180"}),a(i,{prop:"name",label:"组织名称",width:"200"}),a(i,{prop:"description",label:"描述","min-width":"200"}),a(i,{prop:"memberCount",label:"成员数",width:"100",align:"center"}),a(i,{prop:"admin",label:"管理员",width:"120"}),a(i,{prop:"createdAt",label:"创建时间",width:"180"}),a(i,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(({row:o})=>[a(B,{type:o.status==="normal"?"success":"danger"},{default:l(()=>[s(h(o.status==="normal"?"正常":"已停用"),1)]),_:2},1032,["type"])]),_:1}),a(i,{label:"操作",width:"250",fixed:"right"},{default:l(({row:o})=>[a(n,{link:"",type:"primary",size:"small",onClick:b=>G(o)},{default:l(()=>e[15]||(e[15]=[s("编辑",-1)])),_:2,__:[15]},1032,["onClick"]),a(n,{link:"",type:"primary",size:"small",onClick:b=>W(o)},{default:l(()=>e[16]||(e[16]=[s("成员管理",-1)])),_:2,__:[16]},1032,["onClick"]),a(n,{link:"",type:o.status==="normal"?"warning":"success",size:"small",onClick:b=>H(o)},{default:l(()=>[s(h(o.status==="normal"?"停用":"启用"),1)]),_:2},1032,["type","onClick"]),a(n,{link:"",type:"danger",size:"small",onClick:b=>J(o)},{default:l(()=>e[17]||(e[17]=[s("删除",-1)])),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),x("div",he,[a(le,{"current-page":_.value,"onUpdate:currentPage":e[2]||(e[2]=o=>_.value=o),"page-size":k.value,"onUpdate:pageSize":e[3]||(e[3]=o=>k.value=o),"page-sizes":[10,20,50,100],total:A.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ee,onCurrentChange:ae},null,8,["current-page","page-size","total"])])]),_:1}),a(D,{modelValue:v.value,"onUpdate:modelValue":e[9]||(e[9]=o=>v.value=o),title:C.value==="create"?"创建组织":"编辑组织",width:"600px",onClose:Q},{footer:l(()=>[a(n,{onClick:e[8]||(e[8]=o=>v.value=!1)},{default:l(()=>e[20]||(e[20]=[s("取消",-1)])),_:1,__:[20]}),a(n,{type:"primary",onClick:K},{default:l(()=>e[21]||(e[21]=[s("确定",-1)])),_:1,__:[21]})]),default:l(()=>[a($,{model:r.value,rules:R,ref_key:"formRef",ref:V,"label-width":"100px"},{default:l(()=>[a(c,{label:"组织名称",prop:"name"},{default:l(()=>[a(g,{modelValue:r.value.name,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.name=o),placeholder:"请输入组织名称"},null,8,["modelValue"])]),_:1}),a(c,{label:"组织描述",prop:"description"},{default:l(()=>[a(g,{modelValue:r.value.description,"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.description=o),type:"textarea",rows:3,placeholder:"请输入组织描述"},null,8,["modelValue"])]),_:1}),a(c,{label:"管理员",prop:"admin"},{default:l(()=>[a(g,{modelValue:r.value.admin,"onUpdate:modelValue":e[6]||(e[6]=o=>r.value.admin=o),placeholder:"请输入管理员名称"},null,8,["modelValue"])]),_:1}),a(c,{label:"状态",prop:"status"},{default:l(()=>[a(ne,{modelValue:r.value.status,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value.status=o)},{default:l(()=>[a(T,{label:"normal"},{default:l(()=>e[18]||(e[18]=[s("正常",-1)])),_:1,__:[18]}),a(T,{label:"disabled"},{default:l(()=>e[19]||(e[19]=[s("停用",-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(D,{modelValue:w.value,"onUpdate:modelValue":e[10]||(e[10]=o=>w.value=o),title:"成员管理",width:"800px"},{default:l(()=>[x("div",Ae,[a(n,{type:"primary",size:"small",onClick:X,style:{"margin-bottom":"16px"}},{default:l(()=>[a(p,null,{default:l(()=>[a(S(U))]),_:1}),e[22]||(e[22]=s(" 添加成员 ",-1))]),_:1,__:[22]}),a(N,{data:j.value,border:""},{default:l(()=>[a(i,{prop:"userId",label:"用户ID",width:"180"}),a(i,{prop:"userName",label:"用户名",width:"150"}),a(i,{prop:"email",label:"邮箱",width:"200"}),a(i,{prop:"role",label:"角色",width:"120"},{default:l(({row:o})=>[a(B,{type:o.role==="admin"?"danger":"primary"},{default:l(()=>[s(h(o.role==="admin"?"管理员":"成员"),1)]),_:2},1032,["type"])]),_:1}),a(i,{prop:"joinedAt",label:"加入时间",width:"180"}),a(i,{label:"操作",width:"150"},{default:l(({row:o})=>[a(n,{link:"",type:"primary",size:"small",onClick:b=>Y(o)},{default:l(()=>e[23]||(e[23]=[s(" 变更角色 ",-1)])),_:2,__:[23]},1032,["onClick"]),a(n,{link:"",type:"danger",size:"small",onClick:b=>Z(o)},{default:l(()=>e[24]||(e[24]=[s(" 移除 ",-1)])),_:2,__:[24]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"])])}}}),na=we($e,[["__scopeId","data-v-00b0c427"]]);export{na as default};
