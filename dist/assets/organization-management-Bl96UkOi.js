import{d as ie,r as d,D as j,j as de,c as me,a as l,w as a,o as pe,b as E,i as s,p as D,E as fe,e as R,b7 as F,l as _,_ as ve}from"./index-BX2sZVyW.js";import{E as ce}from"./dialog-BbJ9SoMc.js";import{E as ge,a as _e}from"./radio-group-DyO9WxrE.js";/* empty css              */import{E as be}from"./card-B6phTZGW.js";import{E as Ce}from"./pagination-uLtAnqW5.js";/* empty css            */import{E as ye,a as Ve}from"./select-9k77N6f3.js";import"./scrollbar-C9NSq6wy.js";import{E as we}from"./input-5aB7ALv6.js";import{a as xe,E as ke}from"./table-column-DG__lvqo.js";import"./checkbox-B8dDd1Mj.js";import{E as Ee,a as ze}from"./form-item-BCUJoI1X.js";import{E as Ie}from"./button-Cn9gqGCu.js";import{E as Ne}from"./index-BFcHm1-Q.js";import{E as z}from"./index-zMVneW1z.js";import"./event-BORzi4vc.js";import"./scroll-g5r06U3K.js";import"./index-PwB6y63X.js";import"./isEqual-ohjdCfDM.js";import"./strings-JcT2fde-.js";import"./debounce-DYp1oJWc.js";import"./isPlainObject-jZyBOBeK.js";import"./_baseClone-BOpOh07B.js";import"./validator-B2Ub6XB3.js";const Ae={class:"organization-management-page"},$e={class:"card-header"},he={class:"pagination"},De={class:"member-management"},Me=ie({__name:"organization-management",setup(Ue){const f=d({name:"",status:""}),m=d([]),C=d(1),I=d(10),y=d(!1),k=d("create"),N=d(),r=d({id:"",name:"",description:"",admin:"",status:"normal"}),O={name:[{required:!0,message:"请输入组织名称",trigger:"blur"}],description:[{required:!0,message:"请输入组织描述",trigger:"blur"}],admin:[{required:!0,message:"请输入管理员名称",trigger:"blur"}]},A=d(!1),v=d(""),b=d({}),L=j(()=>b.value[v.value]||[]),V=d(!1),i=d({userName:"",email:"",role:"member"}),q=()=>{const o=[{id:"org-001",name:"技术研发部",description:"负责公司核心技术研发和创新",memberCount:25,admin:"张三",createdAt:"2024-01-15 10:30:00",status:"normal"},{id:"org-002",name:"产品部",description:"负责产品规划、设计和管理",memberCount:18,admin:"李四",createdAt:"2024-02-20 14:20:00",status:"normal"},{id:"org-003",name:"市场营销部",description:"负责市场推广和品牌建设",memberCount:12,admin:"王五",createdAt:"2024-03-10 09:15:00",status:"normal"},{id:"org-004",name:"AI实验室",description:"专注于人工智能技术研究与应用",memberCount:30,admin:"赵六",createdAt:"2024-04-05 11:00:00",status:"normal"},{id:"org-005",name:"数据中心",description:"负责数据管理和数据分析",memberCount:8,admin:"钱七",createdAt:"2024-05-12 16:45:00",status:"disabled"}],e={"org-001":[{userId:"user-001",userName:"张三",email:"zhangsan@example.com",role:"admin",joinedAt:"2024-01-15 10:30:00"},{userId:"user-002",userName:"李明",email:"liming@example.com",role:"member",joinedAt:"2024-01-16 09:20:00"},{userId:"user-003",userName:"王芳",email:"wangfang@example.com",role:"member",joinedAt:"2024-01-18 14:30:00"}],"org-002":[{userId:"user-004",userName:"李四",email:"lisi@example.com",role:"admin",joinedAt:"2024-02-20 14:20:00"},{userId:"user-005",userName:"陈伟",email:"chenwei@example.com",role:"member",joinedAt:"2024-02-21 10:00:00"}]};m.value=o,b.value=e},P=()=>{q()},M=j(()=>{let o=m.value;return f.value.name&&(o=o.filter(e=>e.name.toLowerCase().includes(f.value.name.toLowerCase()))),f.value.status&&(o=o.filter(e=>e.status===f.value.status)),o}),G=()=>{C.value=1},H=()=>{f.value={name:"",status:""},C.value=1},J=()=>{k.value="create",y.value=!0},K=o=>{k.value="edit",r.value={...o},y.value=!0},Q=o=>{const e=o.status==="normal"?"停用":"启用";z.confirm(`确定要${e}组织"${o.name}"吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.status=o.status==="normal"?"disabled":"normal",_.success(`${e}成功`)})},W=o=>{z.confirm(`确定要删除组织"${o.name}"吗? 此操作不可恢复。`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>{const e=m.value.findIndex(c=>c.id===o.id);e>-1&&(m.value.splice(e,1),_.success("删除成功"))})},X=async()=>{if(await N.value.validate(),k.value==="create"){const o={...r.value,id:`org-${Date.now()}`,memberCount:0,createdAt:new Date().toLocaleString("zh-CN")};m.value.unshift(o),_.success("创建成功")}else{const o=m.value.findIndex(e=>e.id===r.value.id);o>-1&&(m.value[o]={...m.value[o],...r.value},_.success("更新成功"))}y.value=!1},Y=()=>{var o;(o=N.value)==null||o.resetFields(),r.value={id:"",name:"",description:"",admin:"",status:"normal"}},Z=o=>{v.value=o.id,A.value=!0},ee=()=>{i.value={userName:"",email:"",role:"member"},V.value=!0},le=()=>{if(!i.value.userName||!i.value.email){_.warning("请填写完整信息");return}const o={userId:`user-${Date.now()}`,userName:i.value.userName,email:i.value.email,role:i.value.role,joinedAt:new Date().toLocaleString("zh-CN")};b.value[v.value]||(b.value[v.value]=[]),b.value[v.value].push(o);const e=m.value.find(c=>c.id===v.value);e&&(e.memberCount=b.value[v.value].length),_.success("添加成员成功"),V.value=!1},ae=o=>{const e=o.role==="admin"?"member":"admin";z.confirm(`确定要将"${o.userName}"的角色变更为${e==="admin"?"管理员":"成员"}吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(()=>{o.role=e,_.success("角色变更成功")})},te=o=>{z.confirm(`确定要移除成员"${o.userName}"吗?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=b.value[v.value],c=e.findIndex(n=>n.userId===o.userId);if(c>-1){e.splice(c,1);const n=m.value.find(g=>g.id===v.value);n&&(n.memberCount=e.length),_.success("移除成功")}})},oe=o=>{I.value=o,C.value=1},ne=o=>{C.value=o};return de(()=>{P()}),(o,e)=>{const c=fe,n=Ie,g=we,p=ze,w=Ve,U=ye,$=Ee,u=ke,B=Ne,T=xe,se=Ce,re=be,S=_e,ue=ge,h=ce;return pe(),me("div",Ae,[l(re,null,{header:a(()=>[E("div",$e,[e[17]||(e[17]=E("span",{class:"title"},"组织管理",-1)),l(n,{type:"primary",onClick:J},{default:a(()=>[l(c,null,{default:a(()=>[l(R(F))]),_:1}),e[16]||(e[16]=s(" 创建组织 ",-1))]),_:1,__:[16]})])]),default:a(()=>[l($,{inline:!0,class:"search-form"},{default:a(()=>[l(p,{label:"组织名称"},{default:a(()=>[l(g,{modelValue:f.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value.name=t),placeholder:"请输入组织名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(p,{label:"状态"},{default:a(()=>[l(U,{modelValue:f.value.status,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value.status=t),placeholder:"请选择状态",clearable:"",style:{width:"150px"}},{default:a(()=>[l(w,{label:"全部",value:""}),l(w,{label:"正常",value:"normal"}),l(w,{label:"已停用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[l(n,{type:"primary",onClick:G},{default:a(()=>e[18]||(e[18]=[s("查询",-1)])),_:1,__:[18]}),l(n,{onClick:H},{default:a(()=>e[19]||(e[19]=[s("重置",-1)])),_:1,__:[19]})]),_:1})]),_:1}),l(T,{data:M.value,border:"",style:{width:"100%"}},{default:a(()=>[l(u,{prop:"id",label:"组织ID",width:"180"}),l(u,{prop:"name",label:"组织名称",width:"200"}),l(u,{prop:"description",label:"描述","min-width":"200"}),l(u,{prop:"memberCount",label:"成员数",width:"100",align:"center"}),l(u,{prop:"admin",label:"管理员",width:"120"}),l(u,{prop:"createdAt",label:"创建时间",width:"180"}),l(u,{prop:"status",label:"状态",width:"100",align:"center"},{default:a(({row:t})=>[l(B,{type:t.status==="normal"?"success":"danger"},{default:a(()=>[s(D(t.status==="normal"?"正常":"已停用"),1)]),_:2},1032,["type"])]),_:1}),l(u,{label:"操作",width:"250",fixed:"right"},{default:a(({row:t})=>[l(n,{link:"",type:"primary",size:"small",onClick:x=>K(t)},{default:a(()=>e[20]||(e[20]=[s("编辑",-1)])),_:2,__:[20]},1032,["onClick"]),l(n,{link:"",type:"primary",size:"small",onClick:x=>Z(t)},{default:a(()=>e[21]||(e[21]=[s("成员管理",-1)])),_:2,__:[21]},1032,["onClick"]),l(n,{link:"",type:t.status==="normal"?"warning":"success",size:"small",onClick:x=>Q(t)},{default:a(()=>[s(D(t.status==="normal"?"停用":"启用"),1)]),_:2},1032,["type","onClick"]),l(n,{link:"",type:"danger",size:"small",onClick:x=>W(t)},{default:a(()=>e[22]||(e[22]=[s("删除",-1)])),_:2,__:[22]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),E("div",he,[l(se,{"current-page":C.value,"onUpdate:currentPage":e[2]||(e[2]=t=>C.value=t),"page-size":I.value,"onUpdate:pageSize":e[3]||(e[3]=t=>I.value=t),"page-sizes":[10,20,50,100],total:M.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:oe,onCurrentChange:ne},null,8,["current-page","page-size","total"])])]),_:1}),l(h,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=t=>y.value=t),title:k.value==="create"?"创建组织":"编辑组织",width:"600px",onClose:Y},{footer:a(()=>[l(n,{onClick:e[8]||(e[8]=t=>y.value=!1)},{default:a(()=>e[25]||(e[25]=[s("取消",-1)])),_:1,__:[25]}),l(n,{type:"primary",onClick:X},{default:a(()=>e[26]||(e[26]=[s("确定",-1)])),_:1,__:[26]})]),default:a(()=>[l($,{model:r.value,rules:O,ref_key:"formRef",ref:N,"label-width":"100px"},{default:a(()=>[l(p,{label:"组织名称",prop:"name"},{default:a(()=>[l(g,{modelValue:r.value.name,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.name=t),placeholder:"请输入组织名称",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(p,{label:"组织描述",prop:"description"},{default:a(()=>[l(g,{modelValue:r.value.description,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.description=t),type:"textarea",rows:3,placeholder:"请输入组织描述",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(p,{label:"管理员",prop:"admin"},{default:a(()=>[l(g,{modelValue:r.value.admin,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.admin=t),placeholder:"请输入管理员名称",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(p,{label:"状态",prop:"status"},{default:a(()=>[l(ue,{modelValue:r.value.status,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.status=t)},{default:a(()=>[l(S,{label:"normal"},{default:a(()=>e[23]||(e[23]=[s("正常",-1)])),_:1,__:[23]}),l(S,{label:"disabled"},{default:a(()=>e[24]||(e[24]=[s("停用",-1)])),_:1,__:[24]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(h,{modelValue:A.value,"onUpdate:modelValue":e[10]||(e[10]=t=>A.value=t),title:"成员管理",width:"800px"},{default:a(()=>[E("div",De,[l(n,{type:"primary",size:"small",onClick:ee,style:{"margin-bottom":"16px"}},{default:a(()=>[l(c,null,{default:a(()=>[l(R(F))]),_:1}),e[27]||(e[27]=s(" 添加成员 ",-1))]),_:1,__:[27]}),l(T,{data:L.value,border:""},{default:a(()=>[l(u,{prop:"userId",label:"用户ID",width:"180"}),l(u,{prop:"userName",label:"用户名",width:"150"}),l(u,{prop:"email",label:"邮箱",width:"200"}),l(u,{prop:"role",label:"角色",width:"120"},{default:a(({row:t})=>[l(B,{type:t.role==="admin"?"danger":"primary"},{default:a(()=>[s(D(t.role==="admin"?"管理员":"成员"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"joinedAt",label:"加入时间",width:"180"}),l(u,{label:"操作",width:"150"},{default:a(({row:t})=>[l(n,{link:"",type:"primary",size:"small",onClick:x=>ae(t)},{default:a(()=>e[28]||(e[28]=[s(" 变更角色 ",-1)])),_:2,__:[28]},1032,["onClick"]),l(n,{link:"",type:"danger",size:"small",onClick:x=>te(t)},{default:a(()=>e[29]||(e[29]=[s(" 移除 ",-1)])),_:2,__:[29]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"]),l(h,{modelValue:V.value,"onUpdate:modelValue":e[15]||(e[15]=t=>V.value=t),title:"添加成员",width:"500px"},{footer:a(()=>[l(n,{onClick:e[14]||(e[14]=t=>V.value=!1)},{default:a(()=>e[30]||(e[30]=[s("取消",-1)])),_:1,__:[30]}),l(n,{type:"primary",onClick:le},{default:a(()=>e[31]||(e[31]=[s("确定",-1)])),_:1,__:[31]})]),default:a(()=>[l($,{model:i.value,"label-width":"80px"},{default:a(()=>[l(p,{label:"用户名"},{default:a(()=>[l(g,{modelValue:i.value.userName,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.userName=t),placeholder:"请输入用户名",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(p,{label:"邮箱"},{default:a(()=>[l(g,{modelValue:i.value.email,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.email=t),placeholder:"请输入邮箱",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),l(p,{label:"角色"},{default:a(()=>[l(U,{modelValue:i.value.role,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.role=t),placeholder:"请选择角色",style:{width:"100%"}},{default:a(()=>[l(w,{label:"管理员",value:"admin"}),l(w,{label:"成员",value:"member"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),sl=ve(Me,[["__scopeId","data-v-023150f7"]]);export{sl as default};
